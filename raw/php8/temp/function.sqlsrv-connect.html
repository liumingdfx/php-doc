<div id="function.sqlsrv-connect" class="refentry"> <div class="refnamediv">  <h1 class="refname">sqlsrv_connect</h1>  <p class="verinfo">(No version information available, might only be in Git)</p><p class="refpurpose"><span class="refname">sqlsrv_connect</span> &mdash; <span class="dc-title">Opens a connection to a Microsoft SQL Server database</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.sqlsrv-connect-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>sqlsrv_connect</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$serverName</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$connectionInfo</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766">resource</span></div>  <p class="para rdfs-comment">   Opens a connection to a Microsoft SQL Server database. By default, the connection    is attempted using Windows Authentication. To connect using SQL Server    Authentication, include &quot;UID&quot; and &quot;PWD&quot; in the connection options array.  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.sqlsrv-connect-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">serverName</span></dt>     <dd>      <p class="para">       The name of the server to which a connection is established. To connect        to a specific instance, follow the server name with a backward slash        and the instance name (e.g. serverName\sqlexpress).      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">connectionInfo</span></dt>     <dd>      <p class="para">       An associative array that specifies options for connecting to the server.        If values for the UID and PWD keys are not specified, the connection        will be attempted using Windows Authentication. For a complete list of supported        keys, see <a href="http://msdn.microsoft.com/en-us/library/ff628167.aspx" class="link external">&raquo;&nbsp;SQLSRV Connection Options</a>.      </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.sqlsrv-connect-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   A connection resource. If a connection cannot be successfully opened, <strong><span>false</span></strong> is returned.  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.sqlsrv-connect-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 Connect using Windows Authentication.</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$serverName </span><span style="color: #007700">= </span><span style="color: #DD0000">"serverName\\sqlexpress"</span><span style="color: #007700">; </span><span style="color: #FF8000">//serverName\instanceName<br /><br />// Since UID and PWD are not specified in the $connectionInfo array,<br />// The connection will be attempted using Windows Authentication.<br /></span><span style="color: #9876AA">$connectionInfo </span><span style="color: #007700">= array( </span><span style="color: #DD0000">"Database"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"dbName"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn </span><span style="color: #007700">= </span><span style="color: #9876AA">sqlsrv_connect</span><span style="color: #007700">( </span><span style="color: #9876AA">$serverName</span><span style="color: #007700">, </span><span style="color: #9876AA">$connectionInfo</span><span style="color: #007700">);<br /><br />if( </span><span style="color: #9876AA">$conn </span><span style="color: #007700">) {<br />     echo </span><span style="color: #DD0000">"Connection established.&lt;br /&gt;"</span><span style="color: #007700">;<br />}else{<br />     echo </span><span style="color: #DD0000">"Connection could not be established.&lt;br /&gt;"</span><span style="color: #007700">;<br />     die( </span><span style="color: #9876AA">print_r</span><span style="color: #007700">( </span><span style="color: #9876AA">sqlsrv_errors</span><span style="color: #007700">(), </span><span style="color: #9876AA">true</span><span style="color: #007700">));<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span>  <p class="para">   <div class="example" id="">    <p><strong>示例 #2 Connect by specifying a user name and password.</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$serverName </span><span style="color: #007700">= </span><span style="color: #DD0000">"serverName\\sqlexpress"</span><span style="color: #007700">; </span><span style="color: #FF8000">//serverName\instanceName<br /></span><span style="color: #9876AA">$connectionInfo </span><span style="color: #007700">= array( </span><span style="color: #DD0000">"Database"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"dbName"</span><span style="color: #007700">, </span><span style="color: #DD0000">"UID"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"userName"</span><span style="color: #007700">, </span><span style="color: #DD0000">"PWD"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn </span><span style="color: #007700">= </span><span style="color: #9876AA">sqlsrv_connect</span><span style="color: #007700">( </span><span style="color: #9876AA">$serverName</span><span style="color: #007700">, </span><span style="color: #9876AA">$connectionInfo</span><span style="color: #007700">);<br /><br />if( </span><span style="color: #9876AA">$conn </span><span style="color: #007700">) {<br />     echo </span><span style="color: #DD0000">"Connection established.&lt;br /&gt;"</span><span style="color: #007700">;<br />}else{<br />     echo </span><span style="color: #DD0000">"Connection could not be established.&lt;br /&gt;"</span><span style="color: #007700">;<br />     die( </span><span style="color: #9876AA">print_r</span><span style="color: #007700">( </span><span style="color: #9876AA">sqlsrv_errors</span><span style="color: #007700">(), </span><span style="color: #9876AA">true</span><span style="color: #007700">));<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #3 Connect on a specified port.</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$serverName </span><span style="color: #007700">= </span><span style="color: #DD0000">"serverName\\sqlexpress, 1542"</span><span style="color: #007700">; </span><span style="color: #FF8000">//serverName\instanceName, portNumber (default is 1433)<br /></span><span style="color: #9876AA">$connectionInfo </span><span style="color: #007700">= array( </span><span style="color: #DD0000">"Database"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"dbName"</span><span style="color: #007700">, </span><span style="color: #DD0000">"UID"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"userName"</span><span style="color: #007700">, </span><span style="color: #DD0000">"PWD"</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"password"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn </span><span style="color: #007700">= </span><span style="color: #9876AA">sqlsrv_connect</span><span style="color: #007700">( </span><span style="color: #9876AA">$serverName</span><span style="color: #007700">, </span><span style="color: #9876AA">$connectionInfo</span><span style="color: #007700">);<br /><br />if( </span><span style="color: #9876AA">$conn </span><span style="color: #007700">) {<br />     echo </span><span style="color: #DD0000">"Connection established.&lt;br /&gt;"</span><span style="color: #007700">;<br />}else{<br />     echo </span><span style="color: #DD0000">"Connection could not be established.&lt;br /&gt;"</span><span style="color: #007700">;<br />     die( </span><span style="color: #9876AA">print_r</span><span style="color: #007700">( </span><span style="color: #9876AA">sqlsrv_errors</span><span style="color: #007700">(), </span><span style="color: #9876AA">true</span><span style="color: #007700">));<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.sqlsrv-connect-notes">  <h3 class="title">注释</h3>  <p class="para">   By default, the <span class="function"><strong style="color:#CC7832">sqlsrv_connect()</strong></span> uses connection pooling to    improve connection performance. To turn off connection pooling (i.e. force a    new connection on each call), set the &quot;ConnectionPooling&quot; option in the    $connectionOptions array to 0 (or <strong><span>false</span></strong>). For more information, see    <a href="http://msdn.microsoft.com/en-us/library/cc644930.aspx" class="link external">&raquo;&nbsp;SQLSRV Connection Pooling</a>.  </p>  <p class="para">  The SQLSRV extension does not have a dedicated function for changing which   database is connected to. The target database is specified in the   $connectionOptions array that is passed to sqlsrv_connect. To change the   database on an open connection, execute the following query &quot;USE dbName&quot;   (e.g. sqlsrv_query($conn, &quot;USE dbName&quot;)).  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.sqlsrv-connect-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link sqlsrv_close()} - Closes an open connection and releases resourses associated with the connection</span></li>    <li class="member"><span class="function">{@link sqlsrv_errors()} - Returns error and warning information about the last SQLSRV operation performed</span></li>    <li class="member"><span class="function">{@link sqlsrv_query()} - Prepares and executes a query</span></li>   </ul>  </span> </div></div>