<div id="function.json-decode" class="refentry"> <div class="refnamediv">  <h1 class="refname">json_decode</h1>  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7, PHP 8, PECL json &gt;= 1.2.0)</p><p class="refpurpose"><span class="refname">json_decode</span> &mdash; <span class="dc-title">对 JSON 格式的字符串进行解码</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.json-decode-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>json_decode</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$json</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">bool</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$associative</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$depth</span><span class="initializer"> = 512</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$flags</span><span class="initializer"> = 0</span></span><br>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div>  <p class="para rdfs-comment">   接受一个 JSON 编码的字符串并且把它转换为 PHP 值。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.json-decode-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">json</span></dt>     <dd>      <p class="para">       待解码的 <span class="parameter" style="color:#3A95FF">json</span> <span class="type" style="color:#EAB766">string</span> 格式的字符串。      </p>      <p class="para">       这个函数仅能处理 UTF-8 编码的数据。      </p>       <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:   <p class="para">   PHP 实现了 JSON 的一个超集，参考   <a href="http://www.faqs.org/rfcs/rfc7159" class="link external">&raquo;&nbsp;RFC 7159</a>.  </p> </p></blockquote>     </dd>             <dt><span class="parameter" style="color:#3A95FF">associative</span></dt>     <dd>      <p class="para">       当为 <strong><span>true</span></strong> 时，JSON 对象将返回关联 <span class="type" style="color:#EAB766">array</span>；当为 <strong><span>false</span></strong> 时，JSON 对象将返回       <span class="type" style="color:#EAB766">object</span>。当为 <strong><span>null</span></strong> 时，JSON 对象将返回关联 <span class="type" style="color:#EAB766">array</span> 或 <span class="type" style="color:#EAB766">object</span>，这取决于是否在       <span class="parameter" style="color:#3A95FF">flags</span> 中设置 <strong><span>JSON_OBJECT_AS_ARRAY</span></strong>。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">depth</span></dt>     <dd>      <p class="para">       需要解码的结构，其最大嵌套深度。该值必须大于 <span>0</span> 或者小于等于 <span>2147483647</span>。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">flags</span></dt>     <dd>      <p class="para">       由 <strong><span>JSON_BIGINT_AS_STRING</span></strong>、<strong><span>JSON_INVALID_UTF8_IGNORE</span></strong>、<strong><span>JSON_INVALID_UTF8_SUBSTITUTE</span></strong>、<strong><span>JSON_OBJECT_AS_ARRAY</span></strong>、<strong><span>JSON_THROW_ON_ERROR</span></strong>       组成的掩码。这些常量的行为在 <a href="https://www.php.net/manual/zh/json.constants.php" class="link">JSON constants</a> 页面有进一步描述。      </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.json-decode-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回在 <span class="parameter" style="color:#3A95FF">json</span> 中编码的数据作为合适的 PHP 类型。没有引号的值   <span>true</span>、<span>false</span> 和 <span>null</span>   会相应地返回 <strong><span>true</span></strong>、<strong><span>false</span></strong> 和 <strong><span>null</span></strong>。如果 <span class="parameter" style="color:#3A95FF">json</span>    无法被解码，或者编码数据深度超过了嵌套限制的话，将会返回 <strong><span>null</span></strong>。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.json-decode-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   如果 <span class="parameter" style="color:#3A95FF">depth</span> 超出允许的范围，自 PHP 8.0.0 起将会抛出   <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>，在此之前的版本将会引发   <strong><span>E_WARNING</span></strong> 级别的错误。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.json-decode-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>7.3.0</td>       <td>        <span class="parameter" style="color:#3A95FF">flags</span> 新增 <strong><span>JSON_THROW_ON_ERROR</span></strong>。       </td>      </tr>      <tr>       <td>7.2.0</td>       <td>        现在 <span class="parameter" style="color:#3A95FF">associative</span> 允许为 null。       </td>      </tr>      <tr>       <td>7.2.0</td>       <td>        <span class="parameter" style="color:#3A95FF">flags</span> 新增 <strong><span>JSON_INVALID_UTF8_IGNORE</span></strong>、<strong><span>JSON_INVALID_UTF8_SUBSTITUTE</span></strong>。       </td>      </tr>      <tr>       <td>7.1.0</td>       <td>        An empty JSON key (&quot;&quot;) can be encoded to the empty object property        instead of using a key with value <span>_empty_</span>.       </td>      </tr>     </tbody>       </table>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.json-decode-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">json_decode()</strong></span> 的例子</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$json </span><span style="color: #007700">= </span><span style="color: #DD0000">'{"a":1,"b":2,"c":3,"d":4,"e":5}'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>object(stdClass)#1 (5) {<br>    [&quot;a&quot;] =&gt; int(1)<br>    [&quot;b&quot;] =&gt; int(2)<br>    [&quot;c&quot;] =&gt; int(3)<br>    [&quot;d&quot;] =&gt; int(4)<br>    [&quot;e&quot;] =&gt; int(5)<br>}<br><br>array(5) {<br>    [&quot;a&quot;] =&gt; int(1)<br>    [&quot;b&quot;] =&gt; int(2)<br>    [&quot;c&quot;] =&gt; int(3)<br>    [&quot;d&quot;] =&gt; int(4)<br>    [&quot;e&quot;] =&gt; int(5)<br>}<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #2 Accessing invalid object properties</strong></p>    <div class="example-contents"><p>     Accessing elements within an object that contain characters not     permitted under PHP&#039;s naming convention (e.g. the hyphen) can be     accomplished by encapsulating the element name within braces and the apostrophe.    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />$json </span><span style="color: #007700">= </span><span style="color: #DD0000">'{"foo-bar": 12345}'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$obj </span><span style="color: #007700">= </span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">);<br />print </span><span style="color: #9876AA">$obj</span><span style="color: #007700">-&gt;{</span><span style="color: #DD0000">'foo-bar'</span><span style="color: #007700">}; </span><span style="color: #FF8000">// 12345<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #3 common mistakes using <span class="function"><strong style="color:#CC7832">json_decode()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #FF8000">// the following strings are valid JavaScript but not valid JSON<br /><br />// the name and value must be enclosed in double quotes<br />// single quotes are not valid <br /></span><span style="color: #9876AA">$bad_json </span><span style="color: #007700">= </span><span style="color: #DD0000">"{ 'bar': 'baz' }"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$bad_json</span><span style="color: #007700">); </span><span style="color: #FF8000">// null<br /><br />// the name must be enclosed in double quotes<br /></span><span style="color: #9876AA">$bad_json </span><span style="color: #007700">= </span><span style="color: #DD0000">'{ bar: "baz" }'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$bad_json</span><span style="color: #007700">); </span><span style="color: #FF8000">// null<br /><br />// trailing commas are not allowed<br /></span><span style="color: #9876AA">$bad_json </span><span style="color: #007700">= </span><span style="color: #DD0000">'{ bar: "baz", }'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$bad_json</span><span style="color: #007700">); </span><span style="color: #FF8000">// null<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #4 <span class="parameter" style="color:#3A95FF">depth</span> errors</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Encode some data with a maximum depth  of 4 (array -&gt; array -&gt; array -&gt; string)<br /></span><span style="color: #9876AA">$json </span><span style="color: #007700">= </span><span style="color: #9876AA">json_encode</span><span style="color: #007700">(<br />    array(<br />        </span><span style="color: #9876AA">1 </span><span style="color: #007700">=&gt; array(<br />            </span><span style="color: #DD0000">'English' </span><span style="color: #007700">=&gt; array(<br />                </span><span style="color: #DD0000">'One'</span><span style="color: #007700">,<br />                </span><span style="color: #DD0000">'January'<br />            </span><span style="color: #007700">),<br />            </span><span style="color: #DD0000">'French' </span><span style="color: #007700">=&gt; array(<br />                </span><span style="color: #DD0000">'Une'</span><span style="color: #007700">,<br />                </span><span style="color: #DD0000">'Janvier'<br />            </span><span style="color: #007700">)<br />        )<br />    )<br />);<br /><br /></span><span style="color: #FF8000">// Show the errors for different depths.<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">, </span><span style="color: #9876AA">4</span><span style="color: #007700">));<br />echo </span><span style="color: #DD0000">'Last error: '</span><span style="color: #007700">, </span><span style="color: #9876AA">json_last_error_msg</span><span style="color: #007700">(), </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">));<br />echo </span><span style="color: #DD0000">'Last error: '</span><span style="color: #007700">, </span><span style="color: #9876AA">json_last_error_msg</span><span style="color: #007700">(), </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(1) {<br>  [1]=&gt;<br>  array(2) {<br>    [&quot;English&quot;]=&gt;<br>    array(2) {<br>      [0]=&gt;<br>      string(3) &quot;One&quot;<br>      [1]=&gt;<br>      string(7) &quot;January&quot;<br>    }<br>    [&quot;French&quot;]=&gt;<br>    array(2) {<br>      [0]=&gt;<br>      string(3) &quot;Une&quot;<br>      [1]=&gt;<br>      string(7) &quot;Janvier&quot;<br>    }<br>  }<br>}<br>Last error: No error<br><br>NULL<br>Last error: Maximum stack depth exceeded<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #5 <span class="function"><strong style="color:#CC7832">json_decode()</strong></span> of large integers</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$json </span><span style="color: #007700">= </span><span style="color: #DD0000">'{"number": 12345678901234567890}'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">, </span><span style="color: #9876AA">false</span><span style="color: #007700">, </span><span style="color: #9876AA">512</span><span style="color: #007700">, </span><span style="color: #9876AA">JSON_BIGINT_AS_STRING</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>object(stdClass)#1 (1) {<br>  [&quot;number&quot;]=&gt;<br>  float(1.2345678901235E+19)<br>}<br>object(stdClass)#1 (1) {<br>  [&quot;number&quot;]=&gt;<br>  string(20) &quot;12345678901234567890&quot;<br>}<br></span></div>    </div>   </div>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.json-decode-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    The JSON spec is not JavaScript, but a subset of JavaScript.   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    In the event of a failure to decode, <span class="function">{@link json_last_error()}</span>    can be used to determine the exact nature of the error.   </p>  </p></blockquote> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.json-decode-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link json_encode()} - 对变量进行 JSON 编码</span></li>    <li class="member"><span class="function">{@link json_last_error()} - 返回最后发生的错误</span></li>   </ul>  </span> </div></div>