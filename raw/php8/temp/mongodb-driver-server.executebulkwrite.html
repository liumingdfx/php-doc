<div id="mongodb-driver-server.executebulkwrite" class="refentry"> <div class="refnamediv">  <h1 class="refname">MongoDB\Driver\Server::executeBulkWrite</h1>  <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\Server::executeBulkWrite</span> &mdash; <span class="dc-title">Execute one or more write operations on this server</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-mongodb-driver-server.executebulkwrite-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>MongoDB\Driver\Server::executeBulkWrite</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$namespace</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.mongodb-driver-bulkwrite.php" class="type MongoDB\Driver\BulkWrite" style="color:#EAB766">MongoDB\Driver\BulkWrite</a></span> <span class="parameter" style="color:#3A95FF">$bulk</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeconcern.php" class="type MongoDB\Driver\WriteConcern" style="color:#EAB766">MongoDB\Driver\WriteConcern</a></span>|<span class="type" style="color:#EAB766">null</span></span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = <strong><span>null</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeresult.php" class="type MongoDB\Driver\WriteResult" style="color:#EAB766">MongoDB\Driver\WriteResult</a></span></div>  <p class="para rdfs-comment">   Executes one or more write operations on this server.  </p>  <p class="para">   A <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-bulkwrite.php" class="classname">MongoDB\Driver\BulkWrite</a></span> can be constructed with   one or more write operations of varying types (e.g. updates, deletes, and   inserts). The driver will attempt to send operations of the same type to the   server in as few requests as possible to optimize round trips.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-mongodb-driver-server.executebulkwrite-parameters">  <h3 class="title">参数</h3>  <dl>          <dt><span class="parameter" style="color:#3A95FF">namespace</span> (<span class="type" style="color:#EAB766">string</span>)</dt>    <dd>     <span>      A fully qualified namespace (e.g. <span>&quot;databaseName.collectionName&quot;</span>).     </span>    </dd>             <dt><span class="parameter" style="color:#3A95FF">bulk</span> (<span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-bulkwrite.php" class="classname">MongoDB\Driver\BulkWrite</a></span>)</dt>    <dd>     <p class="para">      The write(s) to execute.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">options</span></dt>    <dd>     <p class="para">      <table class="doctable table">       <caption><strong>options</strong></caption>               <thead>         <tr>          <th>Option</th>          <th>Type</th>          <th>Description</th>         </tr>        </thead>        <tbody class="tbody">                  <tr>          <td>session</td>          <td><span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-session.php" class="classname">MongoDB\Driver\Session</a></span></td>          <td>           <p class="para">            A session to associate with the operation.           </p>          </td>         </tr>                  <tr>          <td>writeConcern</td>          <td><span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeconcern.php" class="classname">MongoDB\Driver\WriteConcern</a></span></td>          <td>           <p class="para">            A write concern to apply to the operation.           </p>          </td>         </tr>        </tbody>             </table>     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-mongodb-driver-server.executebulkwrite-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">Returns <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeresult.php" class="classname">MongoDB\Driver\WriteResult</a></span> on success.</p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-mongodb-driver-server.executebulkwrite-errors">  <h3 class="title">错误／异常</h3>  <ul class="simplelist">   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> if <span class="parameter" style="color:#3A95FF">bulk</span> does not contain any write operations.</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> if <span class="parameter" style="color:#3A95FF">bulk</span> has already been executed. <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-bulkwrite.php" class="classname">MongoDB\Driver\BulkWrite</a></span> objects may not be executed multiple times.</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> if the <span>&quot;session&quot;</span> option is used in combination with an unacknowledged write concern.</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> on argument parsing errors.</li><li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-connectionexception.php" class="classname">MongoDB\Driver\Exception\ConnectionException</a></span> if connection to the server fails (for reasons other than authentication).</li><li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-authenticationexception.php" class="classname">MongoDB\Driver\Exception\AuthenticationException</a></span> if authentication is needed and fails.</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-bulkwriteexception.php" class="classname">MongoDB\Driver\Exception\BulkWriteException</a></span> on any write failure (e.g. write error, failure to apply a write concern)</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-runtimeexception.php" class="classname">MongoDB\Driver\Exception\RuntimeException</a></span> on other errors.</li>  </ul> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-mongodb-driver-server.executebulkwrite-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>PECL mongodb 1.4.4</td>       <td>        <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span>        will be thrown if the <span>&quot;session&quot;</span> option is used in        combination with an unacknowledged write concern.       </td>      </tr>      <tr>       <td>PECL mongodb 1.4.0</td>       <td>        The third parameter is now an <span class="parameter" style="color:#3A95FF">options</span> array.        For backwards compatibility, this paramater will still accept a        <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeconcern.php" class="classname">MongoDB\Driver\WriteConcern</a></span> object.       </td>      </tr>      <tr>       <td>PECL mongodb 1.3.0</td>       <td>        <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span>        is now thrown if <span class="parameter" style="color:#3A95FF">bulk</span> does not contain any write        operations. Previously, a        <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-bulkwriteexception.php" class="classname">MongoDB\Driver\Exception\BulkWriteException</a></span> was        thrown.       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-mongodb-driver-server.executebulkwrite-notes">  <h3 class="title">注释</h3>    <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <span class="simpara">    It is the caller&#039;s responsibility to ensure that the server is capable    of executing the write operation. For example, executing a write operation    on a secondary (excluding its &quot;local&quot; database) will fail.   </span>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-mongodb-driver-server.executebulkwrite-seealso">  <h3 class="title">参见</h3>  <ul class="simplelist">   <li class="member"><span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-bulkwrite.php" class="classname">MongoDB\Driver\BulkWrite</a></span></li>   <li class="member"><span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeresult.php" class="classname">MongoDB\Driver\WriteResult</a></span></li>   <li class="member"><span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeconcern.php" class="classname">MongoDB\Driver\WriteConcern</a></span></li>   <li class="member"><span class="function">{@link MongoDB\Driver\Manager::executeBulkWrite()} - Execute one or more write operations</span></li>  </ul> </div></div>