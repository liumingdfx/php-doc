<div id="function.popen" class="refentry"> <div class="refnamediv">  <h1 class="refname">popen</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">popen</span> &mdash; <span class="dc-title">打开进程文件指针</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.popen-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>popen</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$command</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$mode</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">resource</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   打开一个指向进程的管道，该进程由派生给定的 command 命令执行而产生。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.popen-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">command</span></dt>     <dd>      <p class="para">       命令。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">mode</span></dt>     <dd>      <p class="para">       模式。<span>&#039;r&#039;</span> 表示阅读，<span>&#039;w&#039;</span> 表示写入。      </p>      <p class="para">       在 Windows 上，<span class="function"><strong style="color:#CC7832">popen()</strong></span> 默认是文本模式，即任何从管道中读取/写入的 <span>\n</span>       字符都将转换为 <span>\r\n</span>。如果避免这种情况，可以通过将 <span class="parameter" style="color:#3A95FF">mode</span>       设置为 <span>&#039;rb&#039;</span> 和 <span>&#039;wb&#039;</span> 来强制执行二进制模式。      </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.popen-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回一个和 <span class="function">{@link fopen()}</span>   所返回的相同的文件指针，只不过它是单向的（只能用于读或写）并且必须用   <span class="function">{@link pclose()}</span> 来关闭。此指针可以用于   <span class="function">{@link fgets()}</span>，<span class="function">{@link fgetss()}</span> 和   <span class="function">{@link fwrite()}</span>。   当模式为 &#039;r&#039;，返回的文件指针等于命令的 STDOUT，当模式为 &#039;w&#039;，返回的文件指针等于命令的 STDIN。  </p>  <p class="para">   如果出错返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.popen-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">popen()</strong></span> 例子</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$handle </span><span style="color: #007700">= </span><span style="color: #9876AA">popen</span><span style="color: #007700">(</span><span style="color: #DD0000">"/bin/ls"</span><span style="color: #007700">, </span><span style="color: #DD0000">"r"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span>  <p class="para">   如果未找到要执行的命令，会返回一个合法的资源。这看上去很怪，但有道理。它允许访问   shell 返回的任何错误信息：   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">popen()</strong></span> 例子</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />error_reporting</span><span style="color: #007700">(</span><span style="color: #9876AA">E_ALL</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 加入重定向以得到标准错误输出 stderr。 <br /></span><span style="color: #9876AA">$handle </span><span style="color: #007700">= </span><span style="color: #9876AA">popen</span><span style="color: #007700">(</span><span style="color: #DD0000">'/path/to/executable 2&gt;&amp;1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'r'</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"'</span><span style="color: #9876AA">$handle</span><span style="color: #DD0000">'; " </span><span style="color: #007700">. </span><span style="color: #9876AA">gettype</span><span style="color: #007700">(</span><span style="color: #9876AA">$handle</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$read </span><span style="color: #007700">= </span><span style="color: #9876AA">fread</span><span style="color: #007700">(</span><span style="color: #9876AA">$handle</span><span style="color: #007700">, </span><span style="color: #9876AA">2096</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$read</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">pclose</span><span style="color: #007700">(</span><span style="color: #9876AA">$handle</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.popen-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    如果需要双向支持，使用 <span class="function">{@link proc_open()}</span>。   </p>  </p></blockquote> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.popen-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link pclose()} - 关闭进程文件指针</span></li>    <li class="member"><span class="function">{@link fopen()} - 打开文件或者 URL</span></li>    <li class="member"><span class="function">{@link proc_open()} - 执行一个命令，并且打开用来输入/输出的文件指针。</span></li>   </ul>  </span> </div></div>