<div id="mysql-xdevapi-collection.createindex" class="refentry"> <div class="refnamediv">  <h1 class="refname">Collection::createIndex</h1>  <p class="verinfo">(No version information available, might only be in Git)</p><p class="refpurpose"><span class="refname">Collection::createIndex</span> &mdash; <span class="dc-title">Create collection index</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-mysql-xdevapi-collection.createindex-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>mysql_xdevapi\Collection::createIndex</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$index_name</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$index_desc_json</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div>  <p class="para rdfs-comment">    Creates an index on the collection.  </p>  <p class="para">    An exception is thrown if an index with the same name already exists,    or if index definition is not correctly formed.   </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-mysql-xdevapi-collection.createindex-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">index_name</span></dt>    <dd>     <span>      The name of the index that to create. This name must be a valid index name as       accepted by the <span>CREATE INDEX</span> SQL query.     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">index_desc_json</span></dt>    <dd>     <p class="para">      Definition of the index to create. It contains an array of IndexField objects,      and each object describes a single document member to include in the index,       and an optional string for the type of index that might be INDEX (default) or SPATIAL.     </p>     <p class="para">      A single IndexField description consists of the following fields:     </p>     <ul class="itemizedlist">      <li class="listitem">        <p class="para">          <span>field</span>: string, the full document path to the document member or field to be indexed.        </p>      </li>      <li class="listitem">       <p class="para">        <span>type</span>: string, one of the supported SQL column types to map the field into.        For numeric types, the optional UNSIGNED keyword may follow.        For the TEXT type, the length to consider for indexing may be added.       </p>      </li>      <li class="listitem">        <p class="para">          <span>required</span>: bool, (optional) true if the field is required to exist in the document.           Defaults to <strong><span>false</span></strong>, except for <span>GEOJSON</span> where it defaults to <strong><span>true</span></strong>.         </p>       </li>      <li class="listitem">        <p class="para">          <span>options</span>: integer, (optional) special option flags for use           when decoding <span>GEOJSON</span> data.        </p>      </li>      <li class="listitem">        <p class="para">          <span>srid</span>: integer, (optional) srid value for use when           decoding <span>GEOJSON</span> data.        </p>      </li>      </ul>      <p class="para">        It is an error to include other fields not described above in         IndexDefinition or IndexField documents.      </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-mysql-xdevapi-collection.createindex-returnvalues">  <h3 class="title">返回值</h3>  <p class="para"> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-mysql-xdevapi-collection.createindex-examples">  <h3 class="title">示例</h3>  <div class="example" id="example-4700">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">mysql_xdevapi\Collection::createIndex()</strong></span> example</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$session </span><span style="color: #007700">= </span><span style="color: #9876AA">mysql_xdevapi\getSession</span><span style="color: #007700">(</span><span style="color: #DD0000">"mysqlx://user:password@localhost"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$session</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">sql</span><span style="color: #007700">(</span><span style="color: #DD0000">"DROP DATABASE IF EXISTS addressbook"</span><span style="color: #007700">)-&gt;</span><span style="color: #9876AA">execute</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$session</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">sql</span><span style="color: #007700">(</span><span style="color: #DD0000">"CREATE DATABASE addressbook"</span><span style="color: #007700">)-&gt;</span><span style="color: #9876AA">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">$schema     </span><span style="color: #007700">= </span><span style="color: #9876AA">$session</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getSchema</span><span style="color: #007700">(</span><span style="color: #DD0000">"addressbook"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$collection </span><span style="color: #007700">= </span><span style="color: #9876AA">$schema</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">createCollection</span><span style="color: #007700">(</span><span style="color: #DD0000">"people"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Creating a text index<br /></span><span style="color: #9876AA">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">createIndex</span><span style="color: #007700">(<br />  </span><span style="color: #DD0000">'myindex1'</span><span style="color: #007700">, <br />  </span><span style="color: #DD0000">'{"fields": [{<br />    "field": "$.name", <br />    "type": "TEXT(25)", <br />    "required": true}], <br />    "unique": false}'<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// A spatial index<br /></span><span style="color: #9876AA">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">createIndex</span><span style="color: #007700">(<br />  </span><span style="color: #DD0000">'myindex2'</span><span style="color: #007700">, <br />  </span><span style="color: #DD0000">'{"fields": [{<br />    "field": "$.home", <br />    "type": "GEOJSON", <br />    "required": true}], <br />    "type": "SPATIAL"}'<br /></span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Index with multiple fields<br /></span><span style="color: #9876AA">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">createIndex</span><span style="color: #007700">(<br />  </span><span style="color: #DD0000">'myindex3'</span><span style="color: #007700">, <br />  </span><span style="color: #DD0000">'{"fields": [<br />    {<br />      "field": "$.name",<br />      "type": "TEXT(20)",<br />      "required": true<br />    },<br />    {<br />      "field": "$.age",<br />      "type": "INTEGER"<br />    },<br />    {<br />      "field": "$.job",<br />      "type": "TEXT(30)",<br />      "required": false<br />    }<br />  ],<br />  "unique": true<br />  }'<br /></span><span style="color: #007700">);</span></span></span></div>   </div>  </div> </div></div>