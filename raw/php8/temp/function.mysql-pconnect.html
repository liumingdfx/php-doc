<div id="function.mysql-pconnect" class="refentry"> <div class="refnamediv">  <h1 class="refname">mysql_pconnect</h1>  <p class="verinfo">(PHP 4, PHP 5)</p><p class="refpurpose"><span class="refname">mysql_pconnect</span> &mdash; <span class="dc-title">打开一个到 MySQL 服务器的持久连接</span></p> </div> <div id="function.mysql-pconnect-refsynopsisdiv">  <div class="warning"><strong class="warning">警告</strong>   <p class="para">本扩展自 PHP 5.5.0起已废弃，并在自 PHP 7.0.0 开始被移除。应使用 <a href="https://www.php.net/manual/zh/book.mysqli.php" class="link">MySQLi</a>或 <a href="https://www.php.net/manual/zh/ref.pdo-mysql.php" class="link">PDO_MySQL</a> 扩展来替换之。参见 <a href="https://www.php.net/manual/zh/mysqlinfo.api.choosing.php" class="link">MySQL：选择 API</a> 指南来获取更多信息。用以替代本函数的有：</p>   <ul class="simplelist">    <li class="member"><span class="function">{@link mysqli_connect()}</span> with <span>p:</span> host prefix</li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link PDO::__construct()}</span> with <strong><span>PDO::ATTR_PERSISTENT</span></strong> as a driver option</li>   </ul>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.mysql-pconnect-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>mysql_pconnect</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$server</span><span class="initializer"> = ini_get(&quot;mysql.default_host&quot;)</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$username</span><span class="initializer"> = ini_get(&quot;mysql.default_user&quot;)</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$password</span><span class="initializer"> = ini_get(&quot;mysql.default_password&quot;)</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$client_flags</span><span class="initializer"> = 0</span></span><br>): <span class="type" style="color:#EAB766">resource</span></div>    <p class="para rdfs-comment">   打开一个到 MySQL 服务器的持久连接。  </p>    <p class="para">   <span class="function"><strong style="color:#CC7832">mysql_pconnect()</strong></span> 和   <span class="function">{@link mysql_connect()}</span> 非常相似，但有两个主要区别。  </p>  <p class="para">   首先，当连接的时候本函数将先尝试寻找一个在同一个主机上用同样的用户名和密码已经打开的（持久）连接，如果找到，则返回此连接标识而不打开新连接。  </p>  <p class="para">   其次，当脚本执行完毕后到 SQL 服务器的连接不会被关闭，此连接将保持打开以备以后使用（<span class="function">{@link mysql_close()}</span>   不会关闭由 <span class="function"><strong style="color:#CC7832">mysql_pconnect()</strong></span> 建立的连接）。  </p>  <p class="para">   此种连接称为“持久的”。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.mysql-pconnect-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">server</span></dt>     <dd>      <p class="para">       MySQL 服务器地址，参数也可以包括端口号，例如       “hostname:port“ 或者是本机套接字的的路径，例如 “:/path/to/socket“      </p>      <p class="para">       如果 PHP 配置文件中 <a href="https://www.php.net/manual/zh/mysql.configuration.php#ini.mysql.default-host" class="link">       mysql.default_host</a> 的值未设置（默认情况下），则默认值为 &#039;localhost:3306&#039;      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">username</span></dt>     <dd>      <p class="para">       数据库连接使用的用户名。默认为当前服务器进程的用户。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">password</span></dt>     <dd>      <p class="para">       数据库连接使用的密码。默认为空密码。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">client_flags</span></dt>     <dd>      <p class="para">       参数 <span class="parameter" style="color:#3A95FF">client_flags</span> 可以为以下常量：       128 (enable <span>LOAD DATA LOCAL</span> handling),       <strong><span>MYSQL_CLIENT_SSL</span></strong>,       <strong><span>MYSQL_CLIENT_COMPRESS</span></strong>,       <strong><span>MYSQL_CLIENT_IGNORE_SPACE</span></strong> 或       <strong><span>MYSQL_CLIENT_INTERACTIVE</span></strong>。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.mysql-pconnect-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   如果成功则返回一个正的 MySQL 持久连接标识符，出错则返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.mysql-pconnect-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    需要注意的是，此函数仅当在 PHP 模块化运行时才会生效。更多信息请参阅    <a href="https://www.php.net/manual/zh/features.persistent-connections.php" class="link">持久数据库连接</a> 章节。   </p>  </p></blockquote>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    使用持久连接可能需要对 Apache 和 MySQL 配置进行一些调整，以确保不超过    MySQL 服务器允许的最大连接数。   </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.mysql-pconnect-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link mysql_connect()} - 打开一个到 MySQL 服务器的连接</span></li>    <li class="member"><a href="https://www.php.net/manual/zh/features.persistent-connections.php" class="link">Persistent    Database Connections</a></li>   </ul>  </span> </div></div>