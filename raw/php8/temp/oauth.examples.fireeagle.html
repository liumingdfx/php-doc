<div id="oauth.examples.fireeagle" class="section">  <h2 class="title">FireEagle</h2>  <p class="para">   <div class="example" id="">        <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$req_url </span><span style="color: #007700">= </span><span style="color: #DD0000">'https://fireeagle.yahooapis.com/oauth/request_token'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$authurl </span><span style="color: #007700">= </span><span style="color: #DD0000">'https://fireeagle.yahoo.net/oauth/authorize'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$acc_url </span><span style="color: #007700">= </span><span style="color: #DD0000">'https://fireeagle.yahooapis.com/oauth/access_token'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$api_url </span><span style="color: #007700">= </span><span style="color: #DD0000">'https://fireeagle.yahooapis.com/api/0.1'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$conskey </span><span style="color: #007700">= </span><span style="color: #DD0000">'your_consumer_key'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$conssec </span><span style="color: #007700">= </span><span style="color: #DD0000">'your_consumer_secret'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">session_start</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//  当 state=1 则下次请求应该包含一个 oauth_token 。<br />//  如果没有则返回 0<br /></span><span style="color: #007700">if(!isset(</span><span style="color: #9876AA">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">]==</span><span style="color: #9876AA">1</span><span style="color: #007700">) </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">] = </span><span style="color: #9876AA">0</span><span style="color: #007700">;<br />try {<br />  </span><span style="color: #9876AA">$oauth </span><span style="color: #007700">= new </span><span style="color: #9876AA">OAuth</span><span style="color: #007700">(</span><span style="color: #9876AA">$conskey</span><span style="color: #007700">,</span><span style="color: #9876AA">$conssec</span><span style="color: #007700">,</span><span style="color: #9876AA">OAUTH_SIG_METHOD_HMACSHA1</span><span style="color: #007700">,</span><span style="color: #9876AA">OAUTH_AUTH_TYPE_URI</span><span style="color: #007700">);<br />  </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">enableDebug</span><span style="color: #007700">();<br />  if(!isset(</span><span style="color: #9876AA">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token'</span><span style="color: #007700">]) &amp;&amp; !</span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">]) {<br />    </span><span style="color: #9876AA">$request_token_info </span><span style="color: #007700">= </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getRequestToken</span><span style="color: #007700">(</span><span style="color: #9876AA">$req_url</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">] = </span><span style="color: #9876AA">$request_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token_secret'</span><span style="color: #007700">];<br />    </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">] = </span><span style="color: #9876AA">1</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">header</span><span style="color: #007700">(</span><span style="color: #DD0000">'Location: '</span><span style="color: #007700">.</span><span style="color: #9876AA">$authurl</span><span style="color: #007700">.</span><span style="color: #DD0000">'?oauth_token='</span><span style="color: #007700">.</span><span style="color: #9876AA">$request_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token'</span><span style="color: #007700">]);<br />    exit;<br />  } else if(</span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">]==</span><span style="color: #9876AA">1</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setToken</span><span style="color: #007700">(</span><span style="color: #9876AA">$_GET</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token'</span><span style="color: #007700">],</span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">]);<br />    </span><span style="color: #9876AA">$access_token_info </span><span style="color: #007700">= </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getAccessToken</span><span style="color: #007700">(</span><span style="color: #9876AA">$acc_url</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'state'</span><span style="color: #007700">] = </span><span style="color: #9876AA">2</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'token'</span><span style="color: #007700">] = </span><span style="color: #9876AA">$access_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token'</span><span style="color: #007700">];<br />    </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">] = </span><span style="color: #9876AA">$access_token_info</span><span style="color: #007700">[</span><span style="color: #DD0000">'oauth_token_secret'</span><span style="color: #007700">];<br />  } <br />  </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setToken</span><span style="color: #007700">(</span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'token'</span><span style="color: #007700">],</span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'secret'</span><span style="color: #007700">]);<br />  </span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">fetch</span><span style="color: #007700">(</span><span style="color: #DD0000">"</span><span style="color: #9876AA">$api_url</span><span style="color: #DD0000">/user.json"</span><span style="color: #007700">);<br />  </span><span style="color: #9876AA">$json </span><span style="color: #007700">= </span><span style="color: #9876AA">json_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$oauth</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getLastResponse</span><span style="color: #007700">());<br />  </span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">$json</span><span style="color: #007700">);<br />} catch(</span><span style="color: #9876AA">OAuthException $E</span><span style="color: #007700">) {<br />  </span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">$E</span><span style="color: #007700">);<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div>