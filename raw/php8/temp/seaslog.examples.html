<div id="seaslog.examples" class="chapter"> <h1>示例</h1> <div class="section">  <div class="example" id="">    <p><strong>示例 #1 获取与设置根目录</strong></p>    <div class="example-contents">  <div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />  $basePath1 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">getBasePath</span><span style="color: #007700">();<br /><br />  </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">setBasePath</span><span style="color: #007700">(</span><span style="color: #DD0000">'/log/base_test'</span><span style="color: #007700">);<br />  </span><span style="color: #9876AA">$basePath2 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">getBasePath</span><span style="color: #007700">();<br /><br />  </span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$basePath1</span><span style="color: #007700">,</span><span style="color: #9876AA">$basePath2</span><span style="color: #007700">);<br /><br />  </span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;">  <div class="cdata"><span>  string(12) &quot;/var/log/www&quot;<br>  string(14) &quot;/log/base_test&quot;<br>  </span></div>    </div>  </div> </div><div class="section">  <div class="example" id="">    <p><strong>示例 #2 获取与设置 Logger</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$lastLogger1 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">getLastLogger</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">setLogger</span><span style="color: #007700">(</span><span style="color: #DD0000">'testModule/app1'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$lastLogger2 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">getLastLogger</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$lastLogger1</span><span style="color: #007700">,</span><span style="color: #9876AA">$lastLogger2</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>string(7) &quot;default&quot;<br>string(15) &quot;testModule/app1&quot;<br></span></div>    </div>  </div> </div>  <div class="section">  <div class="example" id="">    <p><strong>示例 #3 快速写入日志</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">log</span><span style="color: #007700">(</span><span style="color: #9876AA">SEASLOG_ERROR</span><span style="color: #007700">,</span><span style="color: #DD0000">'this is a error test by ::log'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">debug</span><span style="color: #007700">(</span><span style="color: #DD0000">'this is a {userName} debug'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{userName}' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'neeke'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">info</span><span style="color: #007700">(</span><span style="color: #DD0000">'this is a info log'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">notice</span><span style="color: #007700">(</span><span style="color: #DD0000">'this is a notice log'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">warning</span><span style="color: #007700">(</span><span style="color: #DD0000">'your {website} was down,please {action} it ASAP!'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{website}' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'github.com'</span><span style="color: #007700">,</span><span style="color: #DD0000">'{action}' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'rboot'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">error</span><span style="color: #007700">(</span><span style="color: #DD0000">'a error log'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">critical</span><span style="color: #007700">(</span><span style="color: #DD0000">'some thing was critical'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">alert</span><span style="color: #007700">(</span><span style="color: #DD0000">'yes this is a {messageName}'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{messageName}' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'alertMSG'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">emergency</span><span style="color: #007700">(</span><span style="color: #DD0000">'Just now, the house next door was completely burnt out! {note}'</span><span style="color: #007700">,array(</span><span style="color: #DD0000">'{note}' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'it`s a joke'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>    日志的默认模板是 <em>seaslog.default_template = &quot;%T | %L | %P | %Q | %t | %M&quot;</em>.    这意味着，在默认情况下，日志的记录格式是： `{dateTime} | {level} | {pid} | {uniqid} | {timeStamp} | {logInfo}`.    </p></div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents"><p>      <em>seaslog.appender = 1</em>    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>2014-07-27 08:53:52 | ERROR | 23625 | 599159975a9ff | 1406422432.786 | this is a error test by log<br>2014-07-27 08:53:52 | DEBUG | 23625 | 599159975a9ff | 1406422432.786 | this is a neeke debug<br>2014-07-27 08:53:52 | INFO | 23625 | 599159975a9ff | 1406422432.787 | this is a info log<br>2014-07-27 08:53:52 | NOTICE | 23625 | 599159975a9ff | 1406422432.787 | this is a notice log<br>2014-07-27 08:53:52 | WARNING | 23625 | 599159975a9ff | 1406422432.787 | your github.com was down,please rboot it ASAP!<br>2014-07-27 08:53:52 | ERROR | 23625 | 599159975a9ff | 1406422432.787 | a error log<br>2014-07-27 08:53:52 | CRITICAL | 23625 | 599159975a9ff | 1406422432.787 | some thing was critical<br>2014-07-27 08:53:52 | EMERGENCY | 23625 | 599159975a9ff | 1406422432.787 | Just now, the house next door was completely burnt out! it is a joke<br></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents"><p>      <em>seaslog.appender = 2</em> or <em>seaslog.appender = 3</em>     </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>The log style finally formatted such as:<br>&lt;15&gt;1 2017-08-27T01:24:59+08:00 vagrant-ubuntu-trusty test/logger[27171]: 2016-06-25 00:59:43 | DEBUG | 21423 | 599157af4e937 | 1466787583.322 | this is a neeke debug<br>&lt;14&gt;1 2017-08-27T01:24:59+08:00 vagrant-ubuntu-trusty test/logger[27171]: 2016-06-25 00:59:43 | INFO | 21423 | 599157af4e937 | 1466787583.323 | this is a info log<br>&lt;13&gt;1 2017-08-27T01:24:59+08:00 vagrant-ubuntu-trusty test/logger[27171]: 2016-06-25 00:59:43 | NOTICE | 21423 | 599157af4e937 | 1466787583.324 | this is a notice log<br></span></div>    </div>  </div> </div> <div class="section">  <div class="example" id="">    <p><strong>示例 #4 快速获取某级别下日志的数量</strong></p>    <div class="example-contents"><p>    <em>SeasLog</em> 通过系统命令管道调用 `grep -wc` 获取数量，并返回给 PHP (返回数组或单个数值).    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$countResult1 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">analyzerCount</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$countResult2 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">analyzerCount</span><span style="color: #007700">(</span><span style="color: #9876AA">SEASLOG_WARNING</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$countResult3 </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">analyzerCount</span><span style="color: #007700">(</span><span style="color: #9876AA">SEASLOG_ERROR</span><span style="color: #007700">,</span><span style="color: #9876AA">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Ymd'</span><span style="color: #007700">,</span><span style="color: #9876AA">time</span><span style="color: #007700">()));<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$countResult1</span><span style="color: #007700">,</span><span style="color: #9876AA">$countResult2</span><span style="color: #007700">,</span><span style="color: #9876AA">$countResult3</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(8) {<br>  [&quot;DEBUG&quot;]=&gt;<br>  int(3)<br>  [&quot;INFO&quot;]=&gt;<br>  int(3)<br>  [&quot;NOTICE&quot;]=&gt;<br>  int(3)<br>  [&quot;WARNING&quot;]=&gt;<br>  int(3)<br>  [&quot;ERROR&quot;]=&gt;<br>  int(6)<br>  [&quot;CRITICAL&quot;]=&gt;<br>  int(3)<br>  [&quot;ALERT&quot;]=&gt;<br>  int(3)<br>  [&quot;EMERGENCY&quot;]=&gt;<br>  int(3)<br>}<br>int(7)<br>int(1)<br></span></div>    </div>  </div> </div> <div class="section">  <div class="example" id="">    <p><strong>示例 #5 获取某级别下日志的详情</strong></p>    <div class="example-contents"><p>    <em>SeasLog</em> 通过系统命令管道调用 `grep -w` 获取日志详情，并返回数组给 PHP.    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$detailErrorArray </span><span style="color: #007700">= </span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">analyzerDetail</span><span style="color: #007700">(</span><span style="color: #9876AA">SEASLOG_ERROR</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$detailErrorArray</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">SeasLog</span><span style="color: #007700">::</span><span style="color: #9876AA">analyzerDetail</span><span style="color: #007700">(</span><span style="color: #9876AA">SEASLOG_ERROR</span><span style="color: #007700">,</span><span style="color: #9876AA">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Ymd'</span><span style="color: #007700">,</span><span style="color: #9876AA">time</span><span style="color: #007700">())));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(6) {<br>  [0] =&gt;<br>  string(83) &quot;2014-02-24 00:14:02 | ERROR | 8568 | 599157af4e937 | 1393172042.717 | test error 3 &quot;<br>  [1] =&gt;<br>  string(83) &quot;2014-02-24 00:14:04 | ERROR | 8594 | 5991576584446 | 1393172044.104 | test error 3 &quot;<br>  [2] =&gt;<br>  string(83) &quot;2014-02-24 00:14:04 | ERROR | 8620 | 1502697015147 | 1393172044.862 | test error 3 &quot;<br>  [3] =&gt;<br>  string(83) &quot;2014-02-24 00:14:05 | ERROR | 8646 | 599159975a9ff | 1393172045.989 | test error 3 &quot;<br>  [4] =&gt;<br>  string(83) &quot;2014-02-24 00:14:07 | ERROR | 8672 | 599159986ec28 | 1393172047.882 | test error 3 &quot;<br>  [5] =&gt;<br>  string(83) &quot;2014-02-24 00:14:08 | ERROR | 8698 | 5991599981cec | 1393172048.736 | test error 3 &quot;<br>}<br><br>array(2) {<br>  [0] =&gt;<br>  string(83) &quot;2014-02-24 00:14:02 | ERROR | 8568 | 599157af4e937 | 1393172042.717 | test error 3 &quot;<br>  [1] =&gt;<br>  string(83) &quot;2014-02-24 00:14:04 | ERROR | 8594 | 5991576584446 | 1393172044.104 | test error 3 &quot;<br>}<br></span></div>    </div>  </div> </div></div>