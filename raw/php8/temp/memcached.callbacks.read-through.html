<div id="memcached.callbacks.read-through" class="section">  <h2 class="title">通读缓存回调</h2>  <p class="para">  通读缓存回调在一个元素没有从服务端检索到的时候被调用。这个回调函数会接收到 Memcached 对象，请求的 key 以及  一个引用方式传递的值变量等三个参数。此回调函数负责通过返回 true 或 false 来决定在 key 没有值时设置一个默认值。  如果回调返回 true，Memcached 会存储&quot;传出参数&quot;(引用传递的值变量)存储的值到 memcached 服务端并将其返回到原来  的调用函数中。仅仅 <span class="methodname" style="color:#CC7832">{@link Memcached::get()}</span> 和 <span class="methodname" style="color:#CC7832">{@link Memcached::getByKey()}</span>  支持这类回调，因为 Memcache 协议不支持在请求多个 key 时提供未检索到 key 的信息。  </p>  <div class="example" id="">   <p><strong>示例 #1 通读回调示例</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$m </span><span style="color: #007700">= new </span><span style="color: #9876AA">Memcached</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$m</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">addServer</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #9876AA">11211</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$profile_info </span><span style="color: #007700">= </span><span style="color: #9876AA">$m</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">get</span><span style="color: #007700">(</span><span style="color: #DD0000">'user:'</span><span style="color: #007700">.</span><span style="color: #9876AA">$user_id</span><span style="color: #007700">, </span><span style="color: #DD0000">'user_info_cb'</span><span style="color: #007700">);<br /><br />function </span><span style="color: #9876AA">user_info_cb</span><span style="color: #007700">(</span><span style="color: #9876AA">$memc</span><span style="color: #007700">, </span><span style="color: #9876AA">$key</span><span style="color: #007700">, &amp;</span><span style="color: #9876AA">$value</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #9876AA">$user_id </span><span style="color: #007700">= </span><span style="color: #9876AA">substr</span><span style="color: #007700">(</span><span style="color: #9876AA">$key</span><span style="color: #007700">, </span><span style="color: #9876AA">5</span><span style="color: #007700">);<br />    </span><span style="color: #FF8000">// 从数据库读取个人信息 <br />    // ... <br />    </span><span style="color: #9876AA">$value </span><span style="color: #007700">= </span><span style="color: #9876AA">$profile_info</span><span style="color: #007700">;<br />    return </span><span style="color: #9876AA">true</span><span style="color: #007700">;<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div> </div>