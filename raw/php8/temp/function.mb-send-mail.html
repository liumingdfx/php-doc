<div id="function.mb-send-mail" class="refentry"> <div class="refnamediv">  <h1 class="refname">mb_send_mail</h1>  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mb_send_mail</span> &mdash; <span class="dc-title">发送编码过的邮件</span></p> </div>    <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.mb-send-mail-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>mb_send_mail</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$to</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$subject</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$message</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">string</span></span> <span class="parameter" style="color:#3A95FF">$additional_headers</span><span class="initializer"> = []</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$additional_params</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">    发送邮件。邮件头和内容根据 <span class="function">{@link mb_language()}</span> 设置来转换编码。   这是 <span class="function">{@link mail()}</span> 的一个包装器函数，所以详情参见 <span class="function">{@link mail()}</span>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.mb-send-mail-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">to</span></dt>     <dd>      <p class="para">       被发送到该邮件地址。可通过逗号分隔地址的 <span class="parameter" style="color:#3A95FF">to</span> 来指定多个收件人。       该参数不会被自动编码。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">subject</span></dt>     <dd>      <p class="para">       邮件标题。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">message</span></dt>     <dd>      <p class="para">       邮件消息。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">additional_headers</span>（可选）</dt>     <dd>      <p class="para">       要插入到电子邮件标头末尾的 <span class="type" style="color:#EAB766">string</span> 或 <span class="type" style="color:#EAB766">array</span>。      </p>      <p class="para">       这通常用于添加额外的标头（发件人、抄送和密件抄送）。多个额外的标头应该用 CRLF（\r\n）分隔。验证参数不会被攻击者注入不需要的标头。      </p>      <p class="para">       如果传递 <span class="type" style="color:#EAB766">array</span>，则其键是标头名称，其值是相应的标头值。      </p>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        发送邮件时，邮件<em>必须</em>包含 <span>From</span> 标头。这可以使用        <span class="parameter" style="color:#3A95FF">additional_headers</span> 参数设置，或者可以在 <var class="filename">php.ini</var> 中设置默认值。       </p>       <p class="para">        如果不这样做，将导致类似于 <span>Warning: mail(): &quot;sendmail_from&quot; not        set in php.ini or custom &quot;From:&quot; header missing</span> 的错误消息。<span>From</span> 标头还设置了 Windows 下的 <span>Return-Path</span>。       </p>      </p></blockquote>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        如果未收到消息，请尝试仅使用 LF（\n）。一些 Unix 邮件传输代理（最著名的是 <a href="http://cr.yp.to/qmail.html" class="link external">&raquo;&nbsp;qmail</a>）自动将 LF 替换为 CRLF（如果使用        CRLF，这会导致两个 CR）。这应该是最后的手段，因为它不符合 <a href="http://www.faqs.org/rfcs/rfc2822" class="link external">&raquo;&nbsp;RFC 2822</a>。       </p>      </p></blockquote>     </dd>             <dt><span class="parameter" style="color:#3A95FF">additional_params</span></dt>     <dd>      <p class="para">       <span class="parameter" style="color:#3A95FF">additional_params</span> 是一个 MTA 命令行参数。在使用       sendmail 时对设置正确的返回路径头很有帮助。      </p>      <p class="para">       该参数由 <span class="function">{@link escapeshellcmd()}</span> 内部转义以防止命令执行。<span class="function">{@link escapeshellcmd()}</span> 阻止命令执行，但允许添加额外的参数。出于安全原因，应该验证此参数。      </p>      <p class="para">       Since <span class="function">{@link escapeshellcmd()}</span> is applied automatically, some characters       that are allowed as email addresses by internet RFCs cannot be used. Programs       that are required to use these characters <span class="function">{@link mail()}</span> cannot be used.      </p>      <p class="para">       Web 服务器运行的用户应作为受信任的用户添加到 sendmail 配置中，以防止在使用此方法设置信封发件人（-f）时将“X-Warning”标头添加到邮件中。对于       sendmail 用户，此文件为 <var class="filename">/etc/mail/trusted-users</var>。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.mb-send-mail-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>， 或者在失败时返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.mb-send-mail-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="parameter" style="color:#3A95FF">additional_params</span> 现在可为 null。      </td>     </tr>      <tr>       <td>7.2.0</td>       <td>        <span class="parameter" style="color:#3A95FF">additional_headers</span> 参数现在也接受 <span class="type" style="color:#EAB766">array</span>。       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.mb-send-mail-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link mail()} - 发送邮件</span></li>    <li class="member"><span class="function">{@link mb_encode_mimeheader()} - 为 MIME 头编码字符串</span></li>    <li class="member"><span class="function">{@link mb_language()} - 设置/获取当前的语言</span></li>   </ul>  </span> </div></div>