<div id="mysqli.quickstart.statements" class="section">  <h2 class="title">Executing statements</h2>  <p class="para">   Statements can be executed with the   <span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span>, <span class="methodname" style="color:#CC7832">{@link mysqli::real_query()}</span>   and <span class="methodname" style="color:#CC7832">{@link mysqli::multi_query()}</span>.   The <span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span> function is the most   common, and combines the executing statement with a   buffered fetch of its result set, if any, in one call.   Calling <span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span> is identical to   calling <span class="methodname" style="color:#CC7832">{@link mysqli::real_query()}</span>   followed by <span class="methodname" style="color:#CC7832">{@link mysqli::store_result()}</span>.  </p>  <p class="para">   <div class="example" id="example-4274">    <p><strong>示例 #1 Executing queries</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"example.com"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DROP TABLE IF EXISTS test"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"CREATE TABLE test(id INT)"</span><span style="color: #007700">);</span></span></span></div>    </div>   </div>  </p>  <p class="para">   <strong>Buffered result sets</strong>  </p>  <p class="para">   After statement execution, results can be either retrieved all at once    or read row by row from the server. Client-side result set buffering   allows the server to free resources associated with the statement&#039;s   results as early as possible. Generally speaking, clients are slow   consuming result sets. Therefore, it is recommended to use buffered   result sets. <span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span> combines statement   execution and result set buffering.  </p>  <p class="para">   PHP applications can navigate freely through buffered results.   Navigation is fast because the result sets are held in client memory.   Please, keep in mind that it is often easier to scale by client than   it is to scale the server.  </p>  <p class="para">   <div class="example" id="example-4277">    <p><strong>示例 #2 Navigation through buffered results</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"example.com"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DROP TABLE IF EXISTS test"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"CREATE TABLE test(id INT)"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO test(id) VALUES (1), (2), (3)"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id FROM test ORDER BY id ASC"</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"Reverse order...\n"</span><span style="color: #007700">;<br />for (</span><span style="color: #9876AA">$row_no </span><span style="color: #007700">= </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">num_rows </span><span style="color: #007700">- </span><span style="color: #9876AA">1</span><span style="color: #007700">; </span><span style="color: #9876AA">$row_no </span><span style="color: #007700">&gt;= </span><span style="color: #9876AA">0</span><span style="color: #007700">; </span><span style="color: #9876AA">$row_no</span><span style="color: #007700">--) {<br />    </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">data_seek</span><span style="color: #007700">(</span><span style="color: #9876AA">$row_no</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$row </span><span style="color: #007700">= </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">fetch_assoc</span><span style="color: #007700">();<br />    echo </span><span style="color: #DD0000">" id = " </span><span style="color: #007700">. </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br />echo </span><span style="color: #DD0000">"Result set order...\n"</span><span style="color: #007700">;<br />foreach (</span><span style="color: #9876AA">$result </span><span style="color: #007700">as </span><span style="color: #9876AA">$row</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">" id = " </span><span style="color: #007700">. </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Reverse order...<br> id = 3<br> id = 2<br> id = 1<br>Result set order...<br> id = 1<br> id = 2<br> id = 3<br></span></div>    </div>   </div>  </p>  <p class="para">   <strong>Unbuffered result sets</strong>  </p>  <p class="para">   If client memory is a short resource and freeing server resources as   early as possible to keep server load low is not needed,   unbuffered results can be used. Scrolling through unbuffered results   is not possible before all rows have been read.  </p>  <p class="para">   <div class="example" id="example-4280">    <p><strong>示例 #3 Navigation through unbuffered results</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">real_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id FROM test ORDER BY id ASC"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">use_result</span><span style="color: #007700">();<br /><br />echo </span><span style="color: #DD0000">"Result set order...\n"</span><span style="color: #007700">;<br />foreach (</span><span style="color: #9876AA">$result </span><span style="color: #007700">as </span><span style="color: #9876AA">$row</span><span style="color: #007700">) {<br />    echo </span><span style="color: #DD0000">" id = " </span><span style="color: #007700">. </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}</span></span></span></div>    </div>   </div>  </p>  <p class="para">   <strong>Result set values data types</strong>  </p>  <p class="para">   The <span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span>, <span class="methodname" style="color:#CC7832">{@link mysqli::real_query()}</span>   and <span class="methodname" style="color:#CC7832">{@link mysqli::multi_query()}</span> functions are used to execute   non-prepared statements. At the level of the MySQL Client Server Protocol,   the command <span>COM_QUERY</span> and the text protocol are used   for statement execution. With the text protocol, the MySQL server converts   all data of a result sets into strings before sending. This conversion is done   regardless of the SQL result set column data type. The mysql client libraries   receive all column values as strings. No further client-side casting is done   to convert columns back to their native types. Instead, all values are   provided as PHP strings.  </p>  <p class="para">   <div class="example" id="example-4283">    <p><strong>示例 #4 Text protocol returns strings by default</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"example.com"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DROP TABLE IF EXISTS test"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"CREATE TABLE test(id INT, label CHAR(1))"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO test(id, label) VALUES (1, 'a')"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id, label FROM test WHERE id = 1"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$row </span><span style="color: #007700">= </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">fetch_assoc</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"id = %s (%s)\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">], </span><span style="color: #9876AA">gettype</span><span style="color: #007700">(</span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]));<br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"label = %s (%s)\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'label'</span><span style="color: #007700">], </span><span style="color: #9876AA">gettype</span><span style="color: #007700">(</span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'label'</span><span style="color: #007700">]));</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>id = 1 (string)<br>label = a (string)<br></span></div>    </div>   </div>  </p>  <p class="para">   It is possible to convert integer and float columns back to PHP numbers by setting the   <strong><span>MYSQLI_OPT_INT_AND_FLOAT_NATIVE</span></strong> connection option,   if using the mysqlnd library. If set, the mysqlnd library will   check the result set meta data column types and convert numeric SQL columns   to PHP numbers, if the PHP data type value range allows for it.   This way, for example, SQL INT columns are returned as integers.  </p>  <p class="para">   <div class="example" id="example-4286">    <p><strong>示例 #5 Native data types with mysqlnd and connection option</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">options</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_OPT_INT_AND_FLOAT_NATIVE</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">real_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"example.com"</span><span style="color: #007700">, </span><span style="color: #DD0000">"user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"database"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"DROP TABLE IF EXISTS test"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"CREATE TABLE test(id INT, label CHAR(1))"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"INSERT INTO test(id, label) VALUES (1, 'a')"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT id, label FROM test WHERE id = 1"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$row </span><span style="color: #007700">= </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">fetch_assoc</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"id = %s (%s)\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">], </span><span style="color: #9876AA">gettype</span><span style="color: #007700">(</span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'id'</span><span style="color: #007700">]));<br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"label = %s (%s)\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'label'</span><span style="color: #007700">], </span><span style="color: #9876AA">gettype</span><span style="color: #007700">(</span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'label'</span><span style="color: #007700">]));</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>id = 1 (integer)<br>label = a (string)<br></span></div>    </div>   </div>  </p>  <p class="para">   <strong>See also</strong>  </p>  <p class="para">   <ul class="simplelist">    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::__construct()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::options()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::real_connect()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::query()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::multi_query()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::use_result()}</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link mysqli::store_result()}</span></li>   </ul>  </p> </div>