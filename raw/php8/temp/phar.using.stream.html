<div id="phar.using.stream" class="section"> <h2 class="title">Using Phar Archives: the phar stream wrapper</h2> <p class="para">  The Phar stream wrapper fully supports <span class="function">{@link fopen()}</span> for  read and write (not append), <span class="function">{@link unlink()}</span>, <span class="function">{@link stat()}</span>,  <span class="function">{@link fstat()}</span>, <span class="function">{@link fseek()}</span>, <span class="function">{@link rename()}</span>  and directory stream operations <span class="function">{@link opendir()}</span> and <span class="function">{@link rmdir()}</span>  and <span class="function">{@link mkdir()}</span>. </p> <p class="para">  Individual file compression and per-file metadata can also be manipulated  in a Phar archive using stream contexts: </p> <p class="para">  <div class="informalexample">   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$context </span><span style="color: #007700">= </span><span style="color: #9876AA">stream_context_create</span><span style="color: #007700">(array(</span><span style="color: #DD0000">'phar' </span><span style="color: #007700">=&gt;<br />                                    array(</span><span style="color: #DD0000">'compress' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">Phar</span><span style="color: #007700">::</span><span style="color: #9876AA">GZ</span><span style="color: #007700">)),<br />                                    array(</span><span style="color: #DD0000">'metadata' </span><span style="color: #007700">=&gt; array(</span><span style="color: #DD0000">'user' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'cellog'</span><span style="color: #007700">)));<br /></span><span style="color: #9876AA">file_put_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'phar://my.phar/somefile.php'</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">, </span><span style="color: #9876AA">$context</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div> </p> <p class="para">  The <span>phar</span> stream wrapper does not operate on remote files,  and cannot operate on remote files, and so is allowed even when the  <a href="https://www.php.net/manual/zh/filesystem.configuration.php#ini.allow-url-fopen" class="link">allow_url_fopen</a> and  <a href="https://www.php.net/manual/zh/filesystem.configuration.php#ini.allow-url-include" class="link">allow_url_include</a> INI options  are disabled. </p> <p class="para">  Although it is possible to create phar archives from scratch just using  stream operations, it is best to use the functionality built into  the Phar class.  The stream wrapper is best used for read-only operations. </p></div>