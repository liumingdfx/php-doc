<div id="function.rnp-ffi-set-pass-provider" class="refentry"> <div class="refnamediv">  <h1 class="refname">rnp_ffi_set_pass_provider</h1>  <p class="verinfo">(PECL rnp &gt;= 0.1.1)</p><p class="refpurpose"><span class="refname">rnp_ffi_set_pass_provider</span> &mdash; <span class="dc-title">Set password provider callback function</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.rnp-ffi-set-pass-provider-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>rnp_ffi_set_pass_provider</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.rnpffi.php" class="type RnpFFI" style="color:#EAB766">RnpFFI</a></span> <span class="parameter" style="color:#3A95FF">$ffi</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$password_callback</span></span>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   Sets password provider function. This function can ask for the password on a standard input   (if PHP script is executed in a command line environment), display GUI dialog or provide   password in any other possible ways. Requested passwords are used to encrypt or decrypt   secret keys or perform symmetric encryption/decryption operations.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.rnp-ffi-set-pass-provider-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">ffi</span></dt>    <dd>     <span>      The FFI object returned by rnp_ffi_create.     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">password_callback</span></dt>    <dd>     <p class="para">      The function that is to be called for every password request.  It has the following signature:      <div class="methodsynopsis dc-description">       <span class="methodname" style="color:#CC7832"><span class="replaceable">password_callback</span></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$key_fp</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$pgp_context</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">&$password</span></span>): <span class="type" style="color:#EAB766">bool</span></div>      <ul class="simplelist">       <li class="member"><span>$key_fp</span> - The key fingerprint, if any. Can be empty.</li>       <li class="member"><span>$pgp_context</span> - String describing why the key is being requested.</li>       <li class="member"><span>$password</span> - Password string reference where provided password should be stored to.</li>      </ul>      Callback function should return <strong><span>true</span></strong> if password was successfully set 或者在失败时返回 <strong><span>false</span></strong>.     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.rnp-ffi-set-pass-provider-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Returns <strong><span>true</span></strong> on success 或者在失败时返回 <strong><span>false</span></strong>.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.rnp-ffi-set-pass-provider-examples">  <h3 class="title">示例</h3>  <span>      <div class="example" id="example-2924">       <p><strong>示例 #1 simple callback function example</strong></p>       <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #9876AA">password_callback</span><span style="color: #007700">(</span><span style="color: #9876AA">string $key_fp</span><span style="color: #007700">, </span><span style="color: #9876AA">string $pgp_context</span><span style="color: #007700">, </span><span style="color: #9876AA">string </span><span style="color: #007700">&amp;</span><span style="color: #9876AA">$password</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #9876AA">$password </span><span style="color: #007700">= </span><span style="color: #DD0000">"password"</span><span style="color: #007700">;<br /><br />    return </span><span style="color: #9876AA">true</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #9876AA">$ffi </span><span style="color: #007700">= </span><span style="color: #9876AA">rnp_ffi_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'GPG'</span><span style="color: #007700">, </span><span style="color: #DD0000">'GPG'</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">rnp_ffi_set_pass_provider</span><span style="color: #007700">(</span><span style="color: #9876AA">$ffi</span><span style="color: #007700">, </span><span style="color: #DD0000">'password_callback'</span><span style="color: #007700">);</span></span></span></div>       </div>      </div>  </span> </div></div>