<div id="function.zookeeper-dispatch" class="refentry"> <div class="refnamediv">  <h1 class="refname">zookeeper_dispatch</h1>  <p class="verinfo">(PECL zookeeper &gt;= 0.4.0)</p><p class="refpurpose"><span class="refname">zookeeper_dispatch</span> &mdash; <span class="dc-title">Calls callbacks for pending operations</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.zookeeper-dispatch-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>zookeeper_dispatch</strong></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div>  <p class="para rdfs-comment">   The <span class="function"><strong style="color:#CC7832">zookeeper_dispatch()</strong></span> function calls the callbacks passed by operations like <span class="methodname" style="color:#CC7832">{@link Zookeeper::get()}</span> or <span class="methodname" style="color:#CC7832">{@link Zookeeper::exists()}</span>.  </p>  <div class="caution"><strong class="caution">警告</strong>   <p class="para">    Since version 0.4.0, this function must be called manually to achieve asynchronous operations. If you want that to be done automatically, you also can declare ticks at the beginning of your program.   </p>  </div>  <p class="para">   After PHP 7.1, you can ignore this function. This extension uses EG(vm_interrupt) to implement async dispatch.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.zookeeper-dispatch-parameters">  <h3 class="title">参数</h3>  <span>此函数没有参数。</span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.zookeeper-dispatch-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   没有返回值。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.zookeeper-dispatch-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   This method emits PHP warning when callback could not be invoked.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.zookeeper-dispatch-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="methodname" style="color:#CC7832"><strong>zookeeper_dispatch()</strong></span> example #1</strong></p>   <div class="example-contents"><p>     Dispatch callbacks manually.   </p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$client </span><span style="color: #007700">= new </span><span style="color: #9876AA">Zookeeper</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$client</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost:2181'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$client</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">get</span><span style="color: #007700">(</span><span style="color: #DD0000">'/zookeeper'</span><span style="color: #007700">, function() {<br />    echo </span><span style="color: #DD0000">"Callback was called"</span><span style="color: #007700">.</span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br />});<br />while(</span><span style="color: #9876AA">true</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">sleep</span><span style="color: #007700">(</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">zookeeper_dispatch</span><span style="color: #007700">();<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #2 <span class="methodname" style="color:#CC7832"><strong>zookeeper_dispatch()</strong></span> example #2</strong></p>   <div class="example-contents"><p>     Declare ticks.   </p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">declare(</span><span style="color: #9876AA">ticks</span><span style="color: #007700">=</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$client </span><span style="color: #007700">= new </span><span style="color: #9876AA">Zookeeper</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$client</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost:2181'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$client</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">get</span><span style="color: #007700">(</span><span style="color: #DD0000">'/zookeeper'</span><span style="color: #007700">, function() {<br />    echo </span><span style="color: #DD0000">"Callback was called"</span><span style="color: #007700">.</span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br />});<br />while(</span><span style="color: #9876AA">true</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">sleep</span><span style="color: #007700">(</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br />}<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.zookeeper-dispatch-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::addAuth()} - Specify application credentials</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::connect()} - Create a handle to used communicate with zookeeper</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::__construct()} - Create a handle to used communicate with zookeeper</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::exists()} - Checks the existence of a node in zookeeper synchronously</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::get()} - Gets the data associated with a node synchronously</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::getChildren()} - Lists the children of a node synchronously</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::setWatcher()} - Set a watcher function</span></li>   </ul>  </span> </div></div>