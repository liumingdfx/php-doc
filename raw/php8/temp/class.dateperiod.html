<div id="class.dateperiod" class="reference"> <h1 class="title">DatePeriod 类</h1>  <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p>  <div class="section" id="dateperiod.intro">   <h2 class="title">简介</h2>   <p class="para">    DatePeriod 类表示一个时间周期。   </p>   <p class="para">    时间周期内允许对一组日期和时间进行迭代，在指定的时间间隔内定期重复。   </p>  </div>  <div class="section" id="dateperiod.synopsis">   <h2 class="title">类摘要</h2>   <div class="classsynopsis"><div class="classsynopsisinfo">         <span class="modifier">class</span> <strong class="classname"><strong class="classname">DatePeriod</strong></strong>             <span class="modifier">implements</span>      <a href="https://www.php.net/manual/zh/class.iteratoraggregate.php" class="interfacename">IteratorAggregate</a> {</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 常量 </div>    <div class="fieldsynopsis">     <span class="modifier">public</span>     <span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.constants.exclude-start-date"><var class="varname">EXCLUDE_START_DATE</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.constants.include-end-date"><var class="varname">INCLUDE_END_DATE</var></a></var>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 属性 </div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span><span class="type" style="color:#EAB766"></span></span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.start">$<var class="varname">start</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span><span class="type" style="color:#EAB766"></span></span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.current">$<var class="varname">current</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span><span class="type" style="color:#EAB766"></span></span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.end">$<var class="varname">end</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span><span class="type" style="color:#EAB766"></span></span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.interval">$<var class="varname">interval</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">int</span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.recurrences">$<var class="varname">recurrences</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">bool</span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.include-start-date">$<var class="varname">include_start_date</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">bool</span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.dateperiod.php#dateperiod.props.include-end-date">$<var class="varname">include_end_date</var></a></var>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 方法 </div>    <div class="constructorsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.construct.php" class="methodname" style="color:#CC7832">__construct</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$start</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span> <span class="parameter" style="color:#3A95FF">$interval</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$recurrences</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = 0</span></span><br>)</div><div class="constructorsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.construct.php" class="methodname" style="color:#CC7832">__construct</a></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$start</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span> <span class="parameter" style="color:#3A95FF">$interval</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$end</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = 0</span></span><br>)</div><div class="constructorsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.construct.php" class="methodname" style="color:#CC7832">__construct</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$isostr</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = 0</span></span>)</div>    <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.createfromiso8601string.php" class="methodname" style="color:#CC7832">createFromISO8601String</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$specification</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = 0</span></span>): <span class="type" style="color:#EAB766"><span class="type static" style="color:#EAB766">static</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.getdateinterval.php" class="methodname" style="color:#CC7832">getDateInterval</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.getenddate.php" class="methodname" style="color:#CC7832">getEndDate</a></span>(): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.getrecurrences.php" class="methodname" style="color:#CC7832">getRecurrences</a></span>(): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766">int</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/dateperiod.getstartdate.php" class="methodname" style="color:#CC7832">getStartDate</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span></div>   }</div>  </div>    <div class="section" id="dateperiod.constants">   <h2 class="title">预定义常量</h2>   <dl>         <dt id="dateperiod.constants.exclude-start-date"><strong><span>DatePeriod::EXCLUDE_START_DATE</span></strong></dt>     <dd>      <p class="para">在 <span class="function">{@link DatePeriod::__construct()}</span> 构造函数中使用，排除开始时间。</p>     </dd>             <dt id="dateperiod.constants.include-end-date"><strong><span>DatePeriod::INCLUDE_END_DATE</span></strong></dt>     <dd>      <p class="para">在 <span class="function">{@link DatePeriod::__construct()}</span> 构造函数中使用，包含结束时间。</p>     </dd>       </dl>  </div>  <div class="section" id="dateperiod.props">   <h2 class="title">属性</h2>   <dl>         <dt id="dateperiod.props.recurrences"><var class="varname">recurrences</var></dt>     <dd>      <p class="para">       迭代器返回的最小实例数。      </p>      <p class="para">       如果在 <span class="classname"><strong class="classname">DatePeriod</strong></span> 实例的构造函数中显式通过 <var class="varname">recurrences</var>       参数传递重复次数，然后此属性将包含该值，如果开始时间没有通过 <strong><span>DatePeriod::EXCLUDE_START_DATE</span></strong>       禁用，则该属性<em>加</em> 1，如果结束时间已经通过 <strong><span>DatePeriod::INCLUDE_END_DATE</span></strong>       启用，则该属性<em>加</em> 1。      </p>      <p class="para">       如果没有显式传递重复次数，则此属性包含返回实例的最小数量。这将是        <span>0</span>，如果开始时间没有通过 <strong><span>DatePeriod::EXCLUDE_START_DATE</span></strong>       禁用，则该属性<em>加</em> 1，如果结束时间已经通过 <strong><span>DatePeriod::INCLUDE_END_DATE</span></strong>       启用，则该属性<em>加</em> 1。      </p>      <p class="para">       <div class="example" id="">        <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$start </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2018-12-31 00:00:00'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$end   </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2021-12-31 00:00:00'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$interval </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateInterval</span><span style="color: #007700">(</span><span style="color: #DD0000">'P1M'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$recurrences </span><span style="color: #007700">= </span><span style="color: #9876AA">5</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 通过构造函数显式设置重复次数<br /></span><span style="color: #9876AA">$period </span><span style="color: #007700">= new </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">(</span><span style="color: #9876AA">$start</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">, </span><span style="color: #9876AA">$recurrences</span><span style="color: #007700">, </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">::</span><span style="color: #9876AA">EXCLUDE_START_DATE</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$period</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">recurrences</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$period </span><span style="color: #007700">= new </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">(</span><span style="color: #9876AA">$start</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">, </span><span style="color: #9876AA">$recurrences</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$period</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">recurrences</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$period </span><span style="color: #007700">= new </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">(</span><span style="color: #9876AA">$start</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">, </span><span style="color: #9876AA">$recurrences</span><span style="color: #007700">, </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">::</span><span style="color: #9876AA">INCLUDE_END_DATE</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$period</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">recurrences</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 构造函数中没有设置重复次数<br /></span><span style="color: #9876AA">$period </span><span style="color: #007700">= new </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">(</span><span style="color: #9876AA">$start</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">, </span><span style="color: #9876AA">$end</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$period</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">recurrences</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$period </span><span style="color: #007700">= new </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">(</span><span style="color: #9876AA">$start</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">, </span><span style="color: #9876AA">$end</span><span style="color: #007700">, </span><span style="color: #9876AA">DatePeriod</span><span style="color: #007700">::</span><span style="color: #9876AA">EXCLUDE_START_DATE</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$period</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">recurrences</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>         </div>         <div class="example-contents"><p>以上示例会输出：</p></div>         <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><br />5<br />6<br />7<br />1<br />0<br />         </div>        </div>       </p>      <p class="para">       参见：<span class="methodname" style="color:#CC7832">{@link DatePeriod::getRecurrences()}</span>。      </p>     </dd>             <dt id="dateperiod.props.include-end-date"><var class="varname">include_end_date</var></dt>     <dd>      <p class="para">       在循环过程中，是否包含结束时间。      </p>     </dd>             <dt id="dateperiod.props.include-start-date"><var class="varname">include_start_date</var></dt>     <dd>      <p class="para">       在循环过程中，是否包含开始时间。      </p>     </dd>             <dt id="dateperiod.props.start"><var class="varname">start</var></dt>     <dd>      <p class="para">        时间周期的开始时间。      </p>     </dd>             <dt id="dateperiod.props.current"><var class="varname">current</var></dt>     <dd>      <p class="para">       表示在时间周期内迭代的时候，当前的时间。      </p>     </dd>             <dt id="dateperiod.props.end"><var class="varname">end</var></dt>     <dd>      <p class="para">       时间周期的结束时间。      </p>     </dd>             <dt id="dateperiod.props.interval"><var class="varname">interval</var></dt>     <dd>      <p class="para">       ISO 8601 格式的间隔。      </p>     </dd>       </dl>  </div>  <div class="section">   <h2 class="title">更新日志</h2>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.2.0</td>       <td>        新增 <strong><span>DatePeriod::INCLUDE_END_DATE</span></strong> 常量和        <span class="property">include_end_date</span> 属性。       </td>      </tr>      <tr>       <td>8.0.0</td>       <td>        现在 <span class="classname"><strong class="classname">DatePeriod</strong></span> 实现了（implement）        <span class="interfacename"><a href="https://www.php.net/manual/zh/class.iteratoraggregate.php" class="interfacename">IteratorAggregate</a></span>。之前实现的是        <span class="interfacename"><a href="https://www.php.net/manual/zh/class.traversable.php" class="interfacename">Traversable</a></span>。       </td>      </tr>     </tbody>       </table>  </div> </div> <h2>目录</h2><ul class="chunklist chunklist_reference"><li>{@link DatePeriod::__construct} — Creates a new DatePeriod object</li><li>{@link DatePeriod::createFromISO8601String} — Creates a new DatePeriod object from an ISO8601 string</li><li>{@link DatePeriod::getDateInterval} — Gets the interval</li><li>{@link DatePeriod::getEndDate} — Gets the end date</li><li>{@link DatePeriod::getRecurrences} — Gets the number of recurrences</li><li>{@link DatePeriod::getStartDate} — Gets the start date</li></ul></div>