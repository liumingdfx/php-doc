<div id="function.curl-getinfo" class="refentry"> <div class="refnamediv">  <h1 class="refname">curl_getinfo</h1>  <p class="verinfo">(PHP 4 &gt;= 4.0.4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">curl_getinfo</span> &mdash; <span class="dc-title">获取一个cURL连接资源句柄的信息</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.curl-getinfo-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>curl_getinfo</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.curlhandle.php" class="type CurlHandle" style="color:#EAB766">CurlHandle</a></span> <span class="parameter" style="color:#3A95FF">$handle</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$option</span><span class="initializer"> = <strong><span>null</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div>  <p class="para rdfs-comment">   获取最后一次传输的相关信息。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.curl-getinfo-parameters">  <h3 class="title">参数</h3>  <span>   <dl>    <dt><span class="parameter" style="color:#3A95FF">handle</span></dt><dd><p class="para">由 <span class="function">{@link curl_init()}</span> 返回的 cURL 句柄。</p></dd>         <dt><span class="parameter" style="color:#3A95FF">option</span></dt>     <dd>      <p class="para">       这个参数可能是以下常量之一:       <ul class="itemizedlist">        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_EFFECTIVE_URL</span></strong>——最后一个有效的 URL         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HTTP_CODE</span></strong>——最后的响应代码。从 cURL 7.10.8 开始，这是 <strong><span>CURLINFO_RESPONSE_CODE</span></strong> 的旧别名         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_FILETIME</span></strong>——启用了 <strong><span>CURLOPT_FILETIME</span></strong> 后检索文档的远程时间；如果返回 -1，则文档的时间未知         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_TOTAL_TIME</span></strong>——最后一次传输的总事务时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_NAMELOOKUP_TIME</span></strong>——到名称解析完成所需的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONNECT_TIME</span></strong>——建立连接所需的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PRETRANSFER_TIME</span></strong>——从开始到文件准备传输所需的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_STARTTRANSFER_TIME</span></strong>——从开始到传输第一个字节所需的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_REDIRECT_COUNT</span></strong>——启用 <strong><span>CURLOPT_FOLLOWLOCATION</span></strong> 选项的重定向次数         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_REDIRECT_TIME</span></strong>——在启用 <strong><span>CURLOPT_FOLLOWLOCATION</span></strong> 选项的情况下，最终事务开始之前所有重定向步骤的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_REDIRECT_URL</span></strong>——禁用 <strong><span>CURLOPT_FOLLOWLOCATION</span></strong> 选项：重定向 URL 在上次事务中找到，接下来应该手动请求。在启用 <strong><span>CURLOPT_FOLLOWLOCATION</span></strong> 选项的情况下，此返回值为空。在这种情况下，重定向的 URL 可以在 <strong><span>CURLINFO_EFFECTIVE_URL</span></strong> 中获取         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PRIMARY_IP</span></strong>——最近连接的 IP 地址         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PRIMARY_PORT</span></strong>——最近一次连接的目标端口         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_LOCAL_IP</span></strong>——最近连接的本地（源）IP 地址         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_LOCAL_PORT</span></strong>——最近连接的本地（源）端口         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SIZE_UPLOAD</span></strong>——以字节为单位返回上传数据量的总值         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SIZE_DOWNLOAD</span></strong>——以字节为单位返回下载数据量的总值         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SPEED_DOWNLOAD</span></strong>——平均下载速度         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SPEED_UPLOAD</span></strong>——平均上传速度         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HEADER_SIZE</span></strong>——检索到的所有 header 大小         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HEADER_OUT</span></strong>——发送请求的字符串。为此，通过调用 <span class="function">{@link curl_setopt()}</span> 将 <strong><span>CURLINFO_HEADER_OUT</span></strong> 选项添加到句柄         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_REFERER</span></strong> - The referrer header         </span>        </li>        <li class="listitem">         <span class="simpara">        <strong><span>CURLINFO_REQUEST_SIZE</span></strong>——已发出请求的总大小，当前仅针对 HTTP 请求         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RETRY_AFTER</span></strong> - The information from the <span>Retry-After:</span> header, or zero if there was no valid header.         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SSL_VERIFYRESULT</span></strong>——通过设置 <strong><span>CURLOPT_SSL_VERIFYPEER</span></strong> 请求的 SSL 认证验证结果         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONTENT_LENGTH_DOWNLOAD</span></strong>——从 <span>Content-Length:</span> 字段中读取的下载内容长度         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONTENT_LENGTH_UPLOAD</span></strong>——上传指定大小         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONTENT_TYPE</span></strong>——<span>Content-Type:</span>所请求文档的类型。NULL 表示服务器没有发送有效的 <span>Content-Type:</span> header         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PRIVATE</span></strong>——与此 cURL 句柄关联的私有数据，之前使用 <span class="function">{@link curl_setopt()}</span> 的 <strong><span>CURLOPT_PRIVATE</span></strong> 选项设置         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PROXY_ERROR</span></strong> - The detailed (SOCKS) proxy error code when the most recent          transfer returned a <strong><span>CURLE_PROXY</span></strong> error. The returned value will be exactly one          of the <strong><span>CURLPX_<span class="replaceable">*</span></span></strong> values.          The error code will be <strong><span>CURLPX_OK</span></strong> if no          response code was available.         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RESPONSE_CODE</span></strong>——最后的响应代码         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HTTP_CONNECTCODE</span></strong>——CONNECT 响应代码         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HTTPAUTH_AVAIL</span></strong>——位掩码表示先前响应可用的身份验证方法         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PROXYAUTH_AVAIL</span></strong>——位掩码表示先前响应可用的代理身份验证方法         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_OS_ERRNO</span></strong>——来自连接失败的 Errno。该数字特定于 OS 和指定系统。         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_NUM_CONNECTS</span></strong> - curl 为实现先前的传输所必须创建的连接数         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SSL_ENGINES</span></strong>——支持 OpenSSL 加密引擎         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_COOKIELIST</span></strong>——所有已知的 cookie         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_FTP_ENTRY_PATH</span></strong>——FTP 服务器中的入口路径         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_APPCONNECT_TIME</span></strong>——从开始到SSL/SSH 完成与远程主机的连接/握手所花费的时间（以秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CERTINFO</span></strong>——TLS 证书链         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONDITION_UNMET</span></strong>——未满足时间条件的信息         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RTSP_CLIENT_CSEQ</span></strong>——下一个 RTSP 客户端 CSeq         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RTSP_CSEQ_RECV</span></strong>——最近检索到的 CSeq         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RTSP_SERVER_CSEQ</span></strong>——下一个 RTSP 服务器端 CSeq         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_RTSP_SESSION_ID</span></strong>——RTSP 会话 ID         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONTENT_LENGTH_DOWNLOAD_T</span></strong>——下载的内容长度。此值从 <span>Content-Length:</span> 字段读取。如果大小未知则为 -1         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONTENT_LENGTH_UPLOAD_T</span></strong>——上传的指定大小。如果未知则为 -1         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_HTTP_VERSION</span></strong> - 返回最后一次 HTTP 连接中使用的版本。返回值将是定义的 <strong><span>CURL_HTTP_VERSION_*</span></strong> 常量之一，如果无法确定版本，则返回 0。         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PROTOCOL</span></strong> - 在最后一个 HTTP 连接中使用的协议。返回值将会是 <strong><span>CURLPROTO_*</span></strong> 中的一个值         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PROXY_SSL_VERIFYRESULT</span></strong> - 请求的证书验证结果（使用 <strong><span>CURLOPT_PROXY_SSL_VERIFYPEER</span></strong> 选项）。仅用于 HTTPS 代理         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SCHEME</span></strong> - 最近连接使用的 URL 协议         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SIZE_DOWNLOAD_T</span></strong> - 已下载的总字节数。此数值仅针对最新的传输，并且在每次新的传输时都将会重置         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SIZE_UPLOAD_T</span></strong>——上传的总字节数         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SPEED_DOWNLOAD_T</span></strong> - curl 测量的完整下载速度的平均值，以字节/秒为单位         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_SPEED_UPLOAD_T</span></strong> - curl 测量的完整上传速度的平均值，以字节/秒为单位         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_APPCONNECT_TIME_T</span></strong> - 从开始到与远程主机 SSL/SSH 连接/握手完成所经过的时间，以微秒为单位         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_CONNECT_TIME_T</span></strong> - 从开始到与远程主机（或代理）建立连接完成所经过的总时间，以微秒为单位         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_FILETIME_T</span></strong> - 检索的文档的远程时间（Unix 时间戳），是 <strong><span>CURLINFO_FILETIME</span></strong> 的替代值，允许具有 32 bit 变量的系统提取超出 32 bit 时间戳范围之外的日期         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_NAMELOOKUP_TIME_T</span></strong>——从开始到名称解析完成的时间（以微秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_PRETRANSFER_TIME_T</span></strong> - 从开始到文件传输即将开始的时间，以微秒为单位         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_REDIRECT_TIME_T</span></strong> - 在最终事务开始之前，所有重定向步骤（包括名称查找、连接、预传输和传输）所花费的总时间，以微秒为单位。         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_STARTTRANSFER_TIME_T</span></strong>——从开始到接收到第一个字节所花费的时间（以微秒为单位）         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>CURLINFO_TOTAL_TIME_T</span></strong>——上次传输的总时间（以微秒为单位），包括名称解析、TCP 连接等。         </span>        </li>       </ul>      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.curl-getinfo-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   如果指定 <span class="parameter" style="color:#3A95FF">option</span>，将返回它的值。否则将返回包含下列元素的关联数组（分别对应 <span class="parameter" style="color:#3A95FF">option</span>），失败时为  <strong><span>false</span></strong>：   <ul class="itemizedlist">    <li class="listitem">     <span class="simpara">      &quot;url&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;content_type&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;http_code&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;header_size&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;request_size&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;filetime&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;ssl_verify_result&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;redirect_count&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;total_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;namelookup_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;connect_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;pretransfer_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;size_upload&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;size_download&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;speed_download&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;speed_upload&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;download_content_length&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;upload_content_length&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;starttransfer_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;redirect_time&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;certinfo&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;primary_ip&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;primary_port&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;local_ip&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;local_port&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;redirect_url&quot;     </span>    </li>    <li class="listitem">     <span class="simpara">      &quot;request_header&quot;（只有在之前调用 <span class="function">{@link curl_setopt()}</span> 设置 <strong><span>CURLINFO_HEADER_OUT</span></strong> 后才会设置）     </span>    </li>   </ul>   注意，私有数据不包含在关联数组中，必须使用 <strong><span>CURLINFO_PRIVATE</span></strong> 选项单独检索。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.curl-getinfo-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.2.0</td>       <td>        引入 <strong><span>CURLINFO_PROXY_ERROR</span></strong>、<strong><span>CURLINFO_REFERER</span></strong>、<strong><span>CURLINFO_RETRY_AFTER</span></strong>。       </td>      </tr>      <tr> <td>8.0.0</td> <td>  <span class="parameter" style="color:#3A95FF">handle</span> 现在接受 <span class="classname"><a href="https://www.php.net/manual/zh/class.curlhandle.php" class="classname">CurlHandle</a></span>  实例；之前接受 <span class="type" style="color:#EAB766">resource</span>。 </td></tr>      <tr>       <td>8.0.0</td>       <td>        <span class="parameter" style="color:#3A95FF">option</span> 现在可为 null；之前默认值是 <span>0</span>。       </td>      </tr>      <tr>       <td>7.3.0</td>       <td>        引入 <strong><span>CURLINFO_CONTENT_LENGTH_DOWNLOAD_T</span></strong>、        <strong><span>CURLINFO_CONTENT_LENGTH_UPLOAD_T</span></strong>、         <strong><span>CURLINFO_HTTP_VERSION</span></strong>、        <strong><span>CURLINFO_PROTOCOL</span></strong>、        <strong><span>CURLINFO_PROXY_SSL_VERIFYRESULT</span></strong>、        <strong><span>CURLINFO_SCHEME</span></strong>、        <strong><span>CURLINFO_SIZE_DOWNLOAD_T</span></strong>、        <strong><span>CURLINFO_SIZE_UPLOAD_T</span></strong>、        <strong><span>CURLINFO_SPEED_DOWNLOAD_T</span></strong>、        <strong><span>CURLINFO_SPEED_UPLOAD_T</span></strong>、        <strong><span>CURLINFO_APPCONNECT_TIME_T</span></strong>、        <strong><span>CURLINFO_CONNECT_TIME_T</span></strong>、        <strong><span>CURLINFO_FILETIME_T</span></strong>、        <strong><span>CURLINFO_NAMELOOKUP_TIME_T</span></strong>、        <strong><span>CURLINFO_PRETRANSFER_TIME_T</span></strong>、        <strong><span>CURLINFO_REDIRECT_TIME_T</span></strong>、        <strong><span>CURLINFO_STARTTRANSFER_TIME_T</span></strong>、        <strong><span>CURLINFO_TOTAL_TIME_T</span></strong>。       </td>      </tr>     </tbody>       </table>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.curl-getinfo-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">curl_getinfo()</strong></span> 示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 创建 cURL 句柄<br /></span><span style="color: #9876AA">$ch </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 执行<br /></span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 检查是否有错误发生<br /></span><span style="color: #007700">if (!</span><span style="color: #9876AA">curl_errno</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">)) {<br />  </span><span style="color: #9876AA">$info </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_getinfo</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br />  echo </span><span style="color: #DD0000">'Took '</span><span style="color: #007700">, </span><span style="color: #9876AA">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'total_time'</span><span style="color: #007700">], </span><span style="color: #DD0000">' seconds to send a request to '</span><span style="color: #007700">, </span><span style="color: #9876AA">$info</span><span style="color: #007700">[</span><span style="color: #DD0000">'url'</span><span style="color: #007700">], </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #FF8000">// 关闭句柄<br /></span><span style="color: #9876AA">curl_close</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span>  <p class="para">   <div class="example" id="">    <p><strong>示例 #2 使用 <span class="parameter" style="color:#3A95FF">option</span> 参数的 <span class="function"><strong style="color:#CC7832">curl_getinfo()</strong></span> 示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 创建 cURL 句柄<br /></span><span style="color: #9876AA">$ch </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 执行<br /></span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 检测 HTTP 状态码<br /></span><span style="color: #007700">if (!</span><span style="color: #9876AA">curl_errno</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">)) {<br />  switch (</span><span style="color: #9876AA">$http_code </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_getinfo</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLINFO_HTTP_CODE</span><span style="color: #007700">)) {<br />    case </span><span style="color: #9876AA">200</span><span style="color: #007700">:  </span><span style="color: #FF8000"># OK<br />      </span><span style="color: #007700">break;<br />    default:<br />      echo </span><span style="color: #DD0000">'Unexpected HTTP code: '</span><span style="color: #007700">, </span><span style="color: #9876AA">$http_code</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />  }<br />}<br /><br /></span><span style="color: #FF8000">// 关闭句柄<br /></span><span style="color: #9876AA">curl_close</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.curl-getinfo-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    如果重新使用句柄，则保留此函数收集的信息。这意味着除非此函数在内部覆盖统计信息，否则将返回以前的信息。   </p>  </p></blockquote> </div></div>