<div id="function.substr-count" class="refentry"> <div class="refnamediv">  <h1 class="refname">substr_count</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">substr_count</span> &mdash; <span class="dc-title">计算字串出现的次数</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.substr-count-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>substr_count</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$haystack</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$needle</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$offset</span><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$length</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766">int</span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">substr_count()</strong></span> 返回子字符串   <span class="parameter" style="color:#3A95FF">needle</span> 在字符串   <span class="parameter" style="color:#3A95FF">haystack</span> 中出现的次数。注意   <span class="parameter" style="color:#3A95FF">needle</span> 区分大小写。  </p>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    该函数不会计算重叠字符串！参见下面的例子。   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.substr-count-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">haystack</span></dt>     <dd>      <p class="para">       在此字符串中进行搜索。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">needle</span></dt>     <dd>      <p class="para">       要搜索的字符串。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">offset</span></dt>     <dd>      <p class="para">       开始计数的偏移位置。如果是负数，就从字符的末尾开始统计。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">length</span></dt>     <dd>      <p class="para">       指定偏移位置之后的最大搜索长度。如果偏移量加上这个长度的和大于 <span class="parameter" style="color:#3A95FF">haystack</span> 的总长度，则打印警告信息。       负数的长度 length 是从 <span class="parameter" style="color:#3A95FF">haystack</span> 的末尾开始统计的。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.substr-count-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">  该函数返回 <span class="type" style="color:#EAB766">int</span>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.substr-count-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="parameter" style="color:#3A95FF">length</span> 可以为空（nullable）。      </td>     </tr>      <tr>       <td>7.1.0</td>       <td>        开始支持负数的 <span class="parameter" style="color:#3A95FF">offset</span> 和 <span class="parameter" style="color:#3A95FF">length</span>。       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.substr-count-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">substr_count()</strong></span> 示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$text </span><span style="color: #007700">= </span><span style="color: #DD0000">'This is a test'</span><span style="color: #007700">;<br />echo </span><span style="color: #9876AA">strlen</span><span style="color: #007700">(</span><span style="color: #9876AA">$text</span><span style="color: #007700">); </span><span style="color: #FF8000">// 14<br /><br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">substr_count</span><span style="color: #007700">(</span><span style="color: #9876AA">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'is'</span><span style="color: #007700">); </span><span style="color: #FF8000">// 2<br /><br />// 字符串被简化为 's is a test'，因此输出 1<br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">substr_count</span><span style="color: #007700">(</span><span style="color: #9876AA">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'is'</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 字符串被简化为 's i'，所以输出 0<br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">substr_count</span><span style="color: #007700">(</span><span style="color: #9876AA">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'is'</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 因为 5+10 &gt; 14，所以生成警告<br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">substr_count</span><span style="color: #007700">(</span><span style="color: #9876AA">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'is'</span><span style="color: #007700">, </span><span style="color: #9876AA">5</span><span style="color: #007700">, </span><span style="color: #9876AA">10</span><span style="color: #007700">);<br /><br /><br /></span><span style="color: #FF8000">// 输出 1，因为该函数不计算重叠字符串<br /></span><span style="color: #9876AA">$text2 </span><span style="color: #007700">= </span><span style="color: #DD0000">'gcdgcdgcd'</span><span style="color: #007700">;<br />echo </span><span style="color: #9876AA">substr_count</span><span style="color: #007700">(</span><span style="color: #9876AA">$text2</span><span style="color: #007700">, </span><span style="color: #DD0000">'gcdgcd'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.substr-count-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link count_chars()} - 返回字符串所用字符的信息</span></li>    <li class="member"><span class="function">{@link strpos()} - 查找字符串首次出现的位置</span></li>    <li class="member"><span class="function">{@link substr()} - 返回字符串的子串</span></li>    <li class="member"><span class="function">{@link strstr()} - 查找字符串的首次出现</span></li>   </ul>  </span> </div></div>