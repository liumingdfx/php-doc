<div id="function.utf8-decode" class="refentry"> <div class="refnamediv">  <h1 class="refname">utf8_decode</h1>   <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">utf8_decode</span> &mdash; <span class="dc-title">   将字符串从 UTF-8 转换为 ISO-8859-1，替换无效或者无法表示的字符。  </span></p> </div> <div id="function.utf8-decode-refsynopsisdiv">  <div class="warning"><strong class="warning">警告</strong><p class="simpara">此函数自 PHP 8.2.0起<em>弃用</em>。强烈建议不要应用此函数。</p></div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.utf8-decode-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>utf8_decode</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$string</span></span>): <span class="type" style="color:#EAB766">string</span></div>  <p class="para rdfs-comment">   该函数将字符串 <span class="parameter" style="color:#3A95FF">string</span> 从 <span>UTF-8</span> 编码转换为   <span>ISO-8859-1</span>。字符串中不是有效 UTF-8 字节或者不存在于 <span>ISO-8859-1</span>   的 <span>UTF-8</span> 字符（即 <span>U+00FF</span> 以上的码点）将转化为 <span>?</span>。  </p>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    Many web pages marked as using the <span>ISO-8859-1</span> character    encoding actually use the similar <span>Windows-1252</span> encoding,    and web browsers will interpret <span>ISO-8859-1</span> web pages as    <span>Windows-1252</span>. <span>Windows-1252</span> features    additional printable characters, such as the Euro sign    (<span>€</span>) and curly quotes (<span>“</span>    <span>”</span>), instead of certain <span>ISO-8859-1</span>    control characters. This function will not convert such    <span>Windows-1252</span> characters correctly. Use a different    function if <span>Windows-1252</span> conversion is required.   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.utf8-decode-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">string</span></dt>     <dd>      <p class="para">       UTF-8 编码的字符串。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.utf8-decode-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回 <span class="parameter" style="color:#3A95FF">string</span> 的 ISO-8859-1 翻译。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.utf8-decode-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.2.0</td>       <td>        弃用此函数。       </td>      </tr>      <tr>       <td>7.2.0</td>       <td>        This function has been moved from the XML extension to the core of PHP.        In previous versions, it was only available if the XML extension was installed.       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.utf8-decode-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 基础示例</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Convert the string 'Zoë' from UTF-8 to ISO 8859-1<br /></span><span style="color: #9876AA">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\x5A\x6F\xC3\xAB"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">utf8_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Invalid UTF-8 sequences are replaced with '?'<br /></span><span style="color: #9876AA">$invalid_utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xC3"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">utf8_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$invalid_utf8_string</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Characters which don't exist in ISO 8859-1, such as<br />// '€' (Euro Sign) are also replaced with '?'<br /></span><span style="color: #9876AA">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">utf8_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>5a6feb<br>string(1) &quot;?&quot;<br>string(1) &quot;?&quot;<br></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.utf8-decode-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <strong>弃用和替代方案</strong><br />   <p class="para">    从 PHP 8.2.0 开始，<em>弃用</em>此函数，并将在未来的版本中删除。应检查现有用途并用适当的替代方案。   </p>   <p class="para">    类似的功能可以通过 <span class="function">{@link mb_convert_encoding()}</span> 实现，支持 ISO-8859-1 和许多其他字符编码。    <div class="informalexample">     <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xC3\xAB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'ë' (e with diaeresis) in UTF-8<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xCE\xBB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'λ' (Greek lower-case lambda) in UTF-8<br /></span><span style="color: #9876AA">$iso8859_7_string </span><span style="color: #007700">= </span><span style="color: #9876AA">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-7'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_7_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">; </span><span style="color: #FF8000">// '€' (Euro sign) in UTF-8 (not present in ISO-8859-1)<br /></span><span style="color: #9876AA">$windows_1252_string </span><span style="color: #007700">= </span><span style="color: #9876AA">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'Windows-1252'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$windows_1252_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>     </div>     <p class="para">以上示例会输出：</p>     <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>eb<br>eb<br>80<br></span></div>     </div>    </div>   </p>   <p class="para">    根据安装的扩展，其他有效选项是    <span class="methodname" style="color:#CC7832">{@link UConverter::transcode()}</span> 和 <span class="function">{@link iconv()}</span>。   </p>   <p class="para">    以下都给出相同的结果：    <div class="informalexample">     <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\x5A\x6F\xC3\xAB"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'Zoë' in UTF-8<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">utf8_decode</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">mb_convert_encoding</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">iconv</span><span style="color: #007700">(</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">UConverter</span><span style="color: #007700">::</span><span style="color: #9876AA">transcode</span><span style="color: #007700">(</span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF8'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">bin2hex</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>     </div>     <p class="para">以上示例会输出：</p>     <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>5a6feb<br>5a6feb<br>5a6feb<br>5a6feb<br></span></div>     </div>    </div>    针对无效的字符串或者不能用 ISO 8859-1 表示的字符串，指定 <span>&#039;?&#039;</span> 作为    <span class="methodname" style="color:#CC7832">{@link UConverter::transcode()}</span> 的 <span>&#039;to_subst&#039;</span>    选项，将获得同 <span class="function"><strong style="color:#CC7832">utf8_decode()</strong></span> 相同的结果。    <div class="informalexample">     <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$utf8_string </span><span style="color: #007700">= </span><span style="color: #DD0000">"\xE2\x82\xAC"</span><span style="color: #007700">; </span><span style="color: #FF8000">// € (Euro Sign) does not exist in ISO 8859-1<br /></span><span style="color: #9876AA">$iso8859_1_string </span><span style="color: #007700">= </span><span style="color: #9876AA">UConverter</span><span style="color: #007700">::</span><span style="color: #9876AA">transcode</span><span style="color: #007700">(<br />    </span><span style="color: #9876AA">$utf8_string</span><span style="color: #007700">, </span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">, [</span><span style="color: #DD0000">'to_subst' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'?'</span><span style="color: #007700">]<br />);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$iso8859_1_string</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>     </div>     <p class="para">以上示例会输出：</p>     <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>sring(1) &quot;?&quot;<br></span></div>     </div>    </div>   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.utf8-decode-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link utf8_encode()} - 将字符串从 ISO-8859-1 转换为 UTF-8 编码</span></li>    <li class="member"><span class="function">{@link mb_convert_encoding()} - 转换字符串，从一个字符编码到另一个字符编码</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link UConverter::transcode()} - Convert a string from one character encoding to another</span></li>    <li class="member"><span class="function">{@link iconv()} - 将字符串从一个字符编码转换到另一个字符编码</span></li>   </ul>  </span> </div></div>