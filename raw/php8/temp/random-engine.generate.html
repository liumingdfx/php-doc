<div id="random-engine.generate" class="refentry"> <div class="refnamediv">  <h1 class="refname">Random\Engine::generate</h1>  <p class="verinfo">(PHP 8 &gt;= 8.2.0)</p><p class="refpurpose"><span class="refname">Random\Engine::generate</span> &mdash; <span class="dc-title">Generates randomness</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-random-engine.generate-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>Random\Engine::generate</strong></span>(): <span class="type" style="color:#EAB766">string</span></div>  <p class="para rdfs-comment">   Returns randomness and advances the algorithm’s state by one step.  </p>  <p class="para">   The randomness is represented by a binary string containing random bytes. This representation   allows to unambiguously interpret the random bits generated by the algorithm, for example to   accomodate different output sizes used by different algorithms.  </p>  <p class="para">   Algorithms that natively operate on integer values should return the integer in little-endian   byte order, for example by leveraging the <span class="function">{@link pack()}</span> function with the   <span>P</span> format code. The high-level interface provided by the   <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomizer.php" class="classname">Random\Randomizer</a></span> will interpret the returned random bytes as unsigned   little-endian integers if a numeric representation is required.  </p>  <p class="para">   It is strongly recommended that each bit of the returned string is uniformly and independently   selected, as some applications require randomness based on the bit-level to work correctly.   For example linear congruential generators often generate lower-quality randomness for the less   significant bits of the return integer value and thus would not be appropriate for applications   that require bit-level randomness.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-random-engine.generate-parameters">  <h3 class="title">参数</h3>  <span>此函数没有参数。</span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-random-engine.generate-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   A non-empty string containing random bytes.  </p>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <span class="simpara">    The <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomizer.php" class="classname">Random\Randomizer</a></span> works with unsigned 64 bit integers internally.    If the returned string contains more than 64 bit (8 byte) of randomness the exceeding    bytes will be ignored. Other applications may be able to process more than 64 bit at once.   </span>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-random-engine.generate-errors">  <h3 class="title">错误／异常</h3>  <ul class="itemizedlist">   <li class="listitem">    <span class="simpara">     If generating randomness fails, a <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomexception.php" class="classname">Random\RandomException</a></span> should     be thrown. Any other <span class="classname"><a href="https://www.php.net/manual/zh/class.exception.php" class="classname">Exception</a></span> thrown during generation should     be caught and wrapped into a <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomexception.php" class="classname">Random\RandomException</a></span>.    </span>   </li>   <li class="listitem">    <span class="simpara">     If the returned string is empty, a <span class="classname"><a href="https://www.php.net/manual/zh/class.random-brokenrandomengineerror.php" class="classname">Random\BrokenRandomEngineError</a></span>     will be thrown by the <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomizer.php" class="classname">Random\Randomizer</a></span>.    </span>   </li>   <li class="listitem">    <span class="simpara">     If the implemented algorithm is severely biased, a <span class="classname"><a href="https://www.php.net/manual/zh/class.random-brokenrandomengineerror.php" class="classname">Random\BrokenRandomEngineError</a></span>     may be thrown by the <span class="classname"><a href="https://www.php.net/manual/zh/class.random-randomizer.php" class="classname">Random\Randomizer</a></span> to prevent infinite loops     if rejection sampling is required to return unbiased results.    </span>   </li>  </ul> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-random-engine.generate-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">Random\Engine::generate()</strong></span> example</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">//*<br /> * Implements a Linear Congruential Generator with modulus 65536,<br /> * multiplier 61 and increment 17 returning an 8 Bit integer.<br /> *<br /> * Note: This engine is suitable for demonstration purposes only.<br /> *       Linear Congruential Generators generally generate low<br /> *       quality randomness and this specific implementation has<br /> *       a very short 16 Bit period that is unsuitable for<br /> *       almost any real-world use case.<br /> <br /></span><span style="color: #007700">final class </span><span style="color: #9876AA">LinearCongruentialGenerator </span><span style="color: #007700">implements </span><span style="color: #9876AA">\Random\Engine<br /></span><span style="color: #007700">{<br />    private </span><span style="color: #9876AA">int $state</span><span style="color: #007700">;<br /><br />    public function </span><span style="color: #9876AA">__construct</span><span style="color: #007700">(?</span><span style="color: #9876AA">int $seed </span><span style="color: #007700">= </span><span style="color: #9876AA">null</span><span style="color: #007700">)<br />    {<br />        if (</span><span style="color: #9876AA">$seed </span><span style="color: #007700">=== </span><span style="color: #9876AA">null</span><span style="color: #007700">) {<br />            </span><span style="color: #9876AA">$seed </span><span style="color: #007700">= </span><span style="color: #9876AA">random_int</span><span style="color: #007700">(</span><span style="color: #9876AA">0</span><span style="color: #007700">, </span><span style="color: #9876AA">0xffff</span><span style="color: #007700">);<br />        }<br /><br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">state </span><span style="color: #007700">= </span><span style="color: #9876AA">$seed </span><span style="color: #007700">&amp; </span><span style="color: #9876AA">0xffff</span><span style="color: #007700">;<br />    }<br /><br />    public function </span><span style="color: #9876AA">generate</span><span style="color: #007700">(): </span><span style="color: #9876AA">string<br />    </span><span style="color: #007700">{<br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">state </span><span style="color: #007700">= (</span><span style="color: #9876AA">61 </span><span style="color: #007700">* </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">state </span><span style="color: #007700">+ </span><span style="color: #9876AA">17</span><span style="color: #007700">) &amp; </span><span style="color: #9876AA">0xffff</span><span style="color: #007700">;<br /><br />        return </span><span style="color: #9876AA">pack</span><span style="color: #007700">(</span><span style="color: #DD0000">'C'</span><span style="color: #007700">, </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">state </span><span style="color: #007700">&gt;&gt; </span><span style="color: #9876AA">8</span><span style="color: #007700">);<br />    }<br />}<br /><br /></span><span style="color: #9876AA">$r </span><span style="color: #007700">= new </span><span style="color: #9876AA">\Random\Randomizer</span><span style="color: #007700">(<br />    new </span><span style="color: #9876AA">LinearCongruentialGenerator</span><span style="color: #007700">(</span><span style="color: #9876AA">seed</span><span style="color: #007700">: </span><span style="color: #9876AA">1</span><span style="color: #007700">)<br />);<br /><br />echo </span><span style="color: #DD0000">"Lucky Number: "</span><span style="color: #007700">, </span><span style="color: #9876AA">$r</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getInt</span><span style="color: #007700">(</span><span style="color: #9876AA">0</span><span style="color: #007700">, </span><span style="color: #9876AA">99</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Lucky Number: 4<br></span></div>   </div>  </div> </div></div>