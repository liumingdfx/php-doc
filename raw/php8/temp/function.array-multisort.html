<div id="function.array-multisort" class="refentry"> <div class="refnamediv">  <h1 class="refname">array_multisort</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_multisort</span> &mdash; <span class="dc-title">对多个数组或多维数组进行排序</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.array-multisort-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>array_multisort</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">&$array1</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$array1_sort_order</span><span class="initializer"> = SORT_ASC</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$array1_sort_flags</span><span class="initializer"> = SORT_REGULAR</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$rest</span></span><br>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">array_multisort()</strong></span>   可以用来一次对多个数组进行排序，或者根据某一维或多维对多维数组进行排序。  </p>  <p class="para">   关联（<span class="type" style="color:#EAB766">string</span>）键名保持不变，但数字键名会被重新索引。  </p>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:  <p class="para">  如果两个成员完全相同，那么它们将保持原来的顺序。  在 PHP 8.0.0 之前，它们在排序数组中的相对顺序是未定义的。 </p></p></blockquote> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.array-multisort-parameters">  <h3 class="title">参数</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:  <span>    重置数组中的内部指针，指向第一个元素。 </span></p></blockquote>  <p class="para">   <dl>         <dt><span class="parameter" style="color:#3A95FF">array1</span></dt>     <dd>      <p class="para">       要排序的 <span class="type" style="color:#EAB766">array</span>。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">array1_sort_order</span></dt>     <dd>      <p class="para">       之前 <span class="type" style="color:#EAB766">array</span>  参数要排列的顺序。       <strong><span>SORT_ASC</span></strong> 按照上升顺序排序， <strong><span>SORT_DESC</span></strong> 按照下降顺序排序。      </p>      <p class="para">       此参数可以和 <span class="parameter" style="color:#3A95FF">array1_sort_flags</span> 互换，也可以完全删除，默认是 <strong><span>SORT_ASC</span></strong> 。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">array1_sort_flags</span></dt>     <dd>      <p class="para">       为 <span class="type" style="color:#EAB766">array</span> 参数设定选项：      </p>      <p class="para">       排序类型标志：       <ul class="itemizedlist">        <li class="listitem">         <span class="simpara"><strong><span>SORT_REGULAR</span></strong> -           将项目按照通常方法比较（不修改类型）         </span>        </li>        <li class="listitem">         <span class="simpara"><strong><span>SORT_NUMERIC</span></strong> - 按照数字大小比较</span>        </li>        <li class="listitem">         <span class="simpara"><strong><span>SORT_STRING</span></strong> -  按照字符串比较</span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>SORT_LOCALE_STRING</span></strong> -  根据当前的本地化设置，按照字符串比较。           它会使用 locale 信息，可以通过 <span class="function">{@link setlocale()}</span> 修改此信息。         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>SORT_NATURAL</span></strong> - 以字符串的&quot;自然排序&quot;，类似 <span class="function">{@link natsort()}</span>         </span>        </li>        <li class="listitem">         <span class="simpara">          <strong><span>SORT_FLAG_CASE</span></strong> - 可以组合          (按位或 OR)           <strong><span>SORT_STRING</span></strong> 或者          <strong><span>SORT_NATURAL</span></strong> 大小写不敏感的方式排序字符串。         </span>        </li>       </ul>      </p>      <p class="para">       参数可以和 <span class="parameter" style="color:#3A95FF">array1_sort_order</span> 交换或者省略，默认情况下是 <strong><span>SORT_REGULAR</span></strong>。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">rest</span></dt>     <dd>      <p class="para">       可选的选项，可提供更多数组，跟随在 sort order 和 sort flag 之后。       提供的数组和之前的数组要有相同数量的元素。       换言之，排序是按字典顺序排列的。      </p>     </dd>       </dl>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.array-multisort-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>， 或者在失败时返回 <strong><span>false</span></strong>。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.array-multisort-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 多个数组排序</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$ar1 </span><span style="color: #007700">= array(</span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$ar2 </span><span style="color: #007700">= array(</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">, </span><span style="color: #9876AA">2</span><span style="color: #007700">, </span><span style="color: #9876AA">4</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">array_multisort</span><span style="color: #007700">(</span><span style="color: #9876AA">$ar1</span><span style="color: #007700">, </span><span style="color: #9876AA">$ar2</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$ar1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$ar2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>     这个例子里，排序后，第一个数组会包含  0、     10、 100、 100。     第二个数组会包含 4、1、 2、 3。     第二个数组里的项目对应第一个数组后也进行了排序（100 和 100）。    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(4) {<br>  [0]=&gt; int(0)<br>  [1]=&gt; int(10)<br>  [2]=&gt; int(100)<br>  [3]=&gt; int(100)<br>}<br>array(4) {<br>  [0]=&gt; int(4)<br>  [1]=&gt; int(1)<br>  [2]=&gt; int(2)<br>  [3]=&gt; int(3)<br>}<br></span></div>    </div>   </div>  </span>  <p class="para">   <div class="example" id="">    <p><strong>示例 #2 排序多维数组</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$ar </span><span style="color: #007700">= array(<br />       array(</span><span style="color: #DD0000">"10"</span><span style="color: #007700">, </span><span style="color: #9876AA">11</span><span style="color: #007700">, </span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #DD0000">"a"</span><span style="color: #007700">),<br />       array(   </span><span style="color: #9876AA">1</span><span style="color: #007700">,  </span><span style="color: #9876AA">2</span><span style="color: #007700">, </span><span style="color: #DD0000">"2"</span><span style="color: #007700">,   </span><span style="color: #9876AA">3</span><span style="color: #007700">,   </span><span style="color: #9876AA">1</span><span style="color: #007700">)<br />      );<br /></span><span style="color: #9876AA">array_multisort</span><span style="color: #007700">(</span><span style="color: #9876AA">$ar</span><span style="color: #007700">[</span><span style="color: #9876AA">0</span><span style="color: #007700">], </span><span style="color: #9876AA">SORT_ASC</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_STRING</span><span style="color: #007700">,<br />                </span><span style="color: #9876AA">$ar</span><span style="color: #007700">[</span><span style="color: #9876AA">1</span><span style="color: #007700">], </span><span style="color: #9876AA">SORT_NUMERIC</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_DESC</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$ar</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>     本例中在排序后，第一个数组将变成     &quot;10&quot;，100，100，11，&quot;a&quot;（被当作字符串以升序排列）。第二个数组将包含     1, 3, &quot;2&quot;, 2, 1（被当作数字以降序排列）。    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(2) {<br>  [0]=&gt; array(5) {<br>    [0]=&gt; string(2) &quot;10&quot;<br>    [1]=&gt; int(100)<br>    [2]=&gt; int(100)<br>    [3]=&gt; int(11)<br>    [4]=&gt; string(1) &quot;a&quot;<br>  }<br>  [1]=&gt; array(5) {<br>    [0]=&gt; int(1)<br>    [1]=&gt; int(3)<br>    [2]=&gt; string(1) &quot;2&quot;<br>    [3]=&gt; int(2)<br>    [4]=&gt; int(1)<br>  }<br>}<br></span></div>    </div>   </div>  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #3 对数据库结果进行排序</strong></p>    <div class="example-contents"><p>     本例中 <var class="varname">data</var>     数组中的每个单元表示一个表中的一行。这是典型的数据库记录的数据集合。    </p></div>    <div class="example-contents"><p>     例子中的数据如下：    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>volume | edition<br>-------+--------<br>    67 |       2<br>    86 |       1<br>    85 |       6<br>    98 |       2<br>    86 |       6<br>    67 |       7<br></span></div>    </div>    <div class="example-contents"><p>     数据全都存放在名为 <var class="varname">data</var>     的数组中。这通常是通过循环从数据库取得的结果，例如     <span class="function">{@link mysql_fetch_assoc()}</span>。    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">67</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">86</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">85</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">6</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">98</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">86</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">6</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$data</span><span style="color: #007700">[] = array(</span><span style="color: #DD0000">'volume' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">67</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">7</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>     本例中将把 <var class="varname">volume</var> 降序排列，把     <var class="varname">edition</var> 升序排列。    </p></div>    <div class="example-contents"><p>     现在有了包含有行的数组，但是 <span class="function"><strong style="color:#CC7832">array_multisort()</strong></span>     需要一个包含列的数组，因此用以下代码来取得列，然后排序。    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 取得列的列表<br /></span><span style="color: #007700">foreach (</span><span style="color: #9876AA">$data </span><span style="color: #007700">as </span><span style="color: #9876AA">$key </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">$row</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">$volume</span><span style="color: #007700">[</span><span style="color: #9876AA">$key</span><span style="color: #007700">]  = </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'volume'</span><span style="color: #007700">];<br />    </span><span style="color: #9876AA">$edition</span><span style="color: #007700">[</span><span style="color: #9876AA">$key</span><span style="color: #007700">] = </span><span style="color: #9876AA">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">'edition'</span><span style="color: #007700">];<br />}<br /><br /></span><span style="color: #FF8000">// 你可以使用 array_column() 代替上面的代码<br /></span><span style="color: #9876AA">$volume  </span><span style="color: #007700">= </span><span style="color: #9876AA">array_column</span><span style="color: #007700">(</span><span style="color: #9876AA">$data</span><span style="color: #007700">, </span><span style="color: #DD0000">'volume'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$edition </span><span style="color: #007700">= </span><span style="color: #9876AA">array_column</span><span style="color: #007700">(</span><span style="color: #9876AA">$data</span><span style="color: #007700">, </span><span style="color: #DD0000">'edition'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 将数据根据 volume 降序排列，根据 edition 升序排列<br />// 把 $data 作为最后一个参数，以通用键排序<br /></span><span style="color: #9876AA">array_multisort</span><span style="color: #007700">(</span><span style="color: #9876AA">$volume</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_DESC</span><span style="color: #007700">, </span><span style="color: #9876AA">$edition</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_ASC</span><span style="color: #007700">, </span><span style="color: #9876AA">$data</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>     数据集合现在排好序了，结果如下：    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>volume | edition<br>-------+--------<br>    98 |       2<br>    86 |       1<br>    86 |       6<br>    85 |       6<br>    67 |       2<br>    67 |       7<br></span></div>    </div>   </div>  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #4 不区分大小写字母排序</strong></p>    <div class="example-contents"><p>     <strong><span>SORT_STRING</span></strong> 和     <strong><span>SORT_REGULAR</span></strong>     都是区分大小写字母的，大写字母会排在小写字母之前。    </p></div>    <div class="example-contents"><p>     要进行不区分大小写的排序，就要按照原数组的小写字母拷贝来排序。    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$array </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'Alpha'</span><span style="color: #007700">, </span><span style="color: #DD0000">'atomic'</span><span style="color: #007700">, </span><span style="color: #DD0000">'Beta'</span><span style="color: #007700">, </span><span style="color: #DD0000">'bank'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$array_lowercase </span><span style="color: #007700">= </span><span style="color: #9876AA">array_map</span><span style="color: #007700">(</span><span style="color: #DD0000">'strtolower'</span><span style="color: #007700">, </span><span style="color: #9876AA">$array</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">array_multisort</span><span style="color: #007700">(</span><span style="color: #9876AA">$array_lowercase</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_ASC</span><span style="color: #007700">, </span><span style="color: #9876AA">SORT_STRING</span><span style="color: #007700">, </span><span style="color: #9876AA">$array</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">$array</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Array<br>(<br>    [0] =&gt; Alpha<br>    [1] =&gt; atomic<br>    [2] =&gt; bank<br>    [3] =&gt; Beta<br>)<br></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.array-multisort-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link usort()} - 使用用户自定义的比较函数对数组中的值进行排序</span></li>    <li class="member"><a href="https://www.php.net/manual/zh/array.sorting.php" class="link">数组排序函数对比</a></li>   </ul>  </span> </div></div>