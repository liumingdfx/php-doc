<div id="class.ds-deque" class="reference"> <h1 class="title">The Deque class</h1>  <div class="partintro"><p class="verinfo">(PECL ds &gt;= 1.0.0)</p>  <div class="section" id="ds-deque.intro">   <h2 class="title">简介</h2>   <p class="para">    A Deque (pronounced “deck”) is a sequence of values    in a contiguous buffer that grows and shrinks automatically.    The name is a common abbreviation of “double-ended queue” and is used    internally by <span class="classname"><a href="https://www.php.net/manual/zh/class.ds-queue.php" class="classname">Ds\Queue</a></span>.   </p>   <p class="para">    Two pointers are used to keep track of a head and a tail. The pointers can    “wrap around” the end of the buffer, which avoids the need to move other    values around to make room. This makes shift and unshift very fast —     something a <span class="classname"><a href="https://www.php.net/manual/zh/class.ds-vector.php" class="classname">Ds\Vector</a></span> can’t compete with.   </p>   <p class="para">    Accessing a value by index requires a translation between the index and its    corresponding position in the buffer: <span>((head + position) % capacity)</span>.   </p>  </div><div class="section" id="ds-deque.strengths">    <h2 class="title">Strengths</h2>    <p class="para">        <ul class="simplelist">            <li class="member">Supports array syntax (square brackets).</li>            <li class="member">Uses less overall memory than an <span class="type" style="color:#EAB766">array</span> for the same number of values.</li>            <li class="member">Automatically frees allocated memory when its size drops low enough.</li>            <li class="member">                <span class="function"><strong style="color:#CC7832">get()</strong></span>,                <span class="function"><strong style="color:#CC7832">set()</strong></span>,                <span class="function"><strong style="color:#CC7832">push()</strong></span>,                <span class="function"><strong style="color:#CC7832">pop()</strong></span>,                <span class="function"><strong style="color:#CC7832">shift()</strong></span>, and                <span class="function"><strong style="color:#CC7832">unshift()</strong></span> are all O(1).            </li>        </ul>   </p></div><div class="section" id="ds-deque.weaknesses">    <h2 class="title">Weaknesses</h2>    <p class="para">        <ul class="simplelist">            <li class="member">Capacity must be a power of 2.</li>            <li class="member">                <span class="function"><strong style="color:#CC7832">insert()</strong></span> and                <span class="function"><strong style="color:#CC7832">remove()</strong></span> are O(n).            </li>        </ul>   </p></div>  <div class="section" id="ds-deque.synopsis">   <h2 class="title">类摘要</h2>   <div class="classsynopsis">    <span class="ooclass"><strong class="classname"></strong></span>    <div class="classsynopsisinfo">     <span class="ooclass">      <span class="modifier">class</span> <strong class="classname">Ds\Deque</strong>     </span>     <span class="oointerface"><span class="modifier">implements</span>        <a href="https://www.php.net/manual/zh/class.ds-sequence.php" class="interfacename">Ds\Sequence</a></span><span class="oointerface">,  <a href="https://www.php.net/manual/zh/class.arrayaccess.php" class="interfacename">ArrayAccess</a></span> {</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 常量 </div>    <div class="fieldsynopsis">     <span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.ds-deque.php#ds-deque.constants.min-capacity"><var class="varname">MIN_CAPACITY</var></a></var><span class="initializer"> = 8</span>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 方法 </div>    <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.allocate.php" class="methodname" style="color:#CC7832">allocate</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$capacity</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.apply.php" class="methodname" style="color:#CC7832">apply</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$callback</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.capacity.php" class="methodname" style="color:#CC7832">capacity</a></span>(): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.clear.php" class="methodname" style="color:#CC7832">clear</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.contains.php" class="methodname" style="color:#CC7832">contains</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$values</span></span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.copy.php" class="methodname" style="color:#CC7832">copy</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.filter.php" class="methodname" style="color:#CC7832">filter</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$callback</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.find.php" class="methodname" style="color:#CC7832">find</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$value</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.first.php" class="methodname" style="color:#CC7832">first</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.get.php" class="methodname" style="color:#CC7832">get</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$index</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.insert.php" class="methodname" style="color:#CC7832">insert</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$index</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$values</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.isempty.php" class="methodname" style="color:#CC7832">isEmpty</a></span>(): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.join.php" class="methodname" style="color:#CC7832">join</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$glue</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766">string</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.last.php" class="methodname" style="color:#CC7832">last</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.map.php" class="methodname" style="color:#CC7832">map</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$callback</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.merge.php" class="methodname" style="color:#CC7832">merge</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$values</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.pop.php" class="methodname" style="color:#CC7832">pop</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.push.php" class="methodname" style="color:#CC7832">push</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$values</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.reduce.php" class="methodname" style="color:#CC7832">reduce</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$callback</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$initial</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.remove.php" class="methodname" style="color:#CC7832">remove</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$index</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.reverse.php" class="methodname" style="color:#CC7832">reverse</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.reversed.php" class="methodname" style="color:#CC7832">reversed</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.rotate.php" class="methodname" style="color:#CC7832">rotate</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$rotations</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.set.php" class="methodname" style="color:#CC7832">set</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$index</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$value</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.shift.php" class="methodname" style="color:#CC7832">shift</a></span>(): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.slice.php" class="methodname" style="color:#CC7832">slice</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$index</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$length</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.sort.php" class="methodname" style="color:#CC7832">sort</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$comparator</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.sorted.php" class="methodname" style="color:#CC7832">sorted</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$comparator</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.ds-deque.php" class="type Ds\Deque" style="color:#EAB766">Ds\Deque</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.sum.php" class="methodname" style="color:#CC7832">sum</a></span>(): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span>|<span class="type" style="color:#EAB766">float</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.toarray.php" class="methodname" style="color:#CC7832">toArray</a></span>(): <span class="type" style="color:#EAB766">array</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/ds-deque.unshift.php" class="methodname" style="color:#CC7832">unshift</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$values</span><span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div>   }</div>  </div>  <div class="section" id="ds-deque.constants">   <h2 class="title">预定义常量</h2>   <dl>         <dt id="ds-deque.constants.min-capacity"><strong><span>Ds\Deque::MIN_CAPACITY</span></strong></dt>     <dd>      <p class="para"/>     </dd>       </dl>  </div>  <div class="section">   <h2 class="title">更新日志</h2>   <p class="para">    <table class="doctable informaltable">           <thead>       <tr>        <th>版本</th>        <th>说明</th>       </tr>      </thead>      <tbody class="tbody">       <tr>        <td>PECL ds 1.3.0</td>        <td>         The class now implements <span class="classname"><a href="https://www.php.net/manual/zh/class.arrayaccess.php" class="classname">ArrayAccess</a></span>.        </td>       </tr>      </tbody>         </table>   </p>  </div> </div> <h2>目录</h2><ul class="chunklist chunklist_reference"><li>{@link Ds\Deque::allocate} — Allocates enough memory for a required capacity</li><li>{@link Ds\Deque::apply} — Updates all values by applying a callback function to each value</li><li>{@link Ds\Deque::capacity} — Returns the current capacity</li><li>{@link Ds\Deque::clear} — Removes all values from the deque</li><li>{@link Ds\Deque::__construct} — Creates a new instance</li><li>{@link Ds\Deque::contains} — Determines if the deque contains given values</li><li>{@link Ds\Deque::copy} — Returns a shallow copy of the deque</li><li>{@link Ds\Deque::count} — Returns the number of values in the collection</li><li>{@link Ds\Deque::filter} — Creates a new deque using a callable to    determine which values to include</li><li>{@link Ds\Deque::find} — Attempts to find a value's index</li><li>{@link Ds\Deque::first} — Returns the first value in the deque</li><li>{@link Ds\Deque::get} — Returns the value at a given index</li><li>{@link Ds\Deque::insert} — Inserts values at a given index</li><li>{@link Ds\Deque::isEmpty} — Returns whether the deque is empty</li><li>{@link Ds\Deque::join} — Joins all values together as a string</li><li>{@link Ds\Deque::jsonSerialize} — Returns a representation that can be converted to JSON</li><li>{@link Ds\Deque::last} — Returns the last value</li><li>{@link Ds\Deque::map} — Returns the result of applying a callback to each value</li><li>{@link Ds\Deque::merge} — Returns the result of adding all given values to the deque</li><li>{@link Ds\Deque::pop} — Removes and returns the last value</li><li>{@link Ds\Deque::push} — Adds values to the end of the deque</li><li>{@link Ds\Deque::reduce} — Reduces the deque to a single value using a callback function</li><li>{@link Ds\Deque::remove} — Removes and returns a value by index</li><li>{@link Ds\Deque::reverse} — Reverses the deque in-place</li><li>{@link Ds\Deque::reversed} — Returns a reversed copy</li><li>{@link Ds\Deque::rotate} — Rotates the deque by a given number of rotations</li><li>{@link Ds\Deque::set} — Updates a value at a given index</li><li>{@link Ds\Deque::shift} — Removes and returns the first value</li><li>{@link Ds\Deque::slice} — Returns a sub-deque of a given range</li><li>{@link Ds\Deque::sort} — Sorts the deque in-place</li><li>{@link Ds\Deque::sorted} — Returns a sorted copy</li><li>{@link Ds\Deque::sum} — Returns the sum of all values in the deque</li><li>{@link Ds\Deque::toArray} — Converts the deque to an array</li><li>{@link Ds\Deque::unshift} — Adds values to the front of the deque</li></ul></div>