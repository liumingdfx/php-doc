<div id="function.curl-multi-setopt" class="refentry"> <div class="refnamediv">  <h1 class="refname">curl_multi_setopt</h1>  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">curl_multi_setopt</span> &mdash; <span class="dc-title">设置 cURL 并行选项</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.curl-multi-setopt-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>curl_multi_setopt</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.curlmultihandle.php" class="type CurlMultiHandle" style="color:#EAB766">CurlMultiHandle</a></span> <span class="parameter" style="color:#3A95FF">$multi_handle</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$option</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">$value</span></span>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   为给定的 cURL 并行句柄设置选项。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.curl-multi-setopt-parameters">  <h3 class="title">参数</h3>  <dl>   <dt><span class="parameter" style="color:#3A95FF">multi_handle</span></dt><dd><span>由 <span class="function">{@link curl_multi_init()}</span> 返回的 cURL 多个句柄。</span></dd>       <dt><span class="parameter" style="color:#3A95FF">option</span></dt>    <dd>     <p class="para">      常量 <strong><span>CURLMOPT_*</span></strong> 之一。     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">value</span></dt>    <dd>      <p class="para">       将要设置给 <span class="parameter" style="color:#3A95FF">option</span> 的值。      </p>      <p class="para">       在 <span class="parameter" style="color:#3A95FF">option</span> 参数为下列值时 <span class="parameter" style="color:#3A95FF">value</span> 需要为 <span class="type" style="color:#EAB766">int</span> 类型：       <table class="doctable informaltable">                 <thead>          <tr>           <th>选项</th>           <th>设置 <span class="parameter" style="color:#3A95FF">value</span> 为</th>          </tr>         </thead>         <tbody class="tbody">          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_PIPELINING</span></strong></td>           <td style="vertical-align: top;">            传递 1 启用或传递 0 禁用。在多句柄上启用管道将使其尝试对使用此句柄的传输尽可能执行 HTTP            管道操作。这意味着如果添加的第二个请求可以使用已有连接，则第二个请求将在同一连接上使用“管道”。            从 cURL 7.43.0 开始，该值是位掩码，如果可能，您还可以传递 2 以尝试在已有的 HTTP/2 连接上复用多路新传输。传递            3 指示 cURL 请求彼此独立的管道和多路复用。            从 cURL 7.62.0 开始，设置管道位没有效果。除了整数文字，还可以使用 CURLPIPE_* 常量（如果可用）。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_MAXCONNECTS</span></strong></td>           <td style="vertical-align: top;">            传递数字，该数字将用作 libcurl 可以缓存的同时打开的最大连接数。默认情况下，数量将放大为适应 <span class="function">{@link curl_multi_add_handle()}</span>            添加的句柄数量的四倍。当缓存已满时，curl 会关闭缓存中最早的一个，以防止打开的连接数增加。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE</span></strong></td>           <td style="vertical-align: top;">            传递数字，以字节为单位指定管道的块（chunk）长度阈值。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE</span></strong></td>           <td style="vertical-align: top;">            Pass a number that specifies the size threshold for pipelining            penalty in bytes.           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_MAX_CONCURRENT_STREAMS</span></strong></td>           <td style="vertical-align: top;">            The set number will be used as the maximum number of concurrent streams for a connections that cURL            should support on connections done using HTTP/2. Valid values range from            <span>1</span> to <span>2147483647</span> (<span>2^31 - 1</span>).            The value passed here would be honored based on other system resources properties.            Default is <span>100</span>.           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_MAX_HOST_CONNECTIONS</span></strong></td>           <td style="vertical-align: top;">            传递一个数字，指定连接单个主机的最大数量。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_MAX_PIPELINE_LENGTH</span></strong></td>           <td style="vertical-align: top;">            传递数字，指定管道中的最大请求数。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_MAX_TOTAL_CONNECTIONS</span></strong></td>           <td style="vertical-align: top;">            传递数字，指定同时打开连接的最大数量。           </td>          </tr>          <tr>           <td style="vertical-align: top;"><strong><span>CURLMOPT_PUSHFUNCTION</span></strong></td>           <td style="vertical-align: top;">            传递 <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> 以注册处理服务器推送且应具有以下签名：            <div class="methodsynopsis dc-description">             <span class="methodname" style="color:#CC7832"><span class="replaceable">pushfunction</span></span>(<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$parent_ch</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$pushed_ch</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$headers</span></span>): <span class="type" style="color:#EAB766">int</span></div>            <dl>                           <dt><span class="parameter" style="color:#3A95FF">parent_ch</span></dt>              <dd>               <p class="para">                父级 cURL 句柄（客户端发出的请求）。               </p>              </dd>                                        <dt><span class="parameter" style="color:#3A95FF">pushed_ch</span></dt>              <dd>               <p class="para">                推送请求的新 cURL 句柄。               </p>              </dd>                                        <dt><span class="parameter" style="color:#3A95FF">headers</span></dt>              <dd>               <p class="para">                The push promise headers.               </p>              </dd>                         </dl>            推送函数如果可以处理推送应该返回 <strong><span>CURL_PUSH_OK</span></strong>，或者返回 <strong><span>CURL_PUSH_DENY</span></strong> 拒绝。           </td>          </tr>         </tbody>               </table>      </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.curl-multi-setopt-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>， 或者在失败时返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.curl-multi-setopt-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.2.0</td>       <td>        引入 <strong><span>CURLMOPT_MAX_CONCURRENT_STREAMS</span></strong>。       </td>      </tr>      <tr> <td>8.0.0</td> <td>  <span class="parameter" style="color:#3A95FF">multi_handle</span> expects a <span class="classname"><a href="https://www.php.net/manual/zh/class.curlmultihandle.php" class="classname">CurlMultiHandle</a></span>  instance now; previously, a <span class="type" style="color:#EAB766">resource</span> was expected. </td></tr>      <tr>       <td>7.1.0</td>       <td>        引入 <strong><span>CURLMOPT_PUSHFUNCTION</span></strong>。       </td>      </tr>      <tr>       <td>7.0.7</td>       <td>        引入 <strong><span>CURLMOPT_CHUNK_LENGTH_PENALTY_SIZE</span></strong>、<strong><span>CURLMOPT_CONTENT_LENGTH_PENALTY_SIZE</span></strong>、<strong><span>CURLMOPT_MAX_HOST_CONNECTIONS</span></strong>、<strong><span>CURLMOPT_MAX_PIPELINE_LENGTH</span></strong>        和 <strong><span>CURLMOPT_MAX_TOTAL_CONNECTIONS</span></strong>。       </td>      </tr>     </tbody>       </table>  </span> </div></div>