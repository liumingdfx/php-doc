<div id="php-user-filter.filter" class="refentry"> <div class="refnamediv">  <h1 class="refname">php_user_filter::filter</h1>  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">php_user_filter::filter</span> &mdash; <span class="dc-title">Called when applying the filter</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-php-user-filter.filter-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>php_user_filter::filter</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$in</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$out</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">&$consumed</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$closing</span></span><br>): <span class="type" style="color:#EAB766">int</span></div>  <p class="para rdfs-comment">   This method is called whenever data is read from or written to   the attached stream (such as with <span class="function">{@link fread()}</span> or <span class="function">{@link fwrite()}</span>).  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-php-user-filter.filter-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">in</span></dt>    <dd>     <span>      <span class="parameter" style="color:#3A95FF">in</span> is a resource pointing to a <span>bucket brigade</span>      which contains one or more <span>bucket</span> objects containing data to be filtered.     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">out</span></dt>    <dd>     <p class="para">      <span class="parameter" style="color:#3A95FF">out</span> is a resource pointing to a second <span>bucket brigade</span>      into which your modified buckets should be placed.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">consumed</span></dt>    <dd>     <p class="para">      <span class="parameter" style="color:#3A95FF">consumed</span>, which must <em>always</em>      be declared by reference, should be incremented by the length of the data      which your filter reads in and alters.  In most cases this means you will      increment <span class="parameter" style="color:#3A95FF">consumed</span> by <span>$bucket-&gt;datalen</span>      for each <span>$bucket</span>.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">closing</span></dt>    <dd>     <p class="para">      If the stream is in the process of closing      (and therefore this is the last pass through the filterchain),      the <span class="parameter" style="color:#3A95FF">closing</span> parameter will be set to <strong><span>true</span></strong>.     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-php-user-filter.filter-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   The <span class="methodname" style="color:#CC7832"><strong>filter()</strong></span> method must return one of   three values upon completion.   <table class="doctable informaltable">         <thead>      <tr>       <th>Return Value</th>       <th>Meaning</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td><strong><span>PSFS_PASS_ON</span></strong></td>       <td>        Filter processed successfully with data available in the        <span class="parameter" style="color:#3A95FF">out</span> <span>bucket brigade</span>.       </td>      </tr>      <tr>       <td><strong><span>PSFS_FEED_ME</span></strong></td>       <td>        Filter processed successfully, however no data was available to        return. More data is required from the stream or prior filter.       </td>      </tr>      <tr>       <td><strong><span>PSFS_ERR_FATAL</span></strong> (default)</td>       <td>        The filter experienced an unrecoverable error and cannot continue.       </td>      </tr>     </tbody>       </table>  </p> </div></div>