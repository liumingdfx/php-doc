<div id="function.openssl-pkcs7-verify" class="refentry"> <div class="refnamediv">  <h1 class="refname">openssl_pkcs7_verify</h1>  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">openssl_pkcs7_verify</span> &mdash; <span class="dc-title">校验一个已签名的 S/MIME 消息的签名</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.openssl-pkcs7-verify-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>openssl_pkcs7_verify</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$input_filename</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$flags</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$signers_certificates_filename</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$ca_info</span><span class="initializer"> = []</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$untrusted_certificates_filename</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$content</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$output_filename</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">bool</span>|<span class="type" style="color:#EAB766">int</span></span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">openssl_pkcs7_verify()</strong></span>   读取给定文件中的 S/MIME 消息并且检查数字签名。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.openssl-pkcs7-verify-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">input_filename</span></dt>     <dd>      <p class="para">       消息的路径。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">flags</span></dt>     <dd>      <p class="para">       <span class="parameter" style="color:#3A95FF">flags</span> 可以用来影响如何校验签名 - 参见       <a href="https://www.php.net/manual/zh/openssl.pkcs7.flags.php" class="link">PKCS7 常量</a>       获取更多信息。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">signers_certificates_filename</span></dt>     <dd>      <p class="para">       如果已指定 <span class="parameter" style="color:#3A95FF">signers_certificates_filename</span>       输出文件，它应该是一个用以保存文件的字符串名称，签名消息的个人证书将以 <abbr title="Privacy-Enhanced Mail">PEM</abbr> 的格式保存起来。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">ca_info</span></dt>     <dd>      <p class="para">       如果 <span class="parameter" style="color:#3A95FF">ca_info</span> 被指定了，它应该保存关于受信任的CA证书的信息供在验证过程中使用 - 参见       <a href="https://www.php.net/manual/zh/openssl.cert.verification.php" class="link">证书校验</a>       获取关于该参数的更多信息。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">untrusted_certificates_filename</span></dt>     <dd>      <p class="para">       如果 <span class="parameter" style="color:#3A95FF">untrusted_certificates_filename</span> 被指定了，该文件包含了一堆会被作为不受信任的ca使用的证书。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">content</span></dt>     <dd>      <p class="para">       你可以使用 <span class="parameter" style="color:#3A95FF">content</span> 来指定带有已被验证数据的文件名，该文件内容已去掉了签名信息。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">output_filename</span></dt>     <dd>      <p class="para">      </p>     </dd>        </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.openssl-pkcs7-verify-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   如果签名已被认证，返回 <strong><span>true</span></strong>, 如果不正确 (消息已被篡改或者签名证书不可用) 则返回 <strong><span>false</span></strong>,   或者 - 错误时返回1.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.openssl-pkcs7-verify-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="parameter" style="color:#3A95FF">signers_certificates_filename</span>、<span class="parameter" style="color:#3A95FF">untrusted_certificates_filename</span>、<span class="parameter" style="color:#3A95FF">content</span>       和 <span class="parameter" style="color:#3A95FF">output_filename</span> 现在可为 null。      </td>     </tr>     <tr>      <td>7.2.0</td>      <td>       新增 <span class="parameter" style="color:#3A95FF">output_filename</span> 参数。      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.openssl-pkcs7-verify-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <span class="simpara">    正如 RFC 2045 中指定的，<span class="parameter" style="color:#3A95FF">input_filename</span> 参数最多不可超过 76 个字符串。   </span>  </p></blockquote> </div></div>