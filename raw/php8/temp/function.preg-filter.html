<div id="function.preg-filter" class="refentry"> <div class="refnamediv">  <h1 class="refname">preg_filter</h1>  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">preg_filter</span> &mdash; <span class="dc-title">执行一个正则表达式搜索和替换</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.preg-filter-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>preg_filter</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span></span> <span class="parameter" style="color:#3A95FF">$pattern</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span></span> <span class="parameter" style="color:#3A95FF">$replacement</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span></span> <span class="parameter" style="color:#3A95FF">$subject</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$limit</span><span class="initializer"> = -1</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">&$count</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">null</span></span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">preg_filter()</strong></span>等价于<span class="function">{@link preg_replace()}</span>   除了它仅仅返回(可能经过转化)与目标匹配的结果. 这个函数怎样工作的更详细信息请阅读   <span class="function">{@link preg_replace()}</span>文档.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.preg-filter-parameters">  <h3 class="title">参数</h3>  <span>   <span class="function">{@link preg_replace()}</span> 文档中描述了参数。  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.preg-filter-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">  如果<span class="parameter" style="color:#3A95FF">subject</span>是一个<span class="type" style="color:#EAB766"><span class="type 数组" style="color:#EAB766">数组</span></span>，返回一个<span class="type" style="color:#EAB766"><span class="type 数组" style="color:#EAB766">数组</span></span>，  其他情况返回一个<span class="type" style="color:#EAB766"><span class="type 字符串" style="color:#EAB766">字符串</span></span>。  </p>  <p class="para">  如果没有找到匹配或者发生了错误，当<span class="parameter" style="color:#3A95FF">subject</span>是<span class="type" style="color:#EAB766"><span class="type 数组" style="color:#EAB766">数组</span></span>  时返回一个空<span class="type" style="color:#EAB766"><span class="type 数组" style="color:#EAB766">数组</span></span>，其他情况返回<strong><span>null</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.preg-filter-errors">  <h3 class="title">错误／异常</h3>  <p class="para">如果传递的正则表达式无法正常解析，会发出 <strong><span>E_WARNING</span></strong>。 </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.preg-filter-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1      比较<span class="function"><strong style="color:#CC7832">preg_filter()</strong></span>      和<span class="function">{@link preg_replace()}</span>的示例    </strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$subject </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'a'</span><span style="color: #007700">, </span><span style="color: #DD0000">'2'</span><span style="color: #007700">, </span><span style="color: #DD0000">'b'</span><span style="color: #007700">, </span><span style="color: #DD0000">'3'</span><span style="color: #007700">, </span><span style="color: #DD0000">'A'</span><span style="color: #007700">, </span><span style="color: #DD0000">'B'</span><span style="color: #007700">, </span><span style="color: #DD0000">'4'</span><span style="color: #007700">); <br /></span><span style="color: #9876AA">$pattern </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'/\d/'</span><span style="color: #007700">, </span><span style="color: #DD0000">'/[a-z]/'</span><span style="color: #007700">, </span><span style="color: #DD0000">'/[1a]/'</span><span style="color: #007700">); <br /></span><span style="color: #9876AA">$replace </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'A:$0'</span><span style="color: #007700">, </span><span style="color: #DD0000">'B:$0'</span><span style="color: #007700">, </span><span style="color: #DD0000">'C:$0'</span><span style="color: #007700">); <br /><br />echo </span><span style="color: #DD0000">"preg_filter returns\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">preg_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$pattern</span><span style="color: #007700">, </span><span style="color: #9876AA">$replace</span><span style="color: #007700">, </span><span style="color: #9876AA">$subject</span><span style="color: #007700">)); <br /><br />echo </span><span style="color: #DD0000">"preg_replace returns\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">preg_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$pattern</span><span style="color: #007700">, </span><span style="color: #9876AA">$replace</span><span style="color: #007700">, </span><span style="color: #9876AA">$subject</span><span style="color: #007700">)); <br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>preg_filter returns<br>Array<br>(<br>    [0] =&gt; A:C:1<br>    [1] =&gt; B:C:a<br>    [2] =&gt; A:2<br>    [3] =&gt; B:b<br>    [4] =&gt; A:3<br>    [7] =&gt; A:4<br>)<br>preg_replace returns<br>Array<br>(<br>    [0] =&gt; A:C:1<br>    [1] =&gt; B:C:a<br>    [2] =&gt; A:2<br>    [3] =&gt; B:b<br>    [4] =&gt; A:3<br>    [5] =&gt; A<br>    [6] =&gt; B<br>    [7] =&gt; A:4<br>)<br></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.preg-filter-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><a href="https://www.php.net/manual/zh/pcre.pattern.php" class="link">PCRE 模式</a></li>    <li class="member"><span class="function">{@link preg_quote()} - 转义正则表达式字符</span></li>    <li class="member"><span class="function">{@link preg_replace()} - 执行一个正则表达式的搜索和替换</span></li>    <li class="member"><span class="function">{@link preg_replace_callback()} - 执行一个正则表达式搜索并且使用一个回调进行替换</span></li>    <li class="member"><span class="function">{@link preg_grep()} - 返回匹配模式的数组条目</span></li>    <li class="member"><span class="function">{@link preg_last_error()} - 返回最后一个PCRE正则执行产生的错误代码</span></li>   </ul>  </span> </div></div>