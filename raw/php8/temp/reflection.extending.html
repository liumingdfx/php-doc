<div id="reflection.extending" class="chapter"> <h1>扩展</h1> <p class="para">  如果你想创建内建类的专门版本（比如说，在创建并导出高亮 HTML 时，以易于访问的成员变量来取代方法或使用实用的方法），  你可以继续并扩展它们。 </p> <div class="example" id="">  <p><strong>示例 #1 扩展内置的类</strong></p>  <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">//*<br /> * My Reflection_Method class<br /> <br /></span><span style="color: #007700">class </span><span style="color: #9876AA">My_Reflection_Method </span><span style="color: #007700">extends </span><span style="color: #9876AA">ReflectionMethod<br /></span><span style="color: #007700">{<br />    public </span><span style="color: #9876AA">$visibility </span><span style="color: #007700">= array();<br /><br />    public function </span><span style="color: #9876AA">__construct</span><span style="color: #007700">(</span><span style="color: #9876AA">$o</span><span style="color: #007700">, </span><span style="color: #9876AA">$m</span><span style="color: #007700">)<br />    {<br />        </span><span style="color: #9876AA">parent</span><span style="color: #007700">::</span><span style="color: #9876AA">__construct</span><span style="color: #007700">(</span><span style="color: #9876AA">$o</span><span style="color: #007700">, </span><span style="color: #9876AA">$m</span><span style="color: #007700">);<br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">visibility </span><span style="color: #007700">= </span><span style="color: #9876AA">Reflection</span><span style="color: #007700">::</span><span style="color: #9876AA">getModifierNames</span><span style="color: #007700">(</span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getModifiers</span><span style="color: #007700">());<br />    }<br />}<br /><br /></span><span style="color: #FF8000">//*<br /> * Demo class #1<br /> *<br /> <br /></span><span style="color: #007700">class </span><span style="color: #9876AA">T </span><span style="color: #007700">{<br />    protected function </span><span style="color: #9876AA">x</span><span style="color: #007700">() {}<br />}<br /><br /></span><span style="color: #FF8000">//*<br /> * Demo class #2<br /> *<br /> <br /></span><span style="color: #007700">class </span><span style="color: #9876AA">U </span><span style="color: #007700">extends </span><span style="color: #9876AA">T </span><span style="color: #007700">{<br />    function </span><span style="color: #9876AA">x</span><span style="color: #007700">() {}<br />}<br /><br /></span><span style="color: #FF8000">// 输出信息<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(new </span><span style="color: #9876AA">My_Reflection_Method</span><span style="color: #007700">(</span><span style="color: #DD0000">'U'</span><span style="color: #007700">, </span><span style="color: #DD0000">'x'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>  </div>  <div class="example-contents"><p>以上示例的输出类似于：</p></div>  <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>object(My_Reflection_Method)#1 (3) {<br>  [&quot;visibility&quot;]=&gt;<br>  array(1) {<br>    [0]=&gt;<br>    string(6) &quot;public&quot;<br>  }<br>  [&quot;name&quot;]=&gt;<br>  string(1) &quot;x&quot;<br>  [&quot;class&quot;]=&gt;<br>  string(1) &quot;U&quot;<br>}<br></span></div>  </div> </div> <div class="caution"><strong class="caution">警告</strong>  <p class="para">   如果你重写了构造函数，记住在写任何插入的代码之前要先调用父类的构造函数。   不这么做将会导致以下的结果：   <span>Fatal error: Internal error: Failed to retrieve the reflection object</span>  </p> </div></div>