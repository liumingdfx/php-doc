<div id="imagickkernel.addunitykernel" class="refentry"> <div class="refnamediv">  <h1 class="refname">ImagickKernel::addUnityKernel</h1>  <p class="verinfo">(PECL imagick &gt;= 3.3.0)</p><p class="refpurpose"><span class="refname">ImagickKernel::addUnityKernel</span> &mdash; <span class="dc-title">Adds a Unity Kernel to the kernel list</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-imagickkernel.addunitykernel-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>ImagickKernel::addUnityKernel</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">float</span> <span class="parameter" style="color:#3A95FF">$scale</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div>  <p class="para rdfs-comment">   Adds a given amount of the &#039;Unity&#039; Convolution Kernel to the given pre-scaled   and normalized Kernel. This in effect adds that amount of the original image   into the resulting convolution kernel. The resulting effect is to convert the   defined kernels into blended soft-blurs, unsharp kernels or into sharpening kernels.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-imagickkernel.addunitykernel-parameters">  <h3 class="title">参数</h3>  <span>此函数没有参数。</span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-imagickkernel.addunitykernel-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">     </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-imagickkernel.addunitykernel-examples">  <h3 class="title">示例</h3>  <span>    <div class="example" id="">      <p><strong>示例 #1  <span class="function"><strong style="color:#CC7832">ImagickKernel::addUnityKernel()</strong></span></strong></p>      <div class="example-contents">      <div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /><br /><br />    </span><span style="color: #007700">function </span><span style="color: #9876AA">renderKernelTable</span><span style="color: #007700">(</span><span style="color: #9876AA">$matrix</span><span style="color: #007700">) {<br />        </span><span style="color: #9876AA">$output </span><span style="color: #007700">= </span><span style="color: #DD0000">"&lt;table class='infoTable'&gt;"</span><span style="color: #007700">;<br />    <br />        foreach (</span><span style="color: #9876AA">$matrix </span><span style="color: #007700">as </span><span style="color: #9876AA">$row</span><span style="color: #007700">) {<br />            </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"&lt;tr&gt;"</span><span style="color: #007700">;<br />            foreach (</span><span style="color: #9876AA">$row </span><span style="color: #007700">as </span><span style="color: #9876AA">$cell</span><span style="color: #007700">) {<br />                </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"&lt;td style='text-align:left'&gt;"</span><span style="color: #007700">;<br />                if (</span><span style="color: #9876AA">$cell </span><span style="color: #007700">=== </span><span style="color: #9876AA">false</span><span style="color: #007700">) {<br />                    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"false"</span><span style="color: #007700">;<br />                }<br />                else {<br />                    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #9876AA">round</span><span style="color: #007700">(</span><span style="color: #9876AA">$cell</span><span style="color: #007700">, </span><span style="color: #9876AA">3</span><span style="color: #007700">);<br />                }<br />                </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"&lt;/td&gt;"</span><span style="color: #007700">;<br />            }<br />            </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"&lt;/tr&gt;"</span><span style="color: #007700">;<br />        }<br />    <br />        </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"&lt;/table&gt;"</span><span style="color: #007700">;<br />    <br />        return </span><span style="color: #9876AA">$output</span><span style="color: #007700">;<br />    }<br /><br />    </span><span style="color: #9876AA">$matrix </span><span style="color: #007700">= [<br />        [-</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">, -</span><span style="color: #9876AA">1</span><span style="color: #007700">],<br />        [ </span><span style="color: #9876AA">0</span><span style="color: #007700">, </span><span style="color: #9876AA">4</span><span style="color: #007700">,  </span><span style="color: #9876AA">0</span><span style="color: #007700">],<br />        [-</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">, -</span><span style="color: #9876AA">1</span><span style="color: #007700">],<br />    ];<br /><br />    </span><span style="color: #9876AA">$kernel </span><span style="color: #007700">= </span><span style="color: #9876AA">\ImagickKernel</span><span style="color: #007700">::</span><span style="color: #9876AA">fromMatrix</span><span style="color: #007700">(</span><span style="color: #9876AA">$matrix</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">scale</span><span style="color: #007700">(</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">\Imagick</span><span style="color: #007700">::</span><span style="color: #9876AA">NORMALIZE_KERNEL_VALUE</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">= </span><span style="color: #DD0000">"Before adding unity kernel: &lt;br/&gt;"</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #9876AA">renderKernelTable</span><span style="color: #007700">(</span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getMatrix</span><span style="color: #007700">());<br />    </span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">addUnityKernel</span><span style="color: #007700">(</span><span style="color: #9876AA">0.5</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"After adding unity kernel: &lt;br/&gt;"</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #9876AA">renderKernelTable</span><span style="color: #007700">(</span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getMatrix</span><span style="color: #007700">());<br />    <br />    <br />    </span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">scale</span><span style="color: #007700">(</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">\Imagick</span><span style="color: #007700">::</span><span style="color: #9876AA">NORMALIZE_KERNEL_VALUE</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #DD0000">"After renormalizing kernel: &lt;br/&gt;"</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">$output </span><span style="color: #007700">.= </span><span style="color: #9876AA">renderKernelTable</span><span style="color: #007700">(</span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getMatrix</span><span style="color: #007700">());<br /><br />    echo </span><span style="color: #9876AA">$output</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>      </div>    </div>    <div class="example" id="">      <p><strong>示例 #2  <span class="function"><strong style="color:#CC7832">ImagickKernel::addUnityKernel()</strong></span></strong></p>      <div class="example-contents">      <div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #9876AA">addUnityKernel</span><span style="color: #007700">(</span><span style="color: #9876AA">$imagePath</span><span style="color: #007700">) {<br /><br />    </span><span style="color: #9876AA">$matrix </span><span style="color: #007700">= [<br />        [-</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">, -</span><span style="color: #9876AA">1</span><span style="color: #007700">],<br />        [ </span><span style="color: #9876AA">0</span><span style="color: #007700">, </span><span style="color: #9876AA">4</span><span style="color: #007700">,  </span><span style="color: #9876AA">0</span><span style="color: #007700">],<br />        [-</span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">0</span><span style="color: #007700">, -</span><span style="color: #9876AA">1</span><span style="color: #007700">],<br />    ];<br /><br />    </span><span style="color: #9876AA">$kernel </span><span style="color: #007700">= </span><span style="color: #9876AA">ImagickKernel</span><span style="color: #007700">::</span><span style="color: #9876AA">fromMatrix</span><span style="color: #007700">(</span><span style="color: #9876AA">$matrix</span><span style="color: #007700">);<br /><br />    </span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">scale</span><span style="color: #007700">(</span><span style="color: #9876AA">4</span><span style="color: #007700">, </span><span style="color: #9876AA">\Imagick</span><span style="color: #007700">::</span><span style="color: #9876AA">NORMALIZE_KERNEL_VALUE</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">$kernel</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">addUnityKernel</span><span style="color: #007700">(</span><span style="color: #9876AA">0.5</span><span style="color: #007700">);<br /><br /><br />    </span><span style="color: #9876AA">$imagick </span><span style="color: #007700">= new </span><span style="color: #9876AA">\Imagick</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #9876AA">$imagePath</span><span style="color: #007700">));<br />    </span><span style="color: #9876AA">$imagick</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$kernel</span><span style="color: #007700">);<br />    </span><span style="color: #9876AA">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type: image/jpg"</span><span style="color: #007700">);<br />    echo </span><span style="color: #9876AA">$imagick</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageBlob</span><span style="color: #007700">();<br /><br />}<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>      </div>    </div>  </span> </div></div>