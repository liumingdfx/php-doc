<div id="imagick.distortimage" class="refentry"> <div class="refnamediv">  <h1 class="refname">Imagick::distortImage</h1>  <p class="verinfo">(PECL imagick 2 &gt;= 2.0.1, PECL imagick 3)</p><p class="refpurpose"><span class="refname">Imagick::distortImage</span> &mdash; <span class="dc-title">Distorts an image using various distortion methods</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-imagick.distortimage-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>Imagick::distortImage</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$method</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$arguments</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$bestfit</span></span>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   Distorts an image using various distortion methods, by mapping color   lookups of the source image to a new destination image usually of the same   size as the source image, unless &#039;bestfit&#039; is set to <strong><span>true</span></strong>.  </p>  <p class="para">   If &#039;bestfit&#039; is enabled, and distortion allows it, the destination image   is adjusted to ensure the whole source &#039;image&#039; will just fit within the   final destination image, which will be sized and offset accordingly. Also   in many cases the virtual offset of the source image will be taken into   account in the mapping.  </p>  <p class="para">   此方法在Imagick基于ImageMagick 6.3.6以上版本编译时可用。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-imagick.distortimage-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">method</span></dt>     <dd>      <p class="para">       The method of image distortion. See <a href="https://www.php.net/manual/zh/imagick.constants.php#imagick.constants.distortion" class="link">distortion constants</a>      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">arguments</span></dt>     <dd>      <p class="para">       The arguments for this distortion method      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">bestfit</span></dt>     <dd>      <p class="para">       Attempt to resize destination to fit distorted source      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-imagick.distortimage-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-imagick.distortimage-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   错误时抛出 ImagickException。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-imagick.distortimage-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 Using <span class="function"><strong style="color:#CC7832">Imagick::distortImage()</strong></span>:</strong></p>    <div class="example-contents"><p>     Distort an image and display to the browser.    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Create new object <br /></span><span style="color: #9876AA">$im </span><span style="color: #007700">= new </span><span style="color: #9876AA">Imagick</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// Create new checkerboard pattern <br /></span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">newPseudoImage</span><span style="color: #007700">(</span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #9876AA">100</span><span style="color: #007700">, </span><span style="color: #DD0000">"pattern:checkerboard"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Set the image format to png <br /></span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setImageFormat</span><span style="color: #007700">(</span><span style="color: #DD0000">'png'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Fill new visible areas with transparent <br /></span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setImageVirtualPixelMethod</span><span style="color: #007700">(</span><span style="color: #9876AA">Imagick</span><span style="color: #007700">::</span><span style="color: #9876AA">VIRTUALPIXELMETHOD_TRANSPARENT</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Activate matte <br /></span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setImageMatte</span><span style="color: #007700">(</span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Control points for the distortion <br /></span><span style="color: #9876AA">$controlPoints </span><span style="color: #007700">= array( </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">10</span><span style="color: #007700">, <br />                        </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">5</span><span style="color: #007700">,<br /><br />                        </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageHeight</span><span style="color: #007700">() - </span><span style="color: #9876AA">20</span><span style="color: #007700">,<br />                        </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageHeight</span><span style="color: #007700">() - </span><span style="color: #9876AA">5</span><span style="color: #007700">,<br /><br />                        </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageWidth</span><span style="color: #007700">() - </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">10</span><span style="color: #007700">,<br />                        </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageWidth</span><span style="color: #007700">() - </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">20</span><span style="color: #007700">,<br /><br />                        </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageWidth</span><span style="color: #007700">() - </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageHeight</span><span style="color: #007700">() - </span><span style="color: #9876AA">10</span><span style="color: #007700">,<br />                        </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageWidth</span><span style="color: #007700">() - </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getImageHeight</span><span style="color: #007700">() - </span><span style="color: #9876AA">30</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Perform the distortion                        <br /></span><span style="color: #9876AA">$im</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">distortImage</span><span style="color: #007700">(</span><span style="color: #9876AA">Imagick</span><span style="color: #007700">::</span><span style="color: #9876AA">DISTORTION_PERSPECTIVE</span><span style="color: #007700">, </span><span style="color: #9876AA">$controlPoints</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Ouput the image <br /></span><span style="color: #9876AA">header</span><span style="color: #007700">(</span><span style="color: #DD0000">"Content-Type: image/png"</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$im</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="mediaobject">          <div class="imageobject">      <img src="images/c0d23d2d6769e53e24a1b3136c064577-distortImage.png" alt="Output of example : Using Imagick::distortImage()" width="111" height="150" />     </div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-imagick.distortimage-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link Imagick::blurImage()} - Adds blur filter to image</span></li>    <li class="member"><span class="function">{@link Imagick::motionBlurImage()} - Simulates motion blur</span></li>    <li class="member"><span class="function">{@link Imagick::radialBlurImage()} - Radial blurs an image</span></li>   </ul>  </span> </div></div>