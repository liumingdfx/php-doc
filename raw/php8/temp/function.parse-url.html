<div id="function.parse-url" class="refentry"> <div class="refnamediv">  <h1 class="refname">parse_url</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">parse_url</span> &mdash; <span class="dc-title">解析 URL，返回其组成部分</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.parse-url-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>parse_url</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$url</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$component</span><span class="initializer"> = -1</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span>|<span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">null</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   本函数解析 URL 并返回关联数组，包含在 URL 中出现的各种组成部分。数组的元素值<em>不会</em>   URL 解码。  </p>  <p class="para">   本函数<strong>不是</strong>用来验证给定 URL   的有效性的，只是将其分解为下面列出的部分。也会接受不完整或无效的 URL，<span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 会尝试尽量正确解析。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.parse-url-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">url</span></dt>     <dd>      <p class="para">       要解析的 URL。      </p>     </dd>       </dl>   <dl>         <dt><span class="parameter" style="color:#3A95FF">component</span></dt>     <dd>      <p class="para">       指定 <strong><span>PHP_URL_SCHEME</span></strong>、<strong><span>PHP_URL_HOST</span></strong>、<strong><span>PHP_URL_PORT</span></strong>、<strong><span>PHP_URL_USER</span></strong>、<strong><span>PHP_URL_PASS</span></strong>、<strong><span>PHP_URL_PATH</span></strong>、<strong><span>PHP_URL_QUERY</span></strong>       或 <strong><span>PHP_URL_FRAGMENT</span></strong> 的其中一个来获取 URL 中指定的部分的       <span class="type" style="color:#EAB766">string</span>。（当指定为 <strong><span>PHP_URL_PORT</span></strong> 时，返回值将是 <span class="type" style="color:#EAB766">int</span>）。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.parse-url-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   对严重不合格的 URL，<span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 可能会返回 <strong><span>false</span></strong>。   </p>     <p class="para">    如果省略了 <span class="parameter" style="color:#3A95FF">component</span> 参数，将返回关联数组 <span class="type" style="color:#EAB766">array</span>。至少会有一个元素出现在数组中。数组中可能的键有以下几种：   <ul class="itemizedlist">    <li class="listitem">     <span class="simpara">      <var class="varname">scheme</var>——如 http     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">host</var>      </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">port</var>     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">user</var>     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">pass</var>     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">path</var>     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">query</var>——在问号 <span>?</span> 之后     </span>    </li>    <li class="listitem">     <span class="simpara">      <var class="varname">fragment</var>——在注释符号 <span>#</span> 之后     </span>    </li>   </ul>  </p>  <p class="para">   如果指定 <span class="parameter" style="color:#3A95FF">component</span> 参数，<span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 返回 <span class="type" style="color:#EAB766">string</span> （或在指定为   <strong><span>PHP_URL_PORT</span></strong> 时返回 <span class="type" style="color:#EAB766">int</span>）而不是 <span class="type" style="color:#EAB766">array</span>。如果 URL   中指定的组成部分不存在，将会返回 <strong><span>null</span></strong>。自 PHP 8.0.0 起，<span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 开始对 query 和 fragment   区分不存在和空值。  </p>  <p class="para">   <div class="informalexample">    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>http://example.com/foo → query = null, fragment = null<br>http://example.com/foo? → query = &quot;&quot;,   fragment = null<br>http://example.com/foo# → query = null, fragment = &quot;&quot;<br>http://example.com/foo?# → query = &quot;&quot;,   fragment = &quot;&quot;<br></span></div>    </div>   </div>  </p>  <p class="para">    之前所有的情况都会导致 query 和 fragment 为 <strong><span>null</span></strong>。  </p>  <p class="para">   注意组件中的控制字符（参见 <span class="function">{@link ctype_cntrl()}</span>）替换为下划线（<span>_</span>）。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.parse-url-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 现在对 query 和 fragment   区分不存在和空值。      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.parse-url-examples">  <h3 class="title">示例</h3>  <span>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 例子</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$url </span><span style="color: #007700">= </span><span style="color: #DD0000">'http://username:password@hostname:9090/path?arg=value#anchor'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_SCHEME</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_USER</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_PASS</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_HOST</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_PORT</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_PATH</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_QUERY</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">, </span><span style="color: #9876AA">PHP_URL_FRAGMENT</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(8) {<br>  [&quot;scheme&quot;]=&gt;<br>  string(4) &quot;http&quot;<br>  [&quot;host&quot;]=&gt;<br>  string(8) &quot;hostname&quot;<br>  [&quot;port&quot;]=&gt;<br>  int(9090)<br>  [&quot;user&quot;]=&gt;<br>  string(8) &quot;username&quot;<br>  [&quot;pass&quot;]=&gt;<br>  string(8) &quot;password&quot;<br>  [&quot;path&quot;]=&gt;<br>  string(5) &quot;/path&quot;<br>  [&quot;query&quot;]=&gt;<br>  string(9) &quot;arg=value&quot;<br>  [&quot;fragment&quot;]=&gt;<br>  string(6) &quot;anchor&quot;<br>}<br>string(4) &quot;http&quot;<br>string(8) &quot;username&quot;<br>string(8) &quot;password&quot;<br>string(8) &quot;hostname&quot;<br>int(9090)<br>string(5) &quot;/path&quot;<br>string(9) &quot;arg=value&quot;<br>string(6) &quot;anchor&quot;<br></span></div>   </div>  </div> </span>   <p class="para">   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 解析丢失协议的例子</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$url </span><span style="color: #007700">= </span><span style="color: #DD0000">'//www.example.com/path?googleguy=googley'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 在 5.4.7 之前这会输出路径 "//www.example.com/path"<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">parse_url</span><span style="color: #007700">(</span><span style="color: #9876AA">$url</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(3) {<br>  [&quot;host&quot;]=&gt;<br>  string(15) &quot;www.example.com&quot;<br>  [&quot;path&quot;]=&gt;<br>  string(5) &quot;/path&quot;<br>  [&quot;query&quot;]=&gt;<br>  string(17) &quot;googleguy=googley&quot;<br>}<br></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.parse-url-notes">  <h3 class="title">注释</h3>  <div class="caution"><strong class="caution">警告</strong>   <p class="para">    此函数可能无法对相对和无效 URL 提供正确的结果，结果甚至可能会跟常见的 HTTP 客户端行为不匹配。如果需要解析来自不受信任输入的    URL，则需要另外验证，例如，使用带 <strong><span>FILTER_VALIDATE_URL</span></strong>过滤器的 <span class="function">{@link filter_var()}</span>。   </p>  </div>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    <span class="function"><strong style="color:#CC7832">parse_url()</strong></span> 是专门用来解析 URL 而不是 URI 的。不过为遵从 PHP    向后兼容的需要有个例外，对 file:// 协议允许三个斜线（file:///...）。其它任何协议都不能这样。   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.parse-url-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link pathinfo()} - 返回文件路径的信息</span></li>    <li class="member"><span class="function">{@link parse_str()} - 将字符串解析成多个变量</span></li>    <li class="member"><span class="function">{@link http_build_query()} - 生成 URL-encode 之后的请求字符串</span></li>    <li class="member"><span class="function">{@link dirname()} - 返回路径中的目录部分</span></li>    <li class="member"><span class="function">{@link basename()} - 返回路径中的文件名部分</span></li>    <li class="member"><a href="http://www.faqs.org/rfcs/rfc3986" class="link external">&raquo;&nbsp;RFC 3986</a></li>   </ul>  </span> </div></div>