<div id="ev.watcher-callbacks" class="chapter"> <h1>Watcher callbacks</h1> <p class="para">  All watchers can be active(waiting for events) or inactive(paused). Only  active watchers will have their callbacks invoked. All callbacks will be  called with at least two arguments:  <span class="parameter" style="color:#3A95FF">watcher</span>  - the watcher, and  <span class="parameter" style="color:#3A95FF">revents</span>  a bitmask of received events. </p> <p class="para">  Watcher callbacks are passed to the watcher constructors (the classes derived  from  <span class="classname"><a href="https://www.php.net/manual/zh/class.evwatcher.php" class="classname">EvWatcher</a></span>  -  <span class="methodname" style="color:#CC7832">{@link EvCheck::__construct()}</span>  ,  <span class="methodname" style="color:#CC7832">{@link EvChild::__construct()}</span>  etc.). A watcher callback should match the following prototype: </p> <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832"><strong>callback</strong></span>(<span class="methodparam">   <span class="type" style="color:#EAB766">object</span>    <span class="parameter" style="color:#3A95FF">$watcher</span>   <span class="initializer"> = NULL</span>  </span>, <span class="methodparam">   <span class="type" style="color:#EAB766">int</span>    <span class="parameter" style="color:#3A95FF">$revents</span>   <span class="initializer"> = NULL</span>  </span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div> <p class="para">  <dl>       <dt>     <span class="parameter" style="color:#3A95FF">watcher</span>    </dt>    <dd>     <p class="para">      The watcher instance(of a class extending      <span class="classname"><a href="https://www.php.net/manual/zh/class.evwatcher.php" class="classname">EvWatcher</a></span>      ).     </p>    </dd>          <dt>     <span class="parameter" style="color:#3A95FF">revents</span>    </dt>    <dd>     <p class="para">      <a href="https://www.php.net/manual/zh/class.ev.php#ev.constants.watcher-revents" class="link">Watcher received events</a>      .     </p>    </dd>     </dl> </p> <p class="para">  Each watcher type has its associated bit in  <span class="parameter" style="color:#3A95FF">revents</span>  , so one can use the same callback for multiple watchers. The event mask is  named after the type, i.e.  <span class="classname"><a href="https://www.php.net/manual/zh/class.evchild.php" class="classname">EvChild</a></span>  (or  <span class="methodname" style="color:#CC7832">{@link EvLoop::child()}</span>  ) sets  <strong><span>EV::CHILD</span></strong>  ,  <span class="classname"><a href="https://www.php.net/manual/zh/class.evprepare.php" class="classname">EvPrepare</a></span>  (or  <span class="methodname" style="color:#CC7832">{@link EvLoop::prepare()}</span>  ) sets  <strong><span>Ev::PREPARE</span></strong>  ,  <span class="classname"><a href="https://www.php.net/manual/zh/class.evperiodic.php" class="classname">EvPeriodic</a></span>  (or  <span class="methodname" style="color:#CC7832">{@link EvLoop::periodic()}</span>  ) sets  <strong><span>Ev::PERIODIC</span></strong>  and so on, with the exception of I/O events (which can set both  <strong><span>Ev::READ</span></strong>  and  <strong><span>Ev::WRITE</span></strong>  bits). </p></div>