<div id="class.serializable" class="reference"> <h1 class="title">Serializable 接口</h1>  <div class="partintro"><p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8)</p>  <div class="section" id="serializable.intro">   <h2 class="title">简介</h2>   <p class="para">    自定义序列化的接口。   </p>   <p class="para">    实现此接口的类将不再支持 <a href="https://www.php.net/manual/zh/language.oop5.magic.php#object.sleep" class="link">__sleep()</a> 和     <a href="https://www.php.net/manual/zh/language.oop5.magic.php#object.wakeup" class="link">__wakeup()</a> 。    不论何时，只要有实例需要被序列化， serialize 方法都将被调用。它不会调用     __destruct()，除非在该方法中编写了相关功能，否则它也不会有副作用（side effect）。    当数据被反序列化时，类将被感知并且调用合适的 unserialize()     方法而不是调用 __construct()。如果需要执行标准的构造器，应该在这个方法中进行处理。   </p>   <div class="warning"><strong class="warning">警告</strong>    <p class="para">     从 PHP 8.1.0 起，实现 <span class="interfacename"><strong class="interfacename">Serializable</strong></span> 接口的类如果没有同时实现      <a href="https://www.php.net/manual/zh/language.oop5.magic.php#object.serialize" class="link">__serialize()</a>、<a href="https://www.php.net/manual/zh/language.oop5.magic.php#object.unserialize" class="link">__unserialize()</a>      方法，将产生弃用警告。        </p>   </div>  </div>  <div class="section" id="serializable.synopsis">   <h2 class="title">接口摘要</h2>   <div class="classsynopsis"><div class="classsynopsisinfo">         <span class="modifier">interface</span> <strong class="interfacename"><strong class="interfacename">Serializable</strong></strong> {</div>        <div class="classsynopsisinfo classsynopsisinfo_comment">// 方法 </div>    <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/serializable.serialize.php" class="methodname" style="color:#CC7832">serialize</a></span>(): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766">string</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/serializable.unserialize.php" class="methodname" style="color:#CC7832">unserialize</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$data</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div>   }</div>  </div>  <div class="section" id="serializable.examples">   <div class="example" id="example-1175">    <p><strong>示例 #1 基础用法</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">class </span><span style="color: #9876AA">obj </span><span style="color: #007700">implements </span><span style="color: #9876AA">Serializable </span><span style="color: #007700">{<br />    private </span><span style="color: #9876AA">$data</span><span style="color: #007700">;<br />    public function </span><span style="color: #9876AA">__construct</span><span style="color: #007700">() {<br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">data </span><span style="color: #007700">= </span><span style="color: #DD0000">"My private data"</span><span style="color: #007700">;<br />    }<br />    public function </span><span style="color: #9876AA">serialize</span><span style="color: #007700">() {<br />        return </span><span style="color: #9876AA">serialize</span><span style="color: #007700">(</span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">data</span><span style="color: #007700">);<br />    }<br />    public function </span><span style="color: #9876AA">unserialize</span><span style="color: #007700">(</span><span style="color: #9876AA">$data</span><span style="color: #007700">) {<br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">data </span><span style="color: #007700">= </span><span style="color: #9876AA">unserialize</span><span style="color: #007700">(</span><span style="color: #9876AA">$data</span><span style="color: #007700">);<br />    }<br />    public function </span><span style="color: #9876AA">getData</span><span style="color: #007700">() {<br />        return </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">data</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #9876AA">$obj </span><span style="color: #007700">= new </span><span style="color: #9876AA">obj</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$ser </span><span style="color: #007700">= </span><span style="color: #9876AA">serialize</span><span style="color: #007700">(</span><span style="color: #9876AA">$obj</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$ser</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$newobj </span><span style="color: #007700">= </span><span style="color: #9876AA">unserialize</span><span style="color: #007700">(</span><span style="color: #9876AA">$ser</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$newobj</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getData</span><span style="color: #007700">());<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>string(38) &quot;C:3:&quot;obj&quot;:23:{s:15:&quot;My private data&quot;;}&quot;<br>string(15) &quot;My private data&quot;<br></span></div>    </div>   </div>  </div> </div>  <h2>目录</h2><ul class="chunklist chunklist_reference"><li>{@link Serializable::serialize} — 对象的字符串表示</li><li>{@link Serializable::unserialize} — 构造对象</li></ul></div>