<div id="mysqli.construct" class="refentry"> <div class="refnamediv">  <h1 class="refname">mysqli::__construct</h1>  <h1 class="refname">mysqli::connect</h1>  <h1 class="refname">mysqli_connect</h1>  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mysqli::__construct</span> -- <span class="refname">mysqli::connect</span> -- <span class="refname">mysqli_connect</span> &mdash; <span class="dc-title">Open a new connection to the MySQL server</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-mysqli.construct-description">  <h3 class="title">说明</h3>  <p class="para">面向对象风格</p>  <div class="constructorsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>mysqli::__construct</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$hostname</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$username</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$password</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$database</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$port</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$socket</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>)</div>  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832">{@link mysqli::connect}</span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$hostname</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$username</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$password</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$database</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$port</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$socket</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">过程化风格</p>  <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832">{@link mysqli_connect}</span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$hostname</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$username</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$password</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$database</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$port</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$socket</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.mysqli.php" class="type mysqli" style="color:#EAB766">mysqli</a></span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   Opens a connection to the MySQL Server.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-mysqli.construct-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">hostname</span></dt>     <dd>      <p class="para">       Can be either a host name or an IP address. When passing <strong><span>null</span></strong>, the value is retrieved from       <a href="https://www.php.net/manual/zh/mysqli.configuration.php#ini.mysqli.default-host" class="link">mysqli.default_host</a>.       When possible, pipes will be used instead of the TCP/IP protocol.       The TCP/IP protocol is used if a host name and port number are provided together e.g. <span>localhost:3308</span>.      </p>      <p class="para">       Prepending host by <span>p:</span> opens a persistent connection.       <span class="function"><a href="https://www.php.net/manual/zh/mysqli.change-user.php" class="function">mysqli_change_user()</a></span> is automatically called on       connections opened from the connection pool.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">username</span></dt>     <dd>      <p class="para">       The MySQL username or <strong><span>null</span></strong> to assume the username based on the       <a href="https://www.php.net/manual/zh/mysqli.configuration.php#ini.mysqli.default-user" class="link">mysqli.default_user</a> ini option.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">password</span></dt>     <dd>      <p class="para">       The MySQL password or <strong><span>null</span></strong> to assume the password based on the       <a href="https://www.php.net/manual/zh/mysqli.configuration.php#ini.mysqli.default-pw" class="link">mysqli.default_pw</a> ini option.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">database</span></dt>     <dd>      <p class="para">       The default database to be used when performing queries or <strong><span>null</span></strong>.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">port</span></dt>     <dd>      <p class="para">       The port number to attempt to connect to the MySQL server or <strong><span>null</span></strong> to assume the port based on the       <a href="https://www.php.net/manual/zh/mysqli.configuration.php#ini.mysqli.default-port" class="link">mysqli.default_port</a> ini option.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">socket</span></dt>     <dd>      <p class="para">       The socket or named pipe that should be used or <strong><span>null</span></strong> to assume the socket based on the       <a href="https://www.php.net/manual/zh/mysqli.configuration.php#ini.mysqli.default-socket" class="link">mysqli.default_socket</a> ini option.      </p>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        Specifying the <span class="parameter" style="color:#3A95FF">socket</span> parameter will not        explicitly determine the type of connection to be used when        connecting to the MySQL server. How the connection is made to the        MySQL database is determined by the <span class="parameter" style="color:#3A95FF">hostname</span>        parameter.       </p>      </p></blockquote>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-mysqli.construct-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   <span class="function">{@link mysqli_connect()}</span> returns an object which represents the connection to a MySQL Server,    或者在失败时返回 <strong><span>false</span></strong>.  </p>  <p class="para">   <span class="methodname" style="color:#CC7832">{@link mysqli::connect()}</span> returns <strong><span>true</span></strong> on success 或者在失败时返回 <strong><span>false</span></strong>.   Prior to PHP 8.1.0, returns <strong><span>null</span></strong> on success.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-mysqli.construct-errors">  <h3 class="title">错误／异常</h3>  <p class="para">If mysqli error reporting is enabled (<strong><span>MYSQLI_REPORT_ERROR</span></strong>) and the requested operation fails,a warning is generated. If, in addition, the mode is set to <strong><span>MYSQLI_REPORT_STRICT</span></strong>,a <span class="classname"><a href="https://www.php.net/manual/zh/class.mysqli-sql-exception.php" class="classname">mysqli_sql_exception</a></span> is thrown instead.</p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-mysqli.construct-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.1.0</td>       <td>        <span class="methodname" style="color:#CC7832">{@link mysqli::connect()}</span> now returns <strong><span>true</span></strong> instead of <strong><span>null</span></strong> on success.       </td>      </tr>      <tr>       <td>7.4.0</td>       <td>        All parameters are now nullable.       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-mysqli.construct-examples">  <h3 class="title">示例</h3>  <div class="example" id="example-4367">   <p><strong>示例 #1 <span class="methodname" style="color:#CC7832"><strong>mysqli::__construct()</strong></span> example</strong></p>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #FF8000">// You should enable error reporting for mysqli before attempting to make a connection <br /></span><span style="color: #9876AA">mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Set the desired charset after establishing a connection <br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">'utf8mb4'</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Success... %s\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">host_info</span><span style="color: #007700">);</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #FF8000">// You should enable error reporting for mysqli before attempting to make a connection <br /></span><span style="color: #9876AA">mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= </span><span style="color: #9876AA">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Set the desired charset after establishing a connection <br /></span><span style="color: #9876AA">mysqli_set_charset</span><span style="color: #007700">(</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8mb4'</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Success... %s\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">mysqli_get_host_info</span><span style="color: #007700">(</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">));</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例的输出类似于：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Success... localhost via TCP/IP<br></span></div>   </div>  </div>  <div class="example" id="example-4370">   <p><strong>示例 #2 Extending mysqli class</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #9876AA">FooMysqli </span><span style="color: #007700">extends </span><span style="color: #9876AA">mysqli </span><span style="color: #007700">{<br />    public function </span><span style="color: #9876AA">__construct</span><span style="color: #007700">(</span><span style="color: #9876AA">$host</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$pass</span><span style="color: #007700">, </span><span style="color: #9876AA">$db</span><span style="color: #007700">, </span><span style="color: #9876AA">$port</span><span style="color: #007700">, </span><span style="color: #9876AA">$socket</span><span style="color: #007700">, </span><span style="color: #9876AA">$charset</span><span style="color: #007700">) {<br />        </span><span style="color: #9876AA">mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_ERROR </span><span style="color: #007700">| </span><span style="color: #9876AA">MYSQLI_REPORT_STRICT</span><span style="color: #007700">);<br />        </span><span style="color: #9876AA">parent</span><span style="color: #007700">::</span><span style="color: #9876AA">__construct</span><span style="color: #007700">(</span><span style="color: #9876AA">$host</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$pass</span><span style="color: #007700">, </span><span style="color: #9876AA">$db</span><span style="color: #007700">, </span><span style="color: #9876AA">$port</span><span style="color: #007700">, </span><span style="color: #9876AA">$socket</span><span style="color: #007700">);<br />        </span><span style="color: #9876AA">$this</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">set_charset</span><span style="color: #007700">(</span><span style="color: #9876AA">$charset</span><span style="color: #007700">);<br />    }<br />}<br /><br /></span><span style="color: #9876AA">$db </span><span style="color: #007700">= new </span><span style="color: #9876AA">FooMysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">, </span><span style="color: #9876AA">3306</span><span style="color: #007700">, </span><span style="color: #9876AA">null</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8mb4'</span><span style="color: #007700">);</span></span></span></div>   </div>  </div>  <div class="example" id="example-4373">   <p><strong>示例 #3 Manual error handling</strong></p>   <div class="example-contents"><p>If error reporting is disabled, the developer is responsible for checking and handling failures</p></div>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />error_reporting</span><span style="color: #007700">(</span><span style="color: #9876AA">0</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_OFF</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br />if (</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect_errno</span><span style="color: #007700">) {<br />    throw new </span><span style="color: #9876AA">RuntimeException</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysqli connection error: ' </span><span style="color: #007700">. </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect_error</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">// Set the desired charset after establishing a connection <br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">set_charset</span><span style="color: #007700">(</span><span style="color: #DD0000">'utf8mb4'</span><span style="color: #007700">);<br />if (</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">errno</span><span style="color: #007700">) {<br />    throw new </span><span style="color: #9876AA">RuntimeException</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysqli error: ' </span><span style="color: #007700">. </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">error</span><span style="color: #007700">);<br />}</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />error_reporting</span><span style="color: #007700">(</span><span style="color: #9876AA">0</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">mysqli_report</span><span style="color: #007700">(</span><span style="color: #9876AA">MYSQLI_REPORT_OFF</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$mysqli </span><span style="color: #007700">= </span><span style="color: #9876AA">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'localhost'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_user'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_password'</span><span style="color: #007700">, </span><span style="color: #DD0000">'my_db'</span><span style="color: #007700">);<br />if (</span><span style="color: #9876AA">mysqli_connect_errno</span><span style="color: #007700">()) {<br />    throw new </span><span style="color: #9876AA">RuntimeException</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysqli connection error: ' </span><span style="color: #007700">. </span><span style="color: #9876AA">mysqli_connect_error</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #FF8000">// Set the desired charset after establishing a connection <br /></span><span style="color: #9876AA">mysqli_set_charset</span><span style="color: #007700">(</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8mb4'</span><span style="color: #007700">);<br />if (</span><span style="color: #9876AA">mysqli_errno</span><span style="color: #007700">(</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">)) {<br />    throw new </span><span style="color: #9876AA">RuntimeException</span><span style="color: #007700">(</span><span style="color: #DD0000">'mysqli error: ' </span><span style="color: #007700">. </span><span style="color: #9876AA">mysqli_error</span><span style="color: #007700">(</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">));<br />}</span></span></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-mysqli.construct-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>: <p class="para">MySQLnd 总是使用服务器的默认字符集。此字符集在连接握手／认证时发送，并被 mysqlnd使用。</p><p class="para">Libmysqlclient 使用 <var class="filename">my.cnf</var> 中的默认字符集或者由在调用<span class="function"><a href="https://www.php.net/manual/zh/mysqli.init.php" class="function">mysqli_init()</a></span> 之后，<span class="function"><a href="https://www.php.net/manual/zh/mysqli.real-connect.php" class="function">mysqli_real_connect()</a></span>之前先调用 <span class="function"><a href="https://www.php.net/manual/zh/mysqli.options.php" class="function">mysqli_options()</a></span> 来指定。</p></p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    面向对象风格 only: If the connection fails, an object is still returned. To check     whether the connection failed, use either the     <span class="function"><a href="https://www.php.net/manual/zh/mysqli.connect-error.php" class="function">mysqli_connect_error()</a></span> function or the <a href="https://www.php.net/manual/zh/mysqli.connect-error.php" class="link">mysqli-&gt;connect_error</a> property as in     the preceding examples.   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    If it is necessary to set options, such as the connection timeout,    <span class="function"><a href="https://www.php.net/manual/zh/mysqli.real-connect.php" class="function">mysqli_real_connect()</a></span> must be used instead.   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    Calling the constructor with no parameters is the same as calling    <span class="function"><a href="https://www.php.net/manual/zh/mysqli.init.php" class="function">mysqli_init()</a></span>.   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    Error &quot;Can&#039;t create TCP/IP socket (10106)&quot; usually means that the <a href="https://www.php.net/manual/zh/ini.core.php#ini.variables-order" class="link">variables_order</a> configure directive    doesn&#039;t contain character <span>E</span>. On Windows, if the    environment is not copied the <span>SYSTEMROOT</span> environment    variable won&#039;t be available and PHP will have problems loading Winsock.   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-mysqli.construct-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli.real-connect.php" class="function" rel="rdfs-seeAlso">mysqli_real_connect()</a> - 建立一个 MySQL 服务器连接</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli.options.php" class="function" rel="rdfs-seeAlso">mysqli_options()</a> - 设置选项</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli.connect-errno.php" class="function" rel="rdfs-seeAlso">mysqli_connect_errno()</a> - Returns the error code from last connect call</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli.connect-error.php" class="function" rel="rdfs-seeAlso">mysqli_connect_error()</a> - Returns a description of the last connection error</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli.close.php" class="function" rel="rdfs-seeAlso">mysqli_close()</a> - 关闭先前打开的数据库连接</span></li>   </ul>  </span> </div></div>