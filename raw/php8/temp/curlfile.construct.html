<div id="curlfile.construct" class="refentry"> <div class="refnamediv">  <h1 class="refname">CURLFile::__construct</h1>  <h1 class="refname">curl_file_create</h1>  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">CURLFile::__construct</span> -- <span class="refname">curl_file_create</span> &mdash; <span class="dc-title">创建 CURLFile 对象</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-curlfile.construct-description">  <h3 class="title">说明</h3>  <p class="para">面向对象风格</p>  <div class="constructorsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>CURLFile::__construct</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$filename</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$mime_type</span><span class="initializer"> = <strong><span>null</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$posted_filename</span><span class="initializer"> = <strong><span>null</span></strong></span></span>)</div>  <p class="para rdfs-comment">过程化风格</p>  <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832"><strong>curl_file_create</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$filename</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$mime_type</span><span class="initializer"> = <strong><span>null</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$posted_filename</span><span class="initializer"> = <strong><span>null</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.curlfile.php" class="type CURLFile" style="color:#EAB766">CURLFile</a></span></div>  <p class="para rdfs-comment">   创建 <span class="classname"><a href="https://www.php.net/manual/zh/class.curlfile.php" class="classname">CURLFile</a></span> 对象，用于使用 <strong><span>CURLOPT_POSTFIELDS</span></strong> 选项上传文件。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-curlfile.construct-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">filename</span></dt>    <dd>     <span>      被上传文件的 路径。     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">mime_type</span></dt>    <dd>     <p class="para">      被上传文件的 MIME 类型。     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">posted_filename</span></dt>    <dd>     <p class="para">      上传数据里面的文件名。     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-curlfile.construct-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回 <span class="classname"><a href="https://www.php.net/manual/zh/class.curlfile.php" class="classname">CURLFile</a></span> 对象。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-curlfile.construct-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="parameter" style="color:#3A95FF">mime_type</span> 和 <span class="parameter" style="color:#3A95FF">posted_filename</span>       现在可以为 null；之前它们的默认值是 <span>0</span>。      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-curlfile.construct-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">CURLFile::__construct()</strong></span> 示例</strong></p>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// http://example.com/upload.php:<br />&lt;?php var_dump($_FILES); ?&gt;<br /><br /><br />// Create a cURL handle<br /></span><span style="color: #9876AA">$ch </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/upload.php'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Create a CURLFile object<br /></span><span style="color: #9876AA">$cfile </span><span style="color: #007700">= new </span><span style="color: #9876AA">CURLFile</span><span style="color: #007700">(</span><span style="color: #DD0000">'cats.jpg'</span><span style="color: #007700">,</span><span style="color: #DD0000">'image/jpeg'</span><span style="color: #007700">,</span><span style="color: #DD0000">'test_name'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Assign POST data<br /></span><span style="color: #9876AA">$data </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'test_file' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">$cfile</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POST</span><span style="color: #007700">,</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POSTFIELDS</span><span style="color: #007700">, </span><span style="color: #9876AA">$data</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Execute the handle<br /></span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// http://example.com/upload.php:<br />&lt;?php var_dump($_FILES); ?&gt;<br /><br /><br />// Create a cURL handle<br /></span><span style="color: #9876AA">$ch </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://example.com/upload.php'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Create a CURLFile object<br /></span><span style="color: #9876AA">$cfile </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_file_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'cats.jpg'</span><span style="color: #007700">,</span><span style="color: #DD0000">'image/jpeg'</span><span style="color: #007700">,</span><span style="color: #DD0000">'test_name'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Assign POST data<br /></span><span style="color: #9876AA">$data </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'test_file' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">$cfile</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POST</span><span style="color: #007700">,</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POSTFIELDS</span><span style="color: #007700">, </span><span style="color: #9876AA">$data</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Execute the handle<br /></span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$ch</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(1) {<br>  [&quot;test_file&quot;]=&gt;<br>  array(5) {<br>    [&quot;name&quot;]=&gt;<br>    string(9) &quot;test_name&quot;<br>    [&quot;type&quot;]=&gt;<br>    string(10) &quot;image/jpeg&quot;<br>    [&quot;tmp_name&quot;]=&gt;<br>    string(14) &quot;/tmp/phpPC9Kbx&quot;<br>    [&quot;error&quot;]=&gt;<br>    int(0)<br>    [&quot;size&quot;]=&gt;<br>    int(46334)<br>  }<br>}<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">CURLFile::__construct()</strong></span> 上传多文件示例</strong></p>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$request </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/upload.php'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POST</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_SAFE_UPLOAD</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POSTFIELDS</span><span style="color: #007700">, [<br />    </span><span style="color: #DD0000">'blob[0]' </span><span style="color: #007700">=&gt; new </span><span style="color: #9876AA">CURLFile</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'first-file.jpg'</span><span style="color: #007700">), </span><span style="color: #DD0000">'image/jpeg'</span><span style="color: #007700">),<br />    </span><span style="color: #DD0000">'blob[1]' </span><span style="color: #007700">=&gt; new </span><span style="color: #9876AA">CURLFile</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'second-file.txt'</span><span style="color: #007700">), </span><span style="color: #DD0000">'text/plain'</span><span style="color: #007700">),<br />    </span><span style="color: #DD0000">'blob[2]' </span><span style="color: #007700">=&gt; new </span><span style="color: #9876AA">CURLFile</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'third-file.exe'</span><span style="color: #007700">), </span><span style="color: #DD0000">'application/octet-stream'</span><span style="color: #007700">),<br />]);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_RETURNTRANSFER</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">curl_getinfo</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">curl_close</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">);</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// procedural<br /></span><span style="color: #9876AA">$request </span><span style="color: #007700">= </span><span style="color: #9876AA">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/upload.php'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POST</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">); <br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_SAFE_UPLOAD</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_POSTFIELDS</span><span style="color: #007700">, [<br />    </span><span style="color: #DD0000">'blob[0]' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">curl_file_create</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'first-file.jpg'</span><span style="color: #007700">), </span><span style="color: #DD0000">'image/jpeg'</span><span style="color: #007700">),<br />    </span><span style="color: #DD0000">'blob[1]' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">curl_file_create</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'second-file.txt'</span><span style="color: #007700">), </span><span style="color: #DD0000">'text/plain'</span><span style="color: #007700">),<br />    </span><span style="color: #DD0000">'blob[2]' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">curl_file_create</span><span style="color: #007700">(</span><span style="color: #9876AA">realpath</span><span style="color: #007700">(</span><span style="color: #DD0000">'third-file.exe'</span><span style="color: #007700">), </span><span style="color: #DD0000">'application/octet-stream'</span><span style="color: #007700">),<br />]);<br /></span><span style="color: #9876AA">curl_setopt</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">, </span><span style="color: #9876AA">CURLOPT_RETURNTRANSFER</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #9876AA">curl_exec</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">curl_getinfo</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">curl_close</span><span style="color: #007700">(</span><span style="color: #9876AA">$request</span><span style="color: #007700">);</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(26) {<br>  [&quot;url&quot;]=&gt;<br>  string(31) &quot;http://www.example.com/upload.php&quot;<br>  [&quot;content_type&quot;]=&gt;<br>  string(24) &quot;text/html; charset=UTF-8&quot;<br>  [&quot;http_code&quot;]=&gt;<br>  int(200)<br>  [&quot;header_size&quot;]=&gt;<br>  int(198)<br>  [&quot;request_size&quot;]=&gt;<br>  int(196)<br>  [&quot;filetime&quot;]=&gt;<br>  int(-1)<br>  [&quot;ssl_verify_result&quot;]=&gt;<br>  int(0)<br>  [&quot;redirect_count&quot;]=&gt;<br>  int(0)<br>  [&quot;total_time&quot;]=&gt;<br>  float(0.060062)<br>  [&quot;namelookup_time&quot;]=&gt;<br>  float(0.028575)<br>  [&quot;connect_time&quot;]=&gt;<br>  float(0.029011)<br>  [&quot;pretransfer_time&quot;]=&gt;<br>  float(0.029121)<br>  [&quot;size_upload&quot;]=&gt;<br>  float(3230730)<br>  [&quot;size_download&quot;]=&gt;<br>  float(811)<br>  [&quot;speed_download&quot;]=&gt;<br>  float(13516)<br>  [&quot;speed_upload&quot;]=&gt;<br>  float(53845500)<br>  [&quot;download_content_length&quot;]=&gt;<br>  float(811)<br>  [&quot;upload_content_length&quot;]=&gt;<br>  float(3230730)<br>  [&quot;starttransfer_time&quot;]=&gt;<br>  float(0.030355)<br>  [&quot;redirect_time&quot;]=&gt;<br>  float(0)<br>  [&quot;redirect_url&quot;]=&gt;<br>  string(0) &quot;&quot;<br>  [&quot;primary_ip&quot;]=&gt;<br>  string(13) &quot;0.0.0.0&quot;<br>  [&quot;certinfo&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;primary_port&quot;]=&gt;<br>  int(80)<br>  [&quot;local_ip&quot;]=&gt;<br>  string(12) &quot;0.0.0.0&quot;<br>  [&quot;local_port&quot;]=&gt;<br>  int(34856)<br>}<br></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-curlfile.construct-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link curl_setopt()} - 设置 cURL 传输选项</span></li>   </ul>  </span> </div></div>