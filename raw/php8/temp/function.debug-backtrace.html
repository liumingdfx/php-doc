<div id="function.debug-backtrace" class="refentry"> <div class="refnamediv">  <h1 class="refname">debug_backtrace</h1>  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">debug_backtrace</span> &mdash; <span class="dc-title">产生一条回溯跟踪(backtrace)</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.debug-backtrace-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>debug_backtrace</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = <strong><span>DEBUG_BACKTRACE_PROVIDE_OBJECT</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$limit</span><span class="initializer"> = 0</span></span>): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">debug_backtrace()</strong></span> 产生一条 PHP 的回溯跟踪(backtrace)。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.debug-backtrace-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">options</span></dt>     <dd>      <p class="para">       这个参数是以下选项的位掩码：       <table class="doctable table">        <caption><strong><span class="function"><strong style="color:#CC7832">debug_backtrace()</strong></span> 选项</strong></caption>                 <tbody class="tbody">          <tr>           <td>DEBUG_BACKTRACE_PROVIDE_OBJECT</td>           <td>            是否填充 &quot;object&quot; 的索引。           </td>          </tr>          <tr>           <td>DEBUG_BACKTRACE_IGNORE_ARGS</td>           <td>            是否忽略 &quot;args&quot; 的索引，包括所有的 function/method 的参数，能够节省内存开销。           </td>          </tr>         </tbody>               </table>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:         <p class="para">         有四种可能的组合：         <table class="doctable table">          <caption><strong><span class="function"><strong style="color:#CC7832">debug_backtrace()</strong></span> 选项</strong></caption>                     <tbody class="tbody">            <tr>             <td><span>debug_backtrace()</span></td>             <td rowspan="3" style="vertical-align: middle;">              两个索引都有             </td>            </tr>            <tr>             <td><span>debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT)</span></td>            </tr>            <tr>             <td><span>debug_backtrace(1)</span></td>            </tr>            <tr>             <td><span>debug_backtrace(0)</span></td>             <td style="vertical-align: middle;">              忽略索引 <span>&quot;object&quot;</span> 和填充索引 <span>&quot;args&quot;</span>。             </td>            </tr>            <tr>             <td><span>debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS)</span></td>             <td rowspan="2" style="vertical-align: middle;">              忽略索引 <span>&quot;object&quot;</span> <em>和</em> 索引 <span>&quot;args&quot;</span>。             </td>            </tr>            <tr>             <td><span>debug_backtrace(2)</span></td>            </tr>            <tr>             <td><span>debug_backtrace(DEBUG_BACKTRACE_PROVIDE_OBJECT|DEBUG_BACKTRACE_IGNORE_ARGS)</span></td>             <td rowspan="2" style="vertical-align: middle;">              填充索引 <span>&quot;object&quot;</span> <em>和</em>忽略索引 <span>&quot;args&quot;</span>。             </td>            </tr>            <tr>             <td><span>debug_backtrace(3)</span></td>            </tr>           </tbody>                   </table>        </p>       </p></blockquote>      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">limit</span></dt>     <dd>      <p class="para">       这个参数能够用于限制返回堆栈帧的数量。默认为（<span class="parameter" style="color:#3A95FF">limit</span>=<span>0</span>），返回所有的堆栈帧。      </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.debug-backtrace-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回一个包含众多关联数组的 <span class="type" style="color:#EAB766">array</span>。   以下为有可能返回的元素：  </p>  <p class="para">   <table class="doctable table">    <caption><strong>有可能从 <span class="function"><strong style="color:#CC7832">debug_backtrace()</strong></span> 返回的元素</strong></caption>         <thead>      <tr>       <th>名字</th>       <th>类型</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>function</td>       <td><span class="type" style="color:#EAB766">string</span></td>       <td>        当前的函数名，参见：<a href="https://www.php.net/manual/zh/language.constants.predefined.php" class="link">__FUNCTION__</a>。       </td>      </tr>      <tr>       <td>line</td>       <td><span class="type" style="color:#EAB766">int</span></td>       <td>        当前的行号。参见：<a href="https://www.php.net/manual/zh/language.constants.predefined.php" class="link">__LINE__</a>。       </td>      </tr>      <tr>       <td>file</td>       <td><span class="type" style="color:#EAB766">string</span></td>       <td>        当前的文件名。参见：<a href="https://www.php.net/manual/zh/language.constants.predefined.php" class="link">__FILE__</a>。       </td>      </tr>      <tr>       <td>class</td>       <td><span class="type" style="color:#EAB766">string</span></td>       <td>        当前 <a href="https://www.php.net/manual/zh/language.oop5.php" class="link">class</a>        的名称。参见<a href="https://www.php.net/manual/zh/language.constants.predefined.php" class="link">__CLASS__</a>       </td>      </tr>      <tr>       <td>object</td>       <td><span class="type" style="color:#EAB766">object</span></td>       <td>        当前的 <a href="https://www.php.net/manual/zh/language.oop5.php" class="link">object</a>。       </td>      </tr>      <tr>       <td>type</td>       <td><span class="type" style="color:#EAB766">string</span></td>       <td>        当前调用的类型。如果是一个方法，会返回 &quot;-&gt;&quot;。如果是一个静态方法，会返回 &quot;::&quot;。如果是一个函数调用，则返回空。       </td>      </tr>      <tr>       <td>args</td>       <td><span class="type" style="color:#EAB766">array</span></td>       <td>        如果在一个函数里，这会列出函数的参数。如果是在一个被包含的文件里，会列出包含的文件名。       </td>      </tr>     </tbody>       </table>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.debug-backtrace-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="example-1541">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">debug_backtrace()</strong></span> 范例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// filename: /tmp/a.php<br /><br /></span><span style="color: #007700">function </span><span style="color: #9876AA">a_test</span><span style="color: #007700">(</span><span style="color: #9876AA">$str</span><span style="color: #007700">)<br />{<br />    echo </span><span style="color: #DD0000">"\nHi: </span><span style="color: #9876AA">$str</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">debug_backtrace</span><span style="color: #007700">());<br />}<br /><br /></span><span style="color: #9876AA">a_test</span><span style="color: #007700">(</span><span style="color: #DD0000">'friend'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;<br /></span><br /><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// filename: /tmp/b.php<br /></span><span style="color: #007700">include_once </span><span style="color: #DD0000">'/tmp/a.php'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>     执行 <var class="filename">/tmp/b.php</var> 返回的结果类似于以下：    </p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Hi: friend<br>array(2) {<br>[0]=&gt;<br>array(4) {<br>    [&quot;file&quot;] =&gt; string(10) &quot;/tmp/a.php&quot;<br>    [&quot;line&quot;] =&gt; int(10)<br>    [&quot;function&quot;] =&gt; string(6) &quot;a_test&quot;<br>    [&quot;args&quot;]=&gt;<br>    array(1) {<br>      [0] =&gt; &amp;string(6) &quot;friend&quot;<br>    }<br>}<br>[1]=&gt;<br>array(4) {<br>    [&quot;file&quot;] =&gt; string(10) &quot;/tmp/b.php&quot;<br>    [&quot;line&quot;] =&gt; int(2)<br>    [&quot;args&quot;] =&gt;<br>    array(1) {<br>      [0] =&gt; string(10) &quot;/tmp/a.php&quot;<br>    }<br>    [&quot;function&quot;] =&gt; string(12) &quot;include_once&quot;<br>  }<br>}<br></span></div>    </div>   </div>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.debug-backtrace-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link trigger_error()} - 产生一个用户级别的 error/warning/notice 信息</span></li>    <li class="member"><span class="function">{@link debug_print_backtrace()} - 打印一条回溯。</span></li>   </ul>  </span> </div></div>