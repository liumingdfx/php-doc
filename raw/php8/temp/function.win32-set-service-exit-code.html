<div id="function.win32-set-service-exit-code" class="refentry"> <div class="refnamediv">  <h1 class="refname">win32_set_service_exit_code</h1>  <p class="verinfo">(PECL win32service &gt;=0.4.0)</p><p class="refpurpose"><span class="refname">win32_set_service_exit_code</span> &mdash; <span class="dc-title">Define or return the exit code for the current running service</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.win32-set-service-exit-code-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>win32_set_service_exit_code</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$exitCode</span><span class="initializer"> = 1</span></span>): <span class="type" style="color:#EAB766">int</span></div>  <p class="para rdfs-comment">   Change or return the exit code. The exit code is used only if the exit mode is not graceful.    If the value is not zero, the recovery configuration can be used after    service fail. See    <a href="https://www.php.net/manual/zh/https://docs.microsoft.com/en-us/windows/desktop/debug/system-error-codes" class="link external">&raquo;&nbsp;Microsoft system error codes</a>    for more details  </p>    <div class="caution"><strong class="caution">警告</strong>   <p class="para">    This function work only in &quot;cli&quot; SAPI. On other SAPI     this function is disabled.   </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.win32-set-service-exit-code-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">exitCode</span></dt>    <dd>     <span>      The return code used on exit.     </span>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.win32-set-service-exit-code-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Return the current or old exit code.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.win32-set-service-exit-code-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   Prior to version 1.0.0, if the SAPI is not <span>&quot;cli&quot;</span>, this function emits an   <strong><span>E_ERROR</span></strong> level error.  </p>   <p class="para">    As of version 1.0.0, will throw a     <span class="classname"><a href="https://www.php.net/manual/zh/class.win32serviceexception.php" class="classname">Win32ServiceException</a></span> if SAPI is not     <span>&quot;cli&quot;</span>   </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.win32-set-service-exit-code-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>PECL win32service 1.0.0</td>       <td>        Throws a <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span> on invalid data in parameters,        previously <strong><span>false</span></strong> was returned.       </td>      </tr>      <tr>       <td>PECL win32service 1.0.0</td>       <td>        Throws a <span class="classname"><a href="https://www.php.net/manual/zh/class.win32serviceexception.php" class="classname">Win32ServiceException</a></span> on error,        previously a         <a href="https://www.php.net/manual/zh/win32service.constants.errors.php" class="link">Win32 Error Code</a>        was returned.       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.win32-set-service-exit-code-seealso">  <h3 class="title">参见</h3>  <ul class="simplelist">    <li class="member"><span class="function">{@link win32_start_service_ctrl_dispatcher()} - Registers the script with the SCM, so that it can act as the service with the given name</span></li>    <li class="member"><span class="function">{@link win32_set_service_status()} - Update the service status</span></li>    <li class="member"><span class="function">{@link win32_set_service_exit_mode()} - Define or return the exit mode for the current running service</span></li>  </ul> </div></div>