<div id="parallel-runtime.run" class="refentry"> <div class="refnamediv">  <h1 class="refname">parallel\Runtime::run</h1>  <p class="verinfo">(0.8.0)</p><p class="refpurpose"><span class="refname">parallel\Runtime::run</span> &mdash; <span class="dc-title">Execution</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-parallel-runtime.run-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>parallel\Runtime::run</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.closure.php" class="type Closure" style="color:#EAB766">Closure</a></span> <span class="parameter" style="color:#3A95FF">$task</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type Future" style="color:#EAB766">Future</span></span></span></div>  <p class="para rdfs-comment">   Shall schedule <span class="parameter" style="color:#3A95FF">task</span> for execution in parallel.  </p>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>parallel\Runtime::run</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.closure.php" class="type Closure" style="color:#EAB766">Closure</a></span> <span class="parameter" style="color:#3A95FF">$task</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$argv</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type Future" style="color:#EAB766">Future</span></span></span></div>  <p class="para rdfs-comment">   Shall schedule <span class="parameter" style="color:#3A95FF">task</span> for execution in parallel, passing <span class="parameter" style="color:#3A95FF">argv</span> at execution time.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-parallel-runtime.run-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">task</span></dt>    <dd>     <span>      A <span class="classname"><a href="https://www.php.net/manual/zh/class.closure.php" class="classname">Closure</a></span> with specific characteristics.     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">argv</span></dt>    <dd>     <p class="para">      An <span class="type" style="color:#EAB766">array</span> of arguments with specific characteristics to be passed to <span class="parameter" style="color:#3A95FF">task</span> at execution time.     </p>    </dd>     </dl> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 closure-characteristics" id="refsect1-parallel-runtime.run-closure-characteristics"> <h3 class="title">Task Characteristics</h3> <p class="para">  Closures scheduled for parallel execution must not:  <ul class="simplelist">   <li class="member">accept or return by reference</li>   <li class="member">accept or return internal objects (see notes)</li>   <li class="member">execute a limited set of instructions</li>  </ul> </p> <p class="para">  Instructions prohibited in Closures intended for parallel execution are:  <ul class="simplelist">   <li class="member">yield</li>   <li class="member">use by-reference</li>   <li class="member">declare class</li>   <li class="member">declare named function</li>  </ul> </p> <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:   <p class="para">   Nested closures may yield or use by-reference, but must not contain class or named function declarations.  </p> </p></blockquote> <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:   <p class="para">   No instructions are prohibited in the files which the task may include.  </p> </p></blockquote> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 argv-characteristics" id="refsect1-parallel-runtime.run-argv-characteristics"> <h3 class="title">Arguments Characteristics</h3> <p class="para">  Arguments must not:  <ul class="simplelist">   <li class="member">contain references</li>   <li class="member">contain resources</li>   <li class="member">contain internal objects (see notes)</li>  </ul>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    In the case of file stream resources, the resource will be cast to the file descriptor and passed as <span class="type" style="color:#EAB766">int</span> where possible, this is unsupported on Windows.   </p>  </p></blockquote> </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 object-characteristics" id="refsect1-parallel-runtime.run-object-characteristics">  <h3 class="title">Internal Objects Notes</h3>  <p class="para">   Internal objects generally use a custom structure which cannot be copied by value safely, PHP currently lacks the mechanics to do this (without serialization)    and so only objects that do not use a custom structure may be shared.  </p>  <p class="para">   Some internal objects do not use a custom structure, for example <span class="classname"><a href="https://www.php.net/manual/zh/class.parallel-events-event.php" class="classname">parallel\Events\Event</a></span> and so may be shared.  </p>  <p class="para">   Closures are a special kind of internal object and support being copied by value, and so may be shared.  </p>  <p class="para">   Channels are central to writing parallel code and support concurrent access and execution by necessity, and so may be shared.  </p>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    A user class that extends an internal class may use a custom structure as defined by the internal class, in which case they cannot be copied by value safely,     and so may not be shared.   </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-parallel-runtime.run-returnvalues">  <h3 class="title">返回值</h3>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    The return <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.parallel-future.php" class="type parallel\Future" style="color:#EAB766">parallel\Future</a></span> must not be ignored when the task contains a return or throw statement.   </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 exceptions" id="refsect1-parallel-runtime.run-exceptions">  <h3 class="title">Exceptions</h3>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Shall throw <span class="type" style="color:#EAB766"><span class="type parallel\Runtime\Error\Closed" style="color:#EAB766">parallel\Runtime\Error\Closed</span></span> if <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.parallel-runtime.php" class="type parallel\Runtime" style="color:#EAB766">parallel\Runtime</a></span> was closed.   </p>  </div>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Shall throw <span class="type" style="color:#EAB766"><span class="type parallel\Runtime\Error\IllegalFunction" style="color:#EAB766">parallel\Runtime\Error\IllegalFunction</span></span> if <span class="parameter" style="color:#3A95FF">task</span> is a closure created from an internal function.   </p>  </div>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Shall throw <span class="type" style="color:#EAB766"><span class="type parallel\Runtime\Error\IllegalInstruction" style="color:#EAB766">parallel\Runtime\Error\IllegalInstruction</span></span> if <span class="parameter" style="color:#3A95FF">task</span> contains illegal instructions.   </p>  </div>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Shall throw <span class="type" style="color:#EAB766"><span class="type parallel\Runtime\Error\IllegalParameter" style="color:#EAB766">parallel\Runtime\Error\IllegalParameter</span></span> if <span class="parameter" style="color:#3A95FF">task</span> accepts or <span class="parameter" style="color:#3A95FF">argv</span> contains illegal variables.   </p>  </div>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Shall throw <span class="type" style="color:#EAB766"><span class="type parallel\Runtime\Error\IllegalReturn" style="color:#EAB766">parallel\Runtime\Error\IllegalReturn</span></span> if <span class="parameter" style="color:#3A95FF">task</span> returns illegally.   </p>  </div> </div></div>