<div id="function.parse-ini-file" class="refentry"> <div class="refnamediv">  <h1 class="refname">parse_ini_file</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">parse_ini_file</span> &mdash; <span class="dc-title">解析一个配置文件</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.parse-ini-file-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>parse_ini_file</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$filename</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$process_sections</span><span class="initializer"> = <strong><span>false</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$scanner_mode</span><span class="initializer"> = <strong><span>INI_SCANNER_NORMAL</span></strong></span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">parse_ini_file()</strong></span> 载入一个由   <span class="parameter" style="color:#3A95FF">filename</span> 指定的 ini   文件，并将其中的设置作为一个关联数组返回。  </p>  <p class="para">   ini 文件的结构和 <var class="filename">php.ini</var> 的相同。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.parse-ini-file-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">filename</span></dt>     <dd>      <p class="para">       要解析的 ini 文件的文件名。如果使用相对路径，则优先在相对于当前工作目录的目录中查找文件，如果未找到则在       <a href="https://www.php.net/manual/zh/ini.core.php#ini.include-path" class="link">include_path</a> 中查找文件进行解析。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">process_sections</span></dt>     <dd>      <p class="para">       如果将 <span class="parameter" style="color:#3A95FF">process_sections</span> 参数设为       <strong><span>true</span></strong>，将得到多维数组，包括了配置文件中的节名和配置。<span class="parameter" style="color:#3A95FF">process_sections</span>       的默认值是 <strong><span>false</span></strong>。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">scanner_mode</span></dt>     <dd>      <p class="para">       可以是 <strong><span>INI_SCANNER_NORMAL</span></strong>（默认），也可以是       <strong><span>INI_SCANNER_RAW</span></strong>。如果提供了       <strong><span>INI_SCANNER_RAW</span></strong>，然后将不会解析选项值。      </p>      <p class="para">    As of PHP 5.6.1 can also be specified as <strong><span>INI_SCANNER_TYPED</span></strong>.    In this mode boolean, null and integer types are preserved when possible.    String values <span>&quot;true&quot;</span>, <span>&quot;on&quot;</span> and <span>&quot;yes&quot;</span>    are converted to <strong><span>true</span></strong>. <span>&quot;false&quot;</span>, <span>&quot;off&quot;</span>, <span>&quot;no&quot;</span>    and <span>&quot;none&quot;</span> are considered <strong><span>false</span></strong>. <span>&quot;null&quot;</span> is converted to <strong><span>null</span></strong>    in typed mode. Also, all numeric strings are converted to integer type if it is possible.   </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.parse-ini-file-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时以关联数组 <span class="type" style="color:#EAB766">array</span> 返回设置，失败时返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.parse-ini-file-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <var class="filename">sample.ini</var> 的内容</strong></p>    <div class="example-contents"><div class="cdata"><span>; This is a sample configuration file<br>; Comments start with &#039;;&#039;, as in php.ini<br><br>[first_section]<br>one = 1<br>five = 5<br>animal = BIRD<br><br>[second_section]<br>path = &quot;/usr/local/bin&quot;<br>URL = &quot;http://www.example.com/~username&quot;<br><br>[third_section]<br>phpversion[] = &quot;5.0&quot;<br>phpversion[] = &quot;5.1&quot;<br>phpversion[] = &quot;5.2&quot;<br>phpversion[] = &quot;5.3&quot;<br><br>urls[svn] = &quot;http://svn.php.net&quot;<br>urls[git] = &quot;http://git.php.net&quot;<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">parse_ini_file()</strong></span> 例子</strong></p>    <div class="example-contents"><p>     <a href="https://www.php.net/manual/zh/language.constants.php" class="link">常量</a>（并非像     <strong><span>__FILE__</span></strong> 之类的“魔术常量”）也可以在 ini     文件中被解析，因此如果在运行 <span class="function"><strong style="color:#CC7832">parse_ini_file()</strong></span>     之前定义了常量作为 ini 的值，将会被集成到结果中去。只有 ini     的值会被求值，且该值必须是常量。例如：    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />define</span><span style="color: #007700">(</span><span style="color: #DD0000">'BIRD'</span><span style="color: #007700">, </span><span style="color: #DD0000">'Dodo bird'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Parse without sections<br /></span><span style="color: #9876AA">$ini_array </span><span style="color: #007700">= </span><span style="color: #9876AA">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #DD0000">"sample.ini"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">$ini_array</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Parse with sections<br /></span><span style="color: #9876AA">$ini_array </span><span style="color: #007700">= </span><span style="color: #9876AA">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #DD0000">"sample.ini"</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">$ini_array</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Array<br>(<br>    [one] =&gt; 1<br>    [five] =&gt; 5<br>    [animal] =&gt; Dodo bird<br>    [path] =&gt; /usr/local/bin<br>    [URL] =&gt; http://www.example.com/~username<br>    [phpversion] =&gt; Array<br>        (<br>            [0] =&gt; 5.0<br>            [1] =&gt; 5.1<br>            [2] =&gt; 5.2<br>            [3] =&gt; 5.3<br>        )<br><br>    [urls] =&gt; Array<br>        (<br>            [svn] =&gt; http://svn.php.net<br>            [git] =&gt; http://git.php.net<br>        )<br><br>)<br>Array<br>(<br>    [first_section] =&gt; Array<br>        (<br>            [one] =&gt; 1<br>            [five] =&gt; 5<br>            [animal] =&gt; Dodo bird<br>        )<br><br>    [second_section] =&gt; Array<br>        (<br>            [path] =&gt; /usr/local/bin<br>            [URL] =&gt; http://www.example.com/~username<br>        )<br><br>    [third_section] =&gt; Array<br>        (<br>            [phpversion] =&gt; Array<br>                (<br>                    [0] =&gt; 5.0<br>                    [1] =&gt; 5.1<br>                    [2] =&gt; 5.2<br>                    [3] =&gt; 5.3<br>                )<br><br>            [urls] =&gt; Array<br>                (<br>                    [svn] =&gt; http://svn.php.net<br>                    [git] =&gt; http://git.php.net<br>                )<br><br>        )<br><br>)<br></span></div>    </div>   </div>  </span>  <p class="para">   <div class="example" id="">    <p><strong>示例 #3 <span class="function"><strong style="color:#CC7832">parse_ini_file()</strong></span> 格式化 php.ini 文件</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 简单的函数，用于比较下面的结果<br /></span><span style="color: #007700">function </span><span style="color: #9876AA">yesno</span><span style="color: #007700">(</span><span style="color: #9876AA">$expression</span><span style="color: #007700">)<br />{<br />    return(</span><span style="color: #9876AA">$expression </span><span style="color: #007700">? </span><span style="color: #DD0000">'Yes' </span><span style="color: #007700">: </span><span style="color: #DD0000">'No'</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">// 使用 php_ini_loaded_file() 函数获取 php.ini 的路径<br /></span><span style="color: #9876AA">$ini_path </span><span style="color: #007700">= </span><span style="color: #9876AA">php_ini_loaded_file</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// 解析 php.ini<br /></span><span style="color: #9876AA">$ini </span><span style="color: #007700">= </span><span style="color: #9876AA">parse_ini_file</span><span style="color: #007700">(</span><span style="color: #9876AA">$ini_path</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Print and compare the values, note that using get_cfg_var()<br />// will give the same results for parsed and loaded here<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'(parsed) magic_quotes_gpc = ' </span><span style="color: #007700">. </span><span style="color: #9876AA">yesno</span><span style="color: #007700">(</span><span style="color: #9876AA">$ini</span><span style="color: #007700">[</span><span style="color: #DD0000">'magic_quotes_gpc'</span><span style="color: #007700">]) . </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br />echo </span><span style="color: #DD0000">'(loaded) magic_quotes_gpc = ' </span><span style="color: #007700">. </span><span style="color: #9876AA">yesno</span><span style="color: #007700">(</span><span style="color: #9876AA">get_cfg_var</span><span style="color: #007700">(</span><span style="color: #DD0000">'magic_quotes_gpc'</span><span style="color: #007700">)) . </span><span style="color: #9876AA">PHP_EOL</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>(parsed) magic_quotes_gpc = Yes<br>(loaded) magic_quotes_gpc = Yes<br></span></div>    </div>   </div>  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #4 内插值</strong></p>    <div class="example-contents"><p>     除了对常量求值之外，某些字符在 ini 值中具有特殊含义。此外，可以使用 <span>${}</span>     语法读取环境变量和之前定义的配置项（参阅 <span class="function">{@link get_cfg_var()}</span>）。    </p></div>    <div class="example-contents"><div class="cdata"><span>; | is used for bitwise OR<br>three = 2|3<br><br>; &amp; is used for bitwise AND<br>four = 6&amp;5<br><br>; ^ is used for bitwise XOR<br>five = 3^6<br><br>; ~ is used for bitwise negate<br>negative_two = ~1<br><br>; () is used for grouping<br>seven = (8|7)&amp;(6|5)<br><br>; Interpolate the PATH environment variable<br>path = ${PATH}<br><br>; Interpolate the configuration option &#039;memory_limit&#039;<br>configured_memory_limit = ${memory_limit}<br><br></span></div>    </div>   </div>  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #5 转义字符</strong></p>    <div class="example-contents"><p>     Some characters have special meaning in double-quoted strings and must be escaped by the backslash prefix.     First of all, these are the double quote <span>&quot;</span> as the boundary marker, and the backslash <span>\</span> itself     (if followed by one of the special characters):    </p></div>    <div class="example-contents"><div class="cdata"><span>quoted = &quot;She said \&quot;Exactly my point\&quot;.&quot; ; Results in a string with quote marks in it.<br>hint = &quot;Use \\\&quot; to escape double quote&quot; ; Results in: Use \&quot; to escape double quote<br></span></div>    </div>    <div class="example-contents"><p>     There is an exception made for Windows-like paths: it&#039;s possible to not escape trailing backslash     if the quoted string is directly followed by a linebreak:    </p></div>    <div class="example-contents"><div class="cdata"><span>save_path = &quot;C:\Temp\&quot;<br></span></div>    </div>    <div class="example-contents"><p>     If one does need to escape double quote followed by linebreak in a multiline value,     it&#039;s possible to use value concatenation in the following way     (there is one double-quoted string directly followed by another one):    </p></div>    <div class="example-contents"><div class="cdata"><span>long_text = &quot;Lorem \&quot;ipsum\&quot;&quot;&quot;<br> dolor&quot; ; Results in: Lorem &quot;ipsum&quot;\n dolor<br></span></div>    </div>    <div class="example-contents"><p>     Another character with special meaning is <span>$</span> (the dollar sign).     It must be escaped if followed by the open curly brace:    </p></div>    <div class="example-contents"><div class="cdata"><span>code = &quot;\${test}&quot;<br></span></div>    </div>    <div class="example-contents"><p>     <strong><span>INI_SCANNER_RAW</span></strong> 模式不支持转义字符（在此模式下，所有字符都会“不做任何处理”）。    </p></div>    <div class="example-contents"><p>     注意 ini 解析器不支持标准转义序列（<span>\n</span>、<span>\t</span> 等）。如有必要，使用     <span class="function">{@link stripcslashes()}</span> 函数对 <span class="function"><strong style="color:#CC7832">parse_ini_file()</strong></span>     后的结果进行后处理。    </p></div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.parse-ini-file-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    本函数和 <var class="filename">php.ini</var>    文件无关，该文件在运行脚本时就已经处理过了。本函数可以用来读取应用程序的配置文件。   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    如果 ini 文件中的值包含任何非字母数字的字符，需要将其括在双引号中（&quot;）。   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <span class="simpara">    有些保留字不能作为 ini    文件中的键名，包括：<span>null</span>、<span>yes</span>、<span>no</span>、<span>true</span>、<span>false</span>、<span>on</span>、<span>off</span>、<span>none</span>。除非使用    <strong><span>INI_SCANNER_TYPED</span></strong> 模式，否则    <span>null</span>、<span>off</span>、<span>no</span> 和    <span>false</span> 的值等效于    <span>&quot;&quot;</span>，<span>on</span>、<span>yes</span> 和 <span>true</span>    的值等效于 <span>&quot;1&quot;</span>。字符 <span>?{}|&amp;~!()^&quot;</span>    也不能用在键名的任何地方，而且这些字符在选项值中有着特殊的意义。   </span>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    不带等号的条目会忽略。例如“foo”会忽略，而“bar =”将会解析并添加空值。例如，会忽略    MySQL 在 <var class="filename">my.cnf</var> 中不带值的“no-auto-rehash”设置。   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    ini 文件通常被 Web 服务器视为纯文本，因此在请求时会提供给浏览器。这意味着为了安全起见，必须将 ini    文件保存在 docroot 之外，或者重新配置 Web 服务器，不会提供这些文件。如果不这么做，可能会带来安全风险。   </p>  </p></blockquote> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.parse-ini-file-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link parse_ini_string()} - 解析配置字符串</span></li>   </ul>  </span> </div></div>