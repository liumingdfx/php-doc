<div id="function.str-replace" class="refentry"> <div class="refnamediv">  <h1 class="refname">str_replace</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">str_replace</span> &mdash; <span class="dc-title">子字符串替换</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.str-replace-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>str_replace</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">string</span></span> <span class="parameter" style="color:#3A95FF">$search</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">string</span></span> <span class="parameter" style="color:#3A95FF">$replace</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span></span> <span class="parameter" style="color:#3A95FF">$subject</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">&$count</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">array</span></span></div>  <p class="para rdfs-comment">   该函数返回字符串或者数组。该字符串或数组是将 <span class="parameter" style="color:#3A95FF">subject</span> 中全部的 <span class="parameter" style="color:#3A95FF">search</span> 都被 <span class="parameter" style="color:#3A95FF">replace</span> 替换之后的结果。  </p>  <p class="para">   要根据模式而不是固定字符串替换文本，使用 <span class="function">{@link preg_replace()}</span>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.str-replace-parameters">  <h3 class="title">参数</h3>  <span>   如果 <span class="parameter" style="color:#3A95FF">search</span> 和 <span class="parameter" style="color:#3A95FF">replace</span> 为数组，那么 <span class="function"><strong style="color:#CC7832">str_replace()</strong></span> 将对 <span class="parameter" style="color:#3A95FF">subject</span> 做二者的映射替换。如果 <span class="parameter" style="color:#3A95FF">replace</span> 的值的个数少于 <span class="parameter" style="color:#3A95FF">search</span> 的个数，多余的替换将使用空字符串来进行。如果 <span class="parameter" style="color:#3A95FF">search</span> 是一个数组而 <span class="parameter" style="color:#3A95FF">replace</span> 是一个字符串，那么 <span class="parameter" style="color:#3A95FF">search</span> 中每个元素的替换将始终使用这个字符串。该转换不会改变大小写。  </span>  <p class="para">   如果 <span class="parameter" style="color:#3A95FF">search</span> 和 <span class="parameter" style="color:#3A95FF">replace</span> 都是数组，它们的值将会被依次处理。  </p>  <p class="para">   <dl>         <dt><span class="parameter" style="color:#3A95FF">search</span></dt>     <dd>      <p class="para">       查找的目标值，也就是 <em>needle</em>。一个数组可以指定多个目标。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">replace</span></dt>     <dd>      <p class="para">       <span class="parameter" style="color:#3A95FF">search</span> 的替换值。一个数组可以被用来指定多重替换。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">subject</span></dt>     <dd>      <p class="para">       执行替换的数组或者字符串。也就是 <em>haystack</em>。      </p>      <p class="para">       如果 <span class="parameter" style="color:#3A95FF">subject</span> 是一个数组，替换操作将遍历整个 <span class="parameter" style="color:#3A95FF">subject</span>，返回值也将是一个数组。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">count</span></dt>     <dd>      <p class="para">        如果被指定，它的值将被设置为替换发生的次数。      </p>     </dd>       </dl>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.str-replace-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   该函数返回替换后的数组或者字符串。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.str-replace-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">str_replace()</strong></span> 基本示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 赋值: &lt;body text='black'&gt;<br /></span><span style="color: #9876AA">$bodytag </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"%body%"</span><span style="color: #007700">, </span><span style="color: #DD0000">"black"</span><span style="color: #007700">, </span><span style="color: #DD0000">"&lt;body text='%body%'&gt;"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 赋值: Hll Wrld f PHP<br /></span><span style="color: #9876AA">$vowels </span><span style="color: #007700">= array(</span><span style="color: #DD0000">"a"</span><span style="color: #007700">, </span><span style="color: #DD0000">"e"</span><span style="color: #007700">, </span><span style="color: #DD0000">"i"</span><span style="color: #007700">, </span><span style="color: #DD0000">"o"</span><span style="color: #007700">, </span><span style="color: #DD0000">"u"</span><span style="color: #007700">, </span><span style="color: #DD0000">"A"</span><span style="color: #007700">, </span><span style="color: #DD0000">"E"</span><span style="color: #007700">, </span><span style="color: #DD0000">"I"</span><span style="color: #007700">, </span><span style="color: #DD0000">"O"</span><span style="color: #007700">, </span><span style="color: #DD0000">"U"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$onlyconsonants </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$vowels</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #DD0000">"Hello World of PHP"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 赋值: You should eat pizza, beer, and ice cream every day<br /></span><span style="color: #9876AA">$phrase  </span><span style="color: #007700">= </span><span style="color: #DD0000">"You should eat fruits, vegetables, and fiber every day."</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$healthy </span><span style="color: #007700">= array(</span><span style="color: #DD0000">"fruits"</span><span style="color: #007700">, </span><span style="color: #DD0000">"vegetables"</span><span style="color: #007700">, </span><span style="color: #DD0000">"fiber"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$yummy   </span><span style="color: #007700">= array(</span><span style="color: #DD0000">"pizza"</span><span style="color: #007700">, </span><span style="color: #DD0000">"beer"</span><span style="color: #007700">, </span><span style="color: #DD0000">"ice cream"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$newphrase </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$healthy</span><span style="color: #007700">, </span><span style="color: #9876AA">$yummy</span><span style="color: #007700">, </span><span style="color: #9876AA">$phrase</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 赋值: 2<br /></span><span style="color: #9876AA">$str </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #DD0000">"ll"</span><span style="color: #007700">, </span><span style="color: #DD0000">""</span><span style="color: #007700">, </span><span style="color: #DD0000">"good golly miss molly!"</span><span style="color: #007700">, </span><span style="color: #9876AA">$count</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$count</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span>  <p class="para">   <div class="example" id="">    <p><strong>示例 #2 可能的 <span class="function"><strong style="color:#CC7832">str_replace()</strong></span> 替换示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 替换顺序<br /></span><span style="color: #9876AA">$str     </span><span style="color: #007700">= </span><span style="color: #DD0000">"Line 1\nLine 2\rLine 3\r\nLine 4\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$order   </span><span style="color: #007700">= array(</span><span style="color: #DD0000">"\r\n"</span><span style="color: #007700">, </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">, </span><span style="color: #DD0000">"\r"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$replace </span><span style="color: #007700">= </span><span style="color: #DD0000">'&lt;br /&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 首先替换 \r\n 字符，因此它们不会被两次转换<br /></span><span style="color: #9876AA">$newstr </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$order</span><span style="color: #007700">, </span><span style="color: #9876AA">$replace</span><span style="color: #007700">, </span><span style="color: #9876AA">$str</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 输出 F ，因为 A 被 B 替换，B 又被 C 替换，以此类推...<br />// 由于从左到右依次替换，最终 E 被 F 替换<br /></span><span style="color: #9876AA">$search  </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'A'</span><span style="color: #007700">, </span><span style="color: #DD0000">'B'</span><span style="color: #007700">, </span><span style="color: #DD0000">'C'</span><span style="color: #007700">, </span><span style="color: #DD0000">'D'</span><span style="color: #007700">, </span><span style="color: #DD0000">'E'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$replace </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'B'</span><span style="color: #007700">, </span><span style="color: #DD0000">'C'</span><span style="color: #007700">, </span><span style="color: #DD0000">'D'</span><span style="color: #007700">, </span><span style="color: #DD0000">'E'</span><span style="color: #007700">, </span><span style="color: #DD0000">'F'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$subject </span><span style="color: #007700">= </span><span style="color: #DD0000">'A'</span><span style="color: #007700">;<br />echo </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$search</span><span style="color: #007700">, </span><span style="color: #9876AA">$replace</span><span style="color: #007700">, </span><span style="color: #9876AA">$subject</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 输出: apearpearle pear<br />// 由于上面提到的原因<br /></span><span style="color: #9876AA">$letters </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'a'</span><span style="color: #007700">, </span><span style="color: #DD0000">'p'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$fruit   </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">, </span><span style="color: #DD0000">'pear'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$text    </span><span style="color: #007700">= </span><span style="color: #DD0000">'a p'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$output  </span><span style="color: #007700">= </span><span style="color: #9876AA">str_replace</span><span style="color: #007700">(</span><span style="color: #9876AA">$letters</span><span style="color: #007700">, </span><span style="color: #9876AA">$fruit</span><span style="color: #007700">, </span><span style="color: #9876AA">$text</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$output</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.str-replace-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>  <div class="caution"><strong class="caution">警告</strong>   <h1 class="title">了解替换顺序</h1>   <p class="para">    由于 <span class="function"><strong style="color:#CC7832">str_replace()</strong></span> 的替换时从左到右依次进行的，进行多重替换的时候可能会替换掉之前插入的值。参见该文档的示例。   </p>  </div>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    该函数区分大小写。使用 <span class="function">{@link str_ireplace()}</span> 可以进行不区分大小写的替换。   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.str-replace-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link str_ireplace()} - str_replace 的忽略大小写版本</span></li>    <li class="member"><span class="function">{@link substr_replace()} - 替换字符串的子串</span></li>    <li class="member"><span class="function">{@link preg_replace()} - 执行一个正则表达式的搜索和替换</span></li>    <li class="member"><span class="function">{@link strtr()} - 转换字符或替换字串</span></li>   </ul>  </span> </div></div>