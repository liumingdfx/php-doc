<div id="function.file-get-contents" class="refentry"> <div class="refnamediv">  <h1 class="refname">file_get_contents</h1>  <p class="verinfo">(PHP 4 &gt;= 4.3.0, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">file_get_contents</span> &mdash; <span class="dc-title">将整个文件读入一个字符串</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.file-get-contents-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>file_get_contents</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$filename</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$use_include_path</span><span class="initializer"> = <strong><span>false</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">resource</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$context</span><span class="initializer"> = <strong><span>null</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$offset</span><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$length</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   和 <span class="function">{@link file()}</span> 一样，只除了   <span class="function"><strong style="color:#CC7832">file_get_contents()</strong></span> 把文件读入一个字符串。将在参数   <span class="parameter" style="color:#3A95FF">offset</span> 所指定的位置开始读取长度为   <span class="parameter" style="color:#3A95FF">length</span> 的内容。如果失败，<span class="function"><strong style="color:#CC7832">file_get_contents()</strong></span>   将返回 <strong><span>false</span></strong>。  </p>  <p class="para">   <span class="function"><strong style="color:#CC7832">file_get_contents()</strong></span>   函数是用来将文件的内容读入到一个字符串中的首选方法。如果操作系统支持还会使用内存映射技术来增强性能。  </p>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    如果要打开有特殊字符的 URL （比如说有空格），就需要使用    <span class="function">{@link urlencode()}</span> 进行 URL 编码。   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.file-get-contents-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">filename</span></dt>     <dd>      <p class="para">       要读取的文件的名称。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">use_include_path</span></dt>     <dd>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        常量 <strong><span>FILE_USE_INCLUDE_PATH</span></strong> 用于触发搜索        <a href="https://www.php.net/manual/zh/ini.core.php#ini.include-path" class="link">include path</a>。        因为 <strong><span>FILE_USE_INCLUDE_PATH</span></strong> 是个 <span class="type" style="color:#EAB766">int</span>，如果开启了<a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.strict" class="link">严格类型</a> 将无法启用。        所以要用 <strong><span>true</span></strong> 来代替常量。       </p>      </p></blockquote>     </dd>             <dt><span class="parameter" style="color:#3A95FF">context</span></dt>     <dd>      <p class="para">       <span class="function">{@link stream_context_create()}</span> 创建的有效的上下文（context）资源。       如果你不需要自定义 context，可以用 <strong><span>null</span></strong> 来忽略。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">offset</span></dt>     <dd>      <p class="para">       读取原始数据流的开始位置偏移量。负的 offset 会从数据流的末尾开始统计。      </p>      <p class="para">       远程文件不支持偏移量寻址（<span class="parameter" style="color:#3A95FF">offset</span>）。       对远程文件以较小的 offset 可能可以正常寻址，       但由于是对缓冲流进行操作，所以操作结果不可预测。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">length</span></dt>     <dd>      <p class="para">       要读取数据的最大长度。       默认情况下会读到文件末尾。       注意，该参数会应用到处理 stream 的过滤器（filter）中。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.file-get-contents-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   函数返回读取到的数据， 或者在失败时返回 <strong><span>false</span></strong>。  </p>  <div class="warning"><strong class="warning">警告</strong><p class="simpara">此函数可能返回布尔值<strong><span>false</span></strong>，但也可能返回等同于 <strong><span>false</span></strong> 的非布尔值。请阅读 <a href="https://www.php.net/manual/zh/language.types.boolean.php" class="link">布尔类型</a>章节以获取更多信息。应使用<a href="https://www.php.net/manual/zh/language.operators.comparison.php" class="link">===运算符</a>来测试此函数的返回值。</p></div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.file-get-contents-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   以下情况会导致 <strong><span>E_WARNING</span></strong> 级别错误：   无法找到 <span class="parameter" style="color:#3A95FF">filename</span> 文件；   <span class="parameter" style="color:#3A95FF">length</span> 小于零；   在 steam 中无法寻址偏移量 <span class="parameter" style="color:#3A95FF">offset</span>。  </p>  <p class="para">   Windows 下用 <span class="function"><strong style="color:#CC7832">file_get_contents()</strong></span> 读取目录会导致 <strong><span>E_WARNING</span></strong> 错误。   PHP 7.4 起，其他操作系统也会出现同样错误。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.file-get-contents-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.0.0</td>       <td>        现在 <span class="parameter" style="color:#3A95FF">length</span> 允许为 null。       </td>      </tr>      <tr>       <td>7.1.0</td>       <td>        支持负数 <span class="parameter" style="color:#3A95FF">offset</span>。       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.file-get-contents-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 获取并输出网站首页 HTML 源码</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$homepage </span><span style="color: #007700">= </span><span style="color: #9876AA">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$homepage</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #2 在 include_path 里搜索</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 如果开启了严格类型，例如 declare(strict_types=1);<br /></span><span style="color: #9876AA">$file </span><span style="color: #007700">= </span><span style="color: #9876AA">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'./people.txt'</span><span style="color: #007700">, </span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">// 否则就这样写<br /></span><span style="color: #9876AA">$file </span><span style="color: #007700">= </span><span style="color: #9876AA">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'./people.txt'</span><span style="color: #007700">, </span><span style="color: #9876AA">FILE_USE_INCLUDE_PATH</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #3 读取文件一小节</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 从第 21 个字符开始，读取 14 字符长度<br /></span><span style="color: #9876AA">$section </span><span style="color: #007700">= </span><span style="color: #9876AA">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'./people.txt'</span><span style="color: #007700">, </span><span style="color: #9876AA">FALSE</span><span style="color: #007700">, </span><span style="color: #9876AA">NULL</span><span style="color: #007700">, </span><span style="color: #9876AA">20</span><span style="color: #007700">, </span><span style="color: #9876AA">14</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$section</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例的输出类似于：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>string(14) &quot;lle Bjori Ro&quot; <br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #4 使用 stream 上下文（context）</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 创建 stream<br /></span><span style="color: #9876AA">$opts </span><span style="color: #007700">= array(<br />  </span><span style="color: #DD0000">'http'</span><span style="color: #007700">=&gt;array(<br />    </span><span style="color: #DD0000">'method'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"GET"</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'header'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"Accept-language: en\r\n" </span><span style="color: #007700">.<br />              </span><span style="color: #DD0000">"Cookie: foo=bar\r\n"<br />  </span><span style="color: #007700">)<br />);<br /><br /></span><span style="color: #9876AA">$context </span><span style="color: #007700">= </span><span style="color: #9876AA">stream_context_create</span><span style="color: #007700">(</span><span style="color: #9876AA">$opts</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// 以下面设置的 HTTP 头来打开文件<br /></span><span style="color: #9876AA">$file </span><span style="color: #007700">= </span><span style="color: #9876AA">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'http://www.example.com/'</span><span style="color: #007700">, </span><span style="color: #9876AA">false</span><span style="color: #007700">, </span><span style="color: #9876AA">$context</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.file-get-contents-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>: <span class="simpara">此函数可安全用于二进制对象。</span></p></blockquote>  <div class="tip"><strong class="tip">小技巧</strong><p class="simpara">如已启用<a href="https://www.php.net/manual/zh/filesystem.configuration.php#ini.allow-url-fopen" class="link">fopen 包装器</a>，在此函数中， URL 可作为文件名。关于如何指定文件名详见 <span class="function">{@link fopen()}</span>。各种wapper 的不同功能请参见 <a href="https://www.php.net/manual/zh/wrappers.php" class="xref">支持的协议和封装协议</a>，注意其用法及其可提供的预定义变量。</p></div>  <div class="warning"><strong class="warning">警告</strong><p class="para">使用 SSL 时，Microsoft IIS会违反协议不发送 <span>close_notify</span> 标记就关闭连接。PHP 会在到达数据尾端时报告“SSL: Fatal Protocol Error”。要解决此问题，<a href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.error-reporting" class="link">error_reporting</a> 应设定为降低级别至不包含警告。PHP4.3.7 及更高版本可以在使用 <span>https://</span> 包装器打开流时检测出有问题的 IIS 服务器软件 并抑制警告。在使用<span class="function">{@link fsockopen()}</span> 创建 <span>ssl://</span> 套接字时，开发者需检测并抑制此警告。</p></div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.file-get-contents-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link file()} - 把整个文件读入一个数组中</span></li>    <li class="member"><span class="function">{@link fgets()} - 从文件指针中读取一行</span></li>    <li class="member"><span class="function">{@link fread()} - 读取文件（可安全用于二进制文件）</span></li>    <li class="member"><span class="function">{@link readfile()} - 输出文件</span></li>    <li class="member"><span class="function">{@link file_put_contents()} - 将数据写入文件</span></li>    <li class="member"><span class="function">{@link stream_get_contents()} - 读取资源流到一个字符串</span></li>    <li class="member"><span class="function">{@link stream_context_create()} - 创建资源流上下文</span></li>    <li class="member"><a href="https://www.php.net/manual/zh/reserved.variables.httpresponseheader.php" class="link">$http_response_header</a></li>   </ul>  </span> </div></div>