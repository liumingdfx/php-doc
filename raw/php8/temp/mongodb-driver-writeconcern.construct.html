<div id="mongodb-driver-writeconcern.construct" class="refentry"> <div class="refnamediv">  <h1 class="refname">MongoDB\Driver\WriteConcern::__construct</h1>  <p class="verinfo">(mongodb &gt;=1.0.0)</p><p class="refpurpose"><span class="refname">MongoDB\Driver\WriteConcern::__construct</span> &mdash; <span class="dc-title">Create a new WriteConcern</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-mongodb-driver-writeconcern.construct-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">final</span> <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>MongoDB\Driver\WriteConcern::__construct</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766">int</span></span> <span class="parameter" style="color:#3A95FF">$w</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">int</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$wtimeout</span><span class="initializer"> = <strong><span>null</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">bool</span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$journal</span><span class="initializer"> = <strong><span>null</span></strong></span></span>)</div>  <p class="para rdfs-comment">   Constructs a new <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-writeconcern.php" class="classname">MongoDB\Driver\WriteConcern</a></span>, which is   an immutable value object.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-mongodb-driver-writeconcern.construct-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">w</span></dt>    <dd>     <span>      <table class="doctable table">       <caption><strong>Write concern</strong></caption>               <thead>         <tr>          <th>Value</th>          <th>Description</th>         </tr>        </thead>        <tbody class="tbody">         <tr>          <td>1</td>          <td>            Requests acknowledgement that the write operation has propagated to            the standalone <span>mongod</span> or the primary in a replica            set. This is the default write concern for MongoDB.          </td>         </tr>         <tr>          <td>0</td>          <td>           Requests no acknowledgment of the write operation. However, this may           return information about socket exceptions and networking errors to           the application.          </td>         </tr>         <tr>          <td>&lt;integer greater than 1&gt;</td>          <td>           Numbers greater than 1 are valid only for replica sets to request           acknowledgement from specified number of members, including the           primary.          </td>         </tr>         <tr>          <td><strong><span>MongoDB\Driver\WriteConcern::MAJORITY</span></strong></td>          <td>           <p class="para">            Requests acknowledgment that write operations have propagated to the            majority of voting nodes, including the primary, and have been            written to the on-disk journal for these nodes.           </p>           <p class="para">            Prior to MongoDB 3.0, this refers to the majority of replica set            members (not just voting nodes).           </p>          </td>         </tr>         <tr>          <td>string</td>          <td>           A string value is interpereted as a tag set. Requests acknowledgement           that the write operations have propagated to a replica set member           with the specified tag.          </td>         </tr>        </tbody>             </table>     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">wtimeout</span></dt>    <dd>     <p class="para">      How long to wait (in milliseconds) for secondaries before failing.     </p>     <p class="para">      <span>wtimeout</span> causes write operations to return with an      error (<span class="classname"><strong class="classname">WriteConcernError</strong></span>) after the specified      limit, even if the required write concern will eventually succeed. When      these write operations return, MongoDB does not undo successful data      modifications performed before the write concern exceeded the      <span>wtimeout</span> time limit.     </p>     <p class="para">      If specified, <span>wtimeout</span> must be a signed 64-bit integer      greater than or equal to zero.     </p>     <p class="para">      <table class="doctable table">       <caption><strong>Write concern timeout</strong></caption>               <thead>         <tr>          <th>Value</th>          <th>Description</th>         </tr>        </thead>        <tbody class="tbody">         <tr>          <td>0</td>          <td>Block indefinitely. This is the default.</td>         </tr>         <tr>          <td>&lt;integer greater than 0&gt;</td>          <td>           Milliseconds to wait until returning.          </td>         </tr>        </tbody>             </table>     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">journal</span></dt>    <dd>     <p class="para">      Wait until mongod has applied the write to the journal.     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-mongodb-driver-writeconcern.construct-errors">  <h3 class="title">错误／异常</h3>  <ul class="simplelist">   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> on argument parsing errors.</li>   <li class="member">Throws <span class="classname"><a href="https://www.php.net/manual/zh/class.mongodb-driver-exception-invalidargumentexception.php" class="classname">MongoDB\Driver\Exception\InvalidArgumentException</a></span> if <span class="parameter" style="color:#3A95FF">w</span> is invalid or <span class="parameter" style="color:#3A95FF">wtimeout</span> is either negative or greater than the bounds of a signed 32-bit integer.</li>  </ul> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-mongodb-driver-writeconcern.construct-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>PECL mongodb 1.7.0</td>       <td>        The <span class="parameter" style="color:#3A95FF">wTimeout</span> parameter now accepts 64-bit values.       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-mongodb-driver-writeconcern.construct-examples">  <h3 class="title">示例</h3>  <div class="example" id="example-3974">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">MongoDB\Driver\WriteConcern::__construct()</strong></span> example</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #FF8000">// Request write acknowledgement from the majority of the replica set nodes <br /></span><span style="color: #9876AA">$wc </span><span style="color: #007700">= new </span><span style="color: #9876AA">MongoDB\Driver\WriteConcern</span><span style="color: #007700">(</span><span style="color: #9876AA">MongoDB\Driver\WriteConcern</span><span style="color: #007700">::</span><span style="color: #9876AA">MAJORITY</span><span style="color: #007700">, </span><span style="color: #9876AA">500</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Request write acknowledgement from a node configured with the "MultipleDC" tag <br /></span><span style="color: #9876AA">$wc </span><span style="color: #007700">= new </span><span style="color: #9876AA">MongoDB\Driver\WriteConcern</span><span style="color: #007700">(</span><span style="color: #DD0000">"MultipleDC"</span><span style="color: #007700">, </span><span style="color: #9876AA">500</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-mongodb-driver-writeconcern.construct-seealso">  <h3 class="title">参见</h3>  <ul class="simplelist">   <li class="member"><a href="https://www.php.net/manual/zh/https://www.mongodb.com/docs/manual/reference/write-concern/" class="link external">&raquo;&nbsp;Write Concern reference</a></li>  </ul> </div></div>