<div id="function.db2-get-option" class="refentry"> <div class="refnamediv">  <h1 class="refname">db2_get_option</h1>  <p class="verinfo">(PECL ibm_db2 &gt;= 1.6.0)</p><p class="refpurpose"><span class="refname">db2_get_option</span> &mdash; <span class="dc-title">Retrieves an option value for a statement resource or a connection resource</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.db2-get-option-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>db2_get_option</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$resource</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$option</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   Retrieves the value of a specified option value for a statement resource    or a connection resource.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.db2-get-option-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">resource</span></dt>     <dd>     <p class="para">      A valid statement resource as returned from      <span class="function">{@link db2_prepare()}</span> or a valid connection resource as      returned from <span class="function">{@link db2_connect()}</span> or      <span class="function">{@link db2_pconnect()}</span>.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">option</span></dt>    <dd>     <p class="para">      A valid statement or connection options. The following new options are available       as of ibm_db2 version 1.6.0. They provide useful tracking information       that can be set during execution with <span class="function"><strong style="color:#CC7832">db2_get_option()</strong></span>.      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        Prior versions of ibm_db2 do not support these new options.       </p>       <p class="para">        When the value in each option is being set, some servers might not handle         the entire length provided and might truncate the value.       </p>       <p class="para">        To ensure that the data specified in each option is converted correctly         when transmitted to a host system, use only the characters A through Z,         0 through 9, and the underscore (_) or period (.).       </p>      </p></blockquote>      <dl>               <dt><span class="parameter" style="color:#3A95FF">userid</span></dt>         <dd>          <p class="para">           <span>SQL_ATTR_INFO_USERID</span> - A pointer to a null-terminated            character string used to identify the client user ID sent to the host            database server when using DB2 Connect.           <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:             <p class="para">             DB2 for z/OS and OS/390 servers support up to a length of 16 characters.              This user-id is not to be confused with the authentication user-id, it is for              identification purposes only and is not used for any authorization.            </p>           </p></blockquote>          </p>         </dd>                         <dt><span class="parameter" style="color:#3A95FF">acctstr</span></dt>         <dd>          <p class="para">           <span>SQL_ATTR_INFO_ACCTSTR</span> - A pointer to a null-terminated            character string used to identify the client accounting string sent to the            host database server when using DB2 Connect.           <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:             <p class="para">             DB2 for z/OS and OS/390 servers support up to a length of 200 characters.            </p>           </p></blockquote>          </p>         </dd>                         <dt><span class="parameter" style="color:#3A95FF">applname</span></dt>         <dd>          <p class="para">           <span>SQL_ATTR_INFO_APPLNAME</span> - A pointer to a null-terminated            character string used to identify the client application name sent to the            host database server when using DB2 Connect.           <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:             <p class="para">             DB2 for z/OS and OS/390 servers support up to a length of 32 characters.            </p>           </p></blockquote>          </p>         </dd>                         <dt><span class="parameter" style="color:#3A95FF">wrkstnname</span></dt>         <dd>          <p class="para">           <span>SQL_ATTR_INFO_WRKSTNNAME</span> - A pointer to a null-terminated            character string used to identify the client workstation name sent to the            host database server when using DB2 Connect.           <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:             <p class="para">             DB2 for z/OS and OS/390 servers support up to a length of 18 characters.            </p>           </p></blockquote>          </p>         </dd>               </dl>      </span>     </dd>       </dl>  </p>  <p class="para">   The following table specifies which options are compatible with   the available resource types:   <table class="doctable table">    <caption><strong>Resource-Parameter Matrix</strong></caption>         <col style="text-align: center;" />     <col style="text-align: center;" />     <col style="text-align: center;" />     <col style="text-align: center;" />     <col style="text-align: center;" />     <thead>      <tr>       <th>Key</th>       <th>Value</th>       <th colspan="3">Resource Type</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td class="empty">&nbsp;</td><td class="empty">&nbsp;</td><td>Connection</td>       <td>Statement</td>       <td>Result Set</td>      </tr>      <tr>       <td>userid</td>       <td><span>SQL_ATTR_INFO_USERID</span></td>       <td>X</td>       <td>X</td>       <td>-</td>      </tr>      <tr>       <td>acctstr</td>       <td><span>SQL_ATTR_INFO_ACCTSTR</span></td>       <td>X</td>       <td>X</td>       <td>-</td>      </tr>      <tr>       <td>applname</td>       <td><span>SQL_ATTR_INFO_APPLNAME</span></td>       <td>X</td>       <td>X</td>       <td>-</td>      </tr>      <tr>       <td>wrkstnname</td>       <td><span>SQL_ATTR_INFO_WRKSTNNAME</span></td>       <td>X</td>       <td>X</td>       <td>-</td>      </tr>     </tbody>       </table>  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.db2-get-option-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Returns the current setting of the connection attribute provided on success    或者在失败时返回 <strong><span>false</span></strong>.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.db2-get-option-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="example-3833">    <p><strong>示例 #1 Setting and retrieving parameters through a connection resource</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Database Connection Parameters <br /></span><span style="color: #9876AA">$database </span><span style="color: #007700">= </span><span style="color: #DD0000">'SAMPLE'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$user     </span><span style="color: #007700">= </span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$password </span><span style="color: #007700">= </span><span style="color: #DD0000">'ibmdb2'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Obtain Connection Resource <br /></span><span style="color: #9876AA">$conn </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #DD0000">"Client attributes passed through connection string:\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Create the associative options array with valid key-value pairs <br />// Assign the attributes through connection string <br />// Access the options specified <br /></span><span style="color: #9876AA">$options1 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'userid' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn1 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">, </span><span style="color: #9876AA">$options1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn1</span><span style="color: #007700">, </span><span style="color: #DD0000">'userid'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options2 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'acctstr' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'account'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn2 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">, </span><span style="color: #9876AA">$options2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn2</span><span style="color: #007700">, </span><span style="color: #DD0000">'acctstr'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options3 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'applname' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'myapp'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn3 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">, </span><span style="color: #9876AA">$options3</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn3</span><span style="color: #007700">, </span><span style="color: #DD0000">'applname'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options4 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'wrkstnname' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'workstation'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn4 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">, </span><span style="color: #9876AA">$options4</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn4</span><span style="color: #007700">, </span><span style="color: #DD0000">'wrkstnname'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />echo </span><span style="color: #DD0000">"Client attributes passed post-connection:\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Create the associative options array with valid key-value pairs <br />// Assign the attributes after a connection is made <br />// Access the options specified <br /></span><span style="color: #9876AA">$options5 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'userid' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'db2inst1'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn5 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$rc </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_set_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn5</span><span style="color: #007700">, </span><span style="color: #9876AA">$options5</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn5</span><span style="color: #007700">, </span><span style="color: #DD0000">'userid'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options6 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'acctstr' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'account'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn6 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$rc </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_set_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn6</span><span style="color: #007700">, </span><span style="color: #9876AA">$options6</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn6</span><span style="color: #007700">, </span><span style="color: #DD0000">'acctstr'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options7 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'applname' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'myapp'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn7 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$rc </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_set_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn7</span><span style="color: #007700">, </span><span style="color: #9876AA">$options7</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn7</span><span style="color: #007700">, </span><span style="color: #DD0000">'applname'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$options8 </span><span style="color: #007700">= array(</span><span style="color: #DD0000">'wrkstnname' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'workstation'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$conn8 </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_connect</span><span style="color: #007700">(</span><span style="color: #9876AA">$database</span><span style="color: #007700">, </span><span style="color: #9876AA">$user</span><span style="color: #007700">, </span><span style="color: #9876AA">$password</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$rc </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_set_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn8</span><span style="color: #007700">, </span><span style="color: #9876AA">$options8</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$val </span><span style="color: #007700">= </span><span style="color: #9876AA">db2_get_option</span><span style="color: #007700">(</span><span style="color: #9876AA">$conn8</span><span style="color: #007700">, </span><span style="color: #DD0000">'wrkstnname'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$val </span><span style="color: #007700">. </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Client attributes passed through connection string:<br>db2inst1<br>account<br>myapp<br>workstation<br>Client attributes passed post-connection:<br>db2inst1<br>account<br>myapp<br>workstation</span></div>    </div>   </div>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.db2-get-option-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link db2_connect()} - Returns a connection to a database</span></li>    <li class="member"><span class="function">{@link db2_cursor_type()} - Returns the cursor type used by a statement resource</span></li>    <li class="member"><span class="function">{@link db2_exec()} - Executes an SQL statement directly</span></li>    <li class="member"><span class="function">{@link db2_set_option()} - Set options for connection or statement resources</span></li>    <li class="member"><span class="function">{@link db2_pconnect()} - Returns a persistent connection to a database</span></li>    <li class="member"><span class="function">{@link db2_prepare()} - Prepares an SQL statement to be executed</span></li>   </ul>  </span> </div></div>