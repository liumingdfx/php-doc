<div id="datetimeimmutable.construct" class="refentry"> <div class="refnamediv">  <h1 class="refname">DateTimeImmutable::__construct</h1>  <h1 class="refname">date_create_immutable</h1>  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">DateTimeImmutable::__construct</span> -- <span class="refname">date_create_immutable</span> &mdash; <span class="dc-title">Returns new DateTimeImmutable object</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-datetimeimmutable.construct-description">  <h3 class="title">说明</h3>  <p class="para">面向对象风格</p>  <div class="constructorsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>DateTimeImmutable::__construct</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$datetime</span><span class="initializer"> = &quot;now&quot;</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimezone.php" class="type DateTimeZone" style="color:#EAB766">DateTimeZone</a></span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$timezone</span><span class="initializer"> = <strong><span>null</span></strong></span></span>)</div>  <p class="para rdfs-comment">过程化风格</p>  <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832">{@link date_create_immutable}</span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$datetime</span><span class="initializer"> = &quot;now&quot;</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimezone.php" class="type DateTimeZone" style="color:#EAB766">DateTimeZone</a></span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$timezone</span><span class="initializer"> = <strong><span>null</span></strong></span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeimmutable.php" class="type DateTimeImmutable" style="color:#EAB766">DateTimeImmutable</a></span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   Returns new a DateTimeImmutable object.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-datetimeimmutable.construct-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">datetime</span></dt>    <dd>     <span>日期/时间字符串。正确格式的说明详见 <a href="https://www.php.net/manual/zh/datetime.formats.php" class="link">日期与时间格式</a>。</span>     <p class="para">      Enter <span>&quot;now&quot;</span> here to obtain the current time when using      the <span class="parameter" style="color:#3A95FF">$timezone</span> parameter.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">timezone</span></dt>    <dd>     <p class="para">      A <span class="classname"><a href="https://www.php.net/manual/zh/class.datetimezone.php" class="classname">DateTimeZone</a></span> object representing the      timezone of <span class="parameter" style="color:#3A95FF">$datetime</span>.     </p>     <p class="para">      If <span class="parameter" style="color:#3A95FF">$timezone</span> is omitted or <strong><span>null</span></strong>,      the current timezone will be used.     </p>     <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:       <p class="para">       The <span class="parameter" style="color:#3A95FF">$timezone</span> parameter       and the current timezone are ignored when the       <span class="parameter" style="color:#3A95FF">$datetime</span> parameter either       is a UNIX timestamp (e.g. <span>@946684800</span>)       or specifies a timezone       (e.g. <span>2010-01-28T15:00:00+02:00</span>, or       <span>2010-07-05T06:00:00Z</span>).      </p>     </p></blockquote>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-datetimeimmutable.construct-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Returns a new DateTimeImmutable instance.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-datetimeimmutable.construct-errors">  <h3 class="title">错误／异常</h3>  <p class="para">    If an invalid Date/Time string is passed,    <span class="exceptionname"><a href="https://www.php.net/manual/zh/class.datemalformedstringexception.php" class="exceptionname">DateMalformedStringException</a></span> is thrown.    Previous to PHP 8.3, this was <span class="exceptionname"><a href="https://www.php.net/manual/zh/class.exception.php" class="exceptionname">Exception</a></span>.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-datetimeimmutable.construct-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>8.3.0</td>       <td>        Now throws        <span class="exceptionname"><a href="https://www.php.net/manual/zh/class.datemalformedstringexception.php" class="exceptionname">DateMalformedStringException</a></span> if an        invalid string is passed, instead of        <span class="exceptionname"><a href="https://www.php.net/manual/zh/class.exception.php" class="exceptionname">Exception</a></span>.       </td>      </tr>      <tr>       <td>7.1.0</td>       <td>From now on microseconds are filled with actual value. Not with &#039;00000&#039;.</td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-datetimeimmutable.construct-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">DateTimeImmutable::__construct()</strong></span> example</strong></p>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">try {<br />    </span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />} catch (</span><span style="color: #9876AA">Exception $e</span><span style="color: #007700">) {<br />    echo </span><span style="color: #9876AA">$e</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">getMessage</span><span style="color: #007700">();<br />    exit(</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br />}<br /><br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$date </span><span style="color: #007700">= </span><span style="color: #9876AA">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />if (!</span><span style="color: #9876AA">$date</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">$e </span><span style="color: #007700">= </span><span style="color: #9876AA">date_get_last_errors</span><span style="color: #007700">();<br />    foreach (</span><span style="color: #9876AA">$e</span><span style="color: #007700">[</span><span style="color: #DD0000">'errors'</span><span style="color: #007700">] as </span><span style="color: #9876AA">$error</span><span style="color: #007700">) {<br />        echo </span><span style="color: #DD0000">"</span><span style="color: #9876AA">$error</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    }<br />    exit(</span><span style="color: #9876AA">1</span><span style="color: #007700">);<br />}<br /><br />echo </span><span style="color: #9876AA">date_format</span><span style="color: #007700">(</span><span style="color: #9876AA">$date</span><span style="color: #007700">, </span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>2000-01-01<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #2 Intricacies of <span class="function"><strong style="color:#CC7832">DateTimeImmutable::__construct()</strong></span></strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Specified date/time in your computer's time zone.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Specified date/time in the specified time zone.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-01-01'</span><span style="color: #007700">, new </span><span style="color: #9876AA">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pacific/Nauru'</span><span style="color: #007700">));<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Current date/time in your computer's time zone.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">();<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Current date/time in the specified time zone.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'now'</span><span style="color: #007700">, new </span><span style="color: #9876AA">DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">'Pacific/Nauru'</span><span style="color: #007700">));<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Using a UNIX timestamp.  Notice the result is in the UTC time zone.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'@946684800'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// Non-existent values roll over.<br /></span><span style="color: #9876AA">$date </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-02-30'</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$date</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d H:i:sP'</span><span style="color: #007700">) . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例的输出类似于：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>2000-01-01 00:00:00-05:00<br>2000-01-01 00:00:00+12:00<br>2010-04-24 10:24:16-04:00<br>2010-04-25 02:24:16+12:00<br>2000-01-01 00:00:00+00:00<br>2000-03-01 00:00:00-05:00<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #3 Changing the associated timezone</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$timeZone </span><span style="color: #007700">= new </span><span style="color: #9876AA">\DateTimeZone</span><span style="color: #007700">(</span><span style="color: #DD0000">'Asia/Tokyo'</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$time </span><span style="color: #007700">= new </span><span style="color: #9876AA">\DateTimeImmutable</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">$time </span><span style="color: #007700">= </span><span style="color: #9876AA">$time</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">setTimezone</span><span style="color: #007700">(</span><span style="color: #9876AA">$timeZone</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #9876AA">$time</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y/m/d H:i:s'</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例的输出类似于：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>2022/08/12 23:49:23<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #4 Using a relative date/time string</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$time </span><span style="color: #007700">= new </span><span style="color: #9876AA">\DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">"-1 year"</span><span style="color: #007700">);<br /><br />echo </span><span style="color: #9876AA">$time</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y/m/d H:i:s'</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例的输出类似于：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>2021/08/12 15:43:51<br></span></div>   </div>  </div> </div></div>