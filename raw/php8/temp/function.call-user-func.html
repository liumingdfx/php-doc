<div id="function.call-user-func" class="refentry"> <div class="refnamediv">  <h1 class="refname">call_user_func</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">call_user_func</span> &mdash; <span class="dc-title">把第一个参数作为回调函数调用</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.call-user-func-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>call_user_func</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$callback</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$args</span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div>  <p class="para rdfs-comment">   第一个参数 <span class="parameter" style="color:#3A95FF">callback</span> 是被调用的回调函数，其余参数是回调函数的参数。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.call-user-func-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">callback</span></dt>     <dd>      <p class="para">       将被调用的回调函数（<span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span>）。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">args</span></dt>     <dd>      <p class="para">       0个或以上的参数，被传入回调函数。      </p>      <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:        <p class="para">        请注意，传入<span class="function"><strong style="color:#CC7832">call_user_func()</strong></span>的参数不能为引用传递。        <div class="example" id="">         <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">call_user_func()</strong></span> 的参考例子</strong></p>         <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />error_reporting</span><span style="color: #007700">(</span><span style="color: #9876AA">E_ALL</span><span style="color: #007700">);<br />function </span><span style="color: #9876AA">increment</span><span style="color: #007700">(&amp;</span><span style="color: #9876AA">$var</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #9876AA">$var</span><span style="color: #007700">++;<br />}<br /><br /></span><span style="color: #9876AA">$a </span><span style="color: #007700">= </span><span style="color: #9876AA">0</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'increment'</span><span style="color: #007700">, </span><span style="color: #9876AA">$a</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$a</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// it is possible to use this instead<br /></span><span style="color: #9876AA">call_user_func_array</span><span style="color: #007700">(</span><span style="color: #DD0000">'increment'</span><span style="color: #007700">, array(&amp;</span><span style="color: #9876AA">$a</span><span style="color: #007700">));<br />echo </span><span style="color: #9876AA">$a</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// it is also possible to use a variable function<br /></span><span style="color: #9876AA">$increment </span><span style="color: #007700">= </span><span style="color: #DD0000">'increment'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$increment</span><span style="color: #007700">(</span><span style="color: #9876AA">$a</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$a</span><span style="color: #007700">.</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>         </div>         <div class="example-contents"><p>以上示例会输出：</p></div>         <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Warning: Parameter 1 to increment() expected to be a reference, value given in …<br>0<br>1<br>2<br></span></div>         </div>        </div>       </p>      </p></blockquote>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.call-user-func-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回回调函数的返回值。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.call-user-func-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">call_user_func()</strong></span> 的例子</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #9876AA">barber</span><span style="color: #007700">(</span><span style="color: #9876AA">$type</span><span style="color: #007700">)<br />{<br />    echo </span><span style="color: #DD0000">"You wanted a </span><span style="color: #9876AA">$type</span><span style="color: #DD0000"> haircut, no problem\n"</span><span style="color: #007700">;<br />}<br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'barber'</span><span style="color: #007700">, </span><span style="color: #DD0000">"mushroom"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(</span><span style="color: #DD0000">'barber'</span><span style="color: #007700">, </span><span style="color: #DD0000">"shave"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>You wanted a mushroom haircut, no problem<br>You wanted a shave haircut, no problem<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #3 <span class="function"><strong style="color:#CC7832">call_user_func()</strong></span> 命名空间的使用</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #007700">namespace </span><span style="color: #9876AA">Foobar</span><span style="color: #007700">;<br /><br />class </span><span style="color: #9876AA">Foo </span><span style="color: #007700">{<br />    static public function </span><span style="color: #9876AA">test</span><span style="color: #007700">() {<br />        print </span><span style="color: #DD0000">"Hello world!\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(</span><span style="color: #9876AA">__NAMESPACE__ </span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo::test'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #9876AA">__NAMESPACE__ </span><span style="color: #007700">.</span><span style="color: #DD0000">'\Foo'</span><span style="color: #007700">, </span><span style="color: #DD0000">'test'</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Hello world!<br>Hello world!<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #4 用<span class="function"><strong style="color:#CC7832">call_user_func()</strong></span>来调用一个类里面的方法</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br /></span><span style="color: #007700">class </span><span style="color: #9876AA">myclass </span><span style="color: #007700">{<br />    static function </span><span style="color: #9876AA">say_hello</span><span style="color: #007700">()<br />    {<br />        echo </span><span style="color: #DD0000">"Hello!\n"</span><span style="color: #007700">;<br />    }<br />}<br /><br /></span><span style="color: #9876AA">$classname </span><span style="color: #007700">= </span><span style="color: #DD0000">"myclass"</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #9876AA">$classname</span><span style="color: #007700">, </span><span style="color: #DD0000">'say_hello'</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(</span><span style="color: #9876AA">$classname </span><span style="color: #007700">.</span><span style="color: #DD0000">'::say_hello'</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$myobject </span><span style="color: #007700">= new </span><span style="color: #9876AA">myclass</span><span style="color: #007700">();<br /><br /></span><span style="color: #9876AA">call_user_func</span><span style="color: #007700">(array(</span><span style="color: #9876AA">$myobject</span><span style="color: #007700">, </span><span style="color: #DD0000">'say_hello'</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Hello!<br>Hello!<br>Hello!<br></span></div>    </div>      </div>   <div class="example" id="">    <p><strong>示例 #5 把完整的函数作为回调传入<span class="function"><strong style="color:#CC7832">call_user_func()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />call_user_func</span><span style="color: #007700">(function(</span><span style="color: #9876AA">$arg</span><span style="color: #007700">) { print </span><span style="color: #DD0000">"[</span><span style="color: #9876AA">$arg</span><span style="color: #DD0000">]\n"</span><span style="color: #007700">; }, </span><span style="color: #DD0000">'test'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>[test]<br></span></div>    </div>      </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.call-user-func-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>: <p class="para">在函数中注册有多个回调内容时(如使用<span class="function"><strong style="color:#CC7832">call_user_func()</strong></span> 与 <span class="function">{@link call_user_func_array()}</span>)，如在前一个回调中有未捕获的异常，其后的将不再被调用。</p></p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.call-user-func-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link call_user_func_array()} - 调用回调函数，并把一个数组参数作为回调函数的参数</span></li>    <li class="member"><span class="function">{@link is_callable()} - 验证值是否可以在当前范围内作为函数调用。</span></li>    <li class="member"><a href="https://www.php.net/manual/zh/functions.variable-functions.php" class="link">Variable functions</a></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link ReflectionFunction::invoke()} - Invokes function</span></li>    <li class="member"><span class="methodname" style="color:#CC7832">{@link ReflectionMethod::invoke()} - Invoke</span></li>   </ul>  </span> </div></div>