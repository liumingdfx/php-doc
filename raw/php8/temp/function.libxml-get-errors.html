<div id="function.libxml-get-errors" class="refentry"> <div class="refnamediv">  <h1 class="refname">libxml_get_errors</h1>  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">libxml_get_errors</span> &mdash; <span class="dc-title">   Retrieve array of errors  </span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.libxml-get-errors-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>libxml_get_errors</strong></span>(): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">   Retrieve array of errors.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.libxml-get-errors-parameters">  <h3 class="title">参数</h3>  <span>此函数没有参数。</span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.libxml-get-errors-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Returns an array with <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.libxmlerror.php" class="type LibXMLError" style="color:#EAB766">LibXMLError</a></span> objects if there are any   errors in the buffer, or an empty array otherwise.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.libxml-get-errors-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 A <span class="function"><strong style="color:#CC7832">libxml_get_errors()</strong></span> example</strong></p>    <div class="example-contents"><p>     This example demonstrates how to build a simple libxml error handler.    </p></div>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />libxml_use_internal_errors</span><span style="color: #007700">(</span><span style="color: #9876AA">true</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$xmlstr </span><span style="color: #007700">= &lt;&lt;&lt; XML<br /></span><span style="color: #DD0000">&lt;?xml version='1.0' standalone='yes'?&gt;<br />&lt;movies&gt;<br /> &lt;movie&gt;<br />  &lt;titles&gt;PHP: Behind the Parser&lt;/title&gt;<br /> &lt;/movie&gt;<br />&lt;/movies&gt;<br /></span><span style="color: #007700">XML;<br /><br /></span><span style="color: #9876AA">$doc </span><span style="color: #007700">= </span><span style="color: #9876AA">simplexml_load_string</span><span style="color: #007700">(</span><span style="color: #9876AA">$xmlstr</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$xml </span><span style="color: #007700">= </span><span style="color: #9876AA">explode</span><span style="color: #007700">(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$xmlstr</span><span style="color: #007700">);<br /><br />if (</span><span style="color: #9876AA">$doc </span><span style="color: #007700">=== </span><span style="color: #9876AA">false</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">$errors </span><span style="color: #007700">= </span><span style="color: #9876AA">libxml_get_errors</span><span style="color: #007700">();<br /><br />    foreach (</span><span style="color: #9876AA">$errors </span><span style="color: #007700">as </span><span style="color: #9876AA">$error</span><span style="color: #007700">) {<br />        echo </span><span style="color: #9876AA">display_xml_error</span><span style="color: #007700">(</span><span style="color: #9876AA">$error</span><span style="color: #007700">, </span><span style="color: #9876AA">$xml</span><span style="color: #007700">);<br />    }<br /><br />    </span><span style="color: #9876AA">libxml_clear_errors</span><span style="color: #007700">();<br />}<br /><br /><br />function </span><span style="color: #9876AA">display_xml_error</span><span style="color: #007700">(</span><span style="color: #9876AA">$error</span><span style="color: #007700">, </span><span style="color: #9876AA">$xml</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #9876AA">$return  </span><span style="color: #007700">= </span><span style="color: #9876AA">$xml</span><span style="color: #007700">[</span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">line </span><span style="color: #007700">- </span><span style="color: #9876AA">1</span><span style="color: #007700">] . </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />    </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #9876AA">str_repeat</span><span style="color: #007700">(</span><span style="color: #DD0000">'-'</span><span style="color: #007700">, </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">column</span><span style="color: #007700">) . </span><span style="color: #DD0000">"^\n"</span><span style="color: #007700">;<br /><br />    switch (</span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">level</span><span style="color: #007700">) {<br />        case </span><span style="color: #9876AA">LIBXML_ERR_WARNING</span><span style="color: #007700">:<br />            </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #DD0000">"Warning </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">code</span><span style="color: #DD0000">: "</span><span style="color: #007700">;<br />            break;<br />         case </span><span style="color: #9876AA">LIBXML_ERR_ERROR</span><span style="color: #007700">:<br />            </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #DD0000">"Error </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">code</span><span style="color: #DD0000">: "</span><span style="color: #007700">;<br />            break;<br />        case </span><span style="color: #9876AA">LIBXML_ERR_FATAL</span><span style="color: #007700">:<br />            </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #DD0000">"Fatal Error </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">code</span><span style="color: #DD0000">: "</span><span style="color: #007700">;<br />            break;<br />    }<br /><br />    </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #9876AA">trim</span><span style="color: #007700">(</span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">message</span><span style="color: #007700">) .<br />               </span><span style="color: #DD0000">"\n  Line: </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">line</span><span style="color: #DD0000">" </span><span style="color: #007700">.<br />               </span><span style="color: #DD0000">"\n  Column: </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">column</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br /><br />    if (</span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">file</span><span style="color: #007700">) {<br />        </span><span style="color: #9876AA">$return </span><span style="color: #007700">.= </span><span style="color: #DD0000">"\n  File: </span><span style="color: #9876AA">$error</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">file</span><span style="color: #DD0000">"</span><span style="color: #007700">;<br />    }<br /><br />    return </span><span style="color: #DD0000">"</span><span style="color: #9876AA">$return</span><span style="color: #DD0000">\n\n--------------------------------------------\n\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>  &lt;titles&gt;PHP: Behind the Parser&lt;/title&gt;<br>----------------------------------------------^<br>Fatal Error 76: Opening and ending tag mismatch: titles line 4 and title<br>  Line: 4<br>  Column: 46<br><br>--------------------------------------------<br></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.libxml-get-errors-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link libxml_get_last_error()} - Retrieve last error from libxml</span></li>    <li class="member"><span class="function">{@link libxml_clear_errors()} - Clear libxml error buffer</span></li>   </ul>  </span> </div></div>