<div id="function.grapheme-extract" class="refentry"> <div class="refnamediv">  <h1 class="refname">grapheme_extract</h1>  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8, PECL intl &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">grapheme_extract</span> &mdash; <span class="dc-title">Function to extract a sequence of default grapheme clusters from a text buffer, which must be encoded in UTF-8</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.grapheme-extract-description">  <h3 class="title">说明</h3>  <p class="para">过程化风格</p>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>grapheme_extract</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$haystack</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$size</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$type</span><span class="initializer"> = <strong><span>GRAPHEME_EXTR_COUNT</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$offset</span><span class="initializer"> = 0</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">&$next</span><span class="initializer"> = <strong><span>null</span></strong></span></span><br>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">string</span>|<span class="type" style="color:#EAB766"><span class="type false" style="color:#EAB766">false</span></span></span></div>  <p class="para rdfs-comment">   Function to extract a sequence of default grapheme clusters from a text buffer, which must be encoded in UTF-8.   </p>   </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.grapheme-extract-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">haystack</span></dt>     <dd>      <p class="para">       String to search.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">size</span></dt>     <dd>      <p class="para">       Maximum number items - based on the <span class="parameter" style="color:#3A95FF">type</span> - to return.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">type</span></dt>     <dd>      <p class="para">       Defines the type of units referred to by the <span class="parameter" style="color:#3A95FF">size</span> parameter:      </p>       <p class="para">        <ul class="simplelist">         <li class="member">GRAPHEME_EXTR_COUNT (default) -<span class="parameter" style="color:#3A95FF">size</span> is the number of default         grapheme clusters to extract.</li>         <li class="member">GRAPHEME_EXTR_MAXBYTES -<span class="parameter" style="color:#3A95FF">size</span> is the maximum number of bytes         returned.</li>         <li class="member">GRAPHEME_EXTR_MAXCHARS - <span class="parameter" style="color:#3A95FF">size</span> is the maximum number of UTF-8         characters returned.</li>        </ul>       </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">offset</span></dt>     <dd>      <p class="para">       Starting position in <span class="parameter" style="color:#3A95FF">haystack</span> in bytes - if given, it must be zero or a       positive value that is less than or equal to the length of <span class="parameter" style="color:#3A95FF">haystack</span> in       bytes, or a negative value that counts from the end of <span class="parameter" style="color:#3A95FF">haystack</span>.       If <span class="parameter" style="color:#3A95FF">offset</span> does not point to the first byte of a UTF-8       character, the start position is moved to the next character boundary.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">next</span></dt>     <dd>      <p class="para">       Reference to a value that will be set to the next starting position.       When the call returns, this may point to the first byte position past the end of the string.      </p>     </dd>        </dl>  </span> </div>     <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.grapheme-extract-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   A string starting at offset <span class="parameter" style="color:#3A95FF">offset</span> and ending on a default grapheme cluster   boundary that conforms to the <span class="parameter" style="color:#3A95FF">size</span> and <span class="parameter" style="color:#3A95FF">type</span> specified,    或者在失败时返回 <strong><span>false</span></strong>.  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.grapheme-extract-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>7.1.0</td>      <td>       Support for negative <span class="parameter" style="color:#3A95FF">offset</span>s has been added.      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.grapheme-extract-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">grapheme_extract()</strong></span> example</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /><br />$char_a_ring_nfd </span><span style="color: #007700">= </span><span style="color: #DD0000">"a\xCC\x8A"</span><span style="color: #007700">;  </span><span style="color: #FF8000">// 'LATIN SMALL LETTER A WITH RING ABOVE' (U+00E5) normalization form "D"<br /></span><span style="color: #9876AA">$char_o_diaeresis_nfd </span><span style="color: #007700">= </span><span style="color: #DD0000">"o\xCC\x88"</span><span style="color: #007700">; </span><span style="color: #FF8000">// 'LATIN SMALL LETTER O WITH DIAERESIS' (U+00F6) normalization form "D"<br /><br /></span><span style="color: #007700">print </span><span style="color: #9876AA">urlencode</span><span style="color: #007700">(</span><span style="color: #9876AA">grapheme_extract</span><span style="color: #007700">( </span><span style="color: #9876AA">$char_a_ring_nfd </span><span style="color: #007700">. </span><span style="color: #9876AA">$char_o_diaeresis_nfd</span><span style="color: #007700">, </span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #9876AA">GRAPHEME_EXTR_COUNT</span><span style="color: #007700">, </span><span style="color: #9876AA">2</span><span style="color: #007700">));<br /><br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div>  <span>以上示例会输出：</span>  <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>o%CC%88<br></span></div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.grapheme-extract-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link grapheme_substr()} - Return part of a string</span></li>     <li class="member">      <a href="http://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries" class="link external">&raquo;&nbsp;       Unicode Text Segmentation: Grapheme Cluster Boundaries      </a>     </li>   </ul>  </span> </div></div>