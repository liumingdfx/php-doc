<div id="function.session-start" class="refentry"> <div class="refnamediv">  <h1 class="refname">session_start</h1>  <p class="verinfo">(PHP 4, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">session_start</span> &mdash; <span class="dc-title">启动新会话或者重用现有会话</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.session-start-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>session_start</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$options</span><span class="initializer"> = []</span></span>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 会创建新会话或者重用现有会话。   如果通过 GET 或者 POST 方式，或者使用 cookie 提交了会话 ID，   则会重用现有会话。  </p>  <p class="para">   当会话自动开始或者通过 <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 手动开始的时候，   PHP 内部会调用会话处理程序的 open 和 read 回调函数。   会话处理程序可能是 PHP 默认的，   也可能是扩展提供的（SQLite 或者 Memcached 扩展），   也可能是通过 <span class="function">{@link session_set_save_handler()}</span> 设定的用户自定义会话处理程序。   通过 read 回调函数返回的现有会话数据（使用特殊的序列化格式存储），   PHP 会自动反序列化数据并且填充 $_SESSION 超级全局变量。  </p>  <p class="para">   要想使用命名会话，请在调用 <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 函数   之前调用 <span class="function">{@link session_name()}</span> 函数。  </p>  <p class="para">   如果启用了 <a href="https://www.php.net/manual/zh/session.configuration.php#ini.session.use-trans-sid" class="link">session.use_trans_sid</a> 选项，   <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 函数会注册一个内部输出处理程序，   该输出处理程序完成 URL 重写的工作。  </p>  <p class="para">   如果用户联合使用 <span class="function">{@link ob_start()}</span>    和 <span>ob_gzhandler</span> 函数，   那么函数的调用顺序会影响输出结果。   例如，必须在开始会话之前调用 <span>ob_gzhandler</span> 函数完成注册。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.session-start-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">options</span></dt>    <dd>     <span>      此参数是一个关联数组，如果提供，那么会用其中的项目覆盖 <a href="https://www.php.net/manual/zh/session.configuration.php" class="link">会话配置指示</a> 中的配置项。此数组中的键无需包含 <span>session.</span> 前缀。     </span>     <p class="para">      除了常规的会话配置指示项，      还可以在此数组中包含 <span>read_and_close</span>      选项。如果将此选项的值设置为 <strong><span>true</span></strong>，      那么会话文件会在读取完毕之后马上关闭，      因此，可以在会话数据没有变动的时候，避免不必要的文件锁。     </p>    </dd>     </dl> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.session-start-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功开始会话返回 <strong><span>true</span></strong> ，反之返回 <strong><span>false</span></strong>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.session-start-changelog">  <h3 class="title">更新日志</h3>  <span>   <table class="doctable informaltable">         <thead>      <tr>       <th>版本</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td>7.1.0</td>       <td>        当 <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 执行失败，        无法开始一个会话的时候，会返回 <strong><span>false</span></strong>，        并且不会初始化超级变量 <var class="varname"><a href="https://www.php.net/manual/zh/reserved.variables.session.php" class="classname">$_SESSION</a></var>。       </td>      </tr>     </tbody>       </table>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.session-start-examples">  <h3 class="title">示例</h3>  <div class="refsect2 unknown-unknown-exampleu" id="refsect2-function.session-start-unknown-unknown-exampleu">  <h4 class="title">基本的会话示例</h4>  <span>   <div class="example" id="">    <p><strong>示例 #1 <var class="filename">page1.php</var></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// page1.php<br /><br /></span><span style="color: #9876AA">session_start</span><span style="color: #007700">();<br /><br />echo </span><span style="color: #DD0000">'Welcome to page #1'</span><span style="color: #007700">;<br /><br /></span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'favcolor'</span><span style="color: #007700">] = </span><span style="color: #DD0000">'green'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal'</span><span style="color: #007700">]   = </span><span style="color: #DD0000">'cat'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'time'</span><span style="color: #007700">]     = </span><span style="color: #9876AA">time</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">// 如果使用 cookie 方式传送会话 ID<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'&lt;br /&gt;&lt;a href="page2.php"&gt;page 2&lt;/a&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">// 如果不是使用 cookie 方式传送会话 ID，则使用 URL 改写的方式传送会话 ID<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'&lt;br /&gt;&lt;a href="page2.php?' </span><span style="color: #007700">. </span><span style="color: #9876AA">SID </span><span style="color: #007700">. </span><span style="color: #DD0000">'"&gt;page 2&lt;/a&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span>  <p class="para">   请求 <var class="filename">page1.php</var> 页面之后，   第二个页面 <var class="filename">page2.php</var>    会包含会话数据。   请查阅 <a href="https://www.php.net/manual/zh/ref.session.php" class="link">会话参考</a>   获取更多关于 <a href="https://www.php.net/manual/zh/session.idpassing.php" class="link">会话 ID 传送</a>的信息，   在该参考页面中有关于常量 <strong><span>SID</span></strong> 的详细说明。  </p>  <p class="para">   <div class="example" id="">    <p><strong>示例 #2 <var class="filename">page2.php</var></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// page2.php<br /><br /></span><span style="color: #9876AA">session_start</span><span style="color: #007700">();<br /><br />echo </span><span style="color: #DD0000">'Welcome to page #2&lt;br /&gt;'</span><span style="color: #007700">;<br /><br />echo </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'favcolor'</span><span style="color: #007700">]; </span><span style="color: #FF8000">// green<br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'animal'</span><span style="color: #007700">];   </span><span style="color: #FF8000">// cat<br /></span><span style="color: #007700">echo </span><span style="color: #9876AA">date</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y m d H:i:s'</span><span style="color: #007700">, </span><span style="color: #9876AA">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'time'</span><span style="color: #007700">]);<br /><br /></span><span style="color: #FF8000">// 类似 page1.php 中的代码，你可能需要在这里处理使用 SID 的场景<br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">'&lt;br /&gt;&lt;a href="page1.php"&gt;page 1&lt;/a&gt;'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </p> </div> <div class="refsect2 unknown-unknown-unknown-unknown-unknown-examplex" id="refsect2-function.session-start-unknown-unknown-unknown-unknown-unknown-examplex">   <h4 class="title">调用 <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 的时候指定选项</h4>   <div class="example" id="">    <p><strong>示例 #3 覆盖 Cookie 超时时间设定</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 设置 cookie 的有效时间为 1 天<br /></span><span style="color: #9876AA">session_start</span><span style="color: #007700">([<br />    </span><span style="color: #DD0000">'cookie_lifetime' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">86400</span><span style="color: #007700">,<br />]);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #4 读取会话之后立即关闭会话存储文件</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// 如果确定不修改会话中的数据，<br />// 我们可以在会话文件读取完毕之后立即关闭它<br />// 来避免由于给会话文件加锁导致其他页面阻塞<br /></span><span style="color: #9876AA">session_start</span><span style="color: #007700">([<br />    </span><span style="color: #DD0000">'cookie_lifetime' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">86400</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'read_and_close'  </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">true</span><span style="color: #007700">,<br />]);</span></span></span></div>    </div>   </div>  </div>   </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.session-start-notes">  <h3 class="title">注释</h3>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    要使用基于 cookie 的会话，    必须在输出开始之前调用 <span class="function"><strong style="color:#CC7832">session_start()</strong></span> 函数。   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    建议使用 <a href="https://www.php.net/manual/zh/zlib.configuration.php#ini.zlib.output-compression" class="link">zlib.output_compression</a>    来替代 <span class="function">{@link ob_gzhandler()}</span>。   </p>  </p></blockquote>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:    <p class="para">    根据配置不同，本函数会发送几个 HTTP 响应头。    参考 <span class="function">{@link session_cache_limiter()}</span>    来自定义 HTTP 响应头。   </p>  </p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.session-start-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><var class="varname"><a href="https://www.php.net/manual/zh/reserved.variables.session.php" class="classname">$_SESSION</a></var></li>    <li class="member">     <a href="https://www.php.net/manual/zh/session.configuration.php#ini.session.auto-start" class="link">session.auto_start</a>     配置指示    </li>    <li class="member"><span class="function">{@link session_id()} - 获取/设置当前会话 ID</span></li>   </ul>  </span> </div></div>