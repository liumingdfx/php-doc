<div id="datetime.diff" class="refentry"> <div class="refnamediv">  <h1 class="refname">DateTimeInterface::diff</h1>  <h1 class="refname">DateTimeImmutable::diff</h1>  <h1 class="refname">DateTime::diff</h1>  <h1 class="refname">date_diff</h1>  <p class="verinfo">(PHP 5 &gt;= 5.3.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">DateTimeInterface::diff</span> -- <span class="refname">DateTimeImmutable::diff</span> -- <span class="refname">DateTime::diff</span> -- <span class="refname">date_diff</span> &mdash; <span class="dc-title">返回两个 DateTime 之间的差值</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-datetime.diff-description">  <h3 class="title">说明</h3>  <p class="para">面向对象风格</p>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>DateTimeInterface::diff</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$targetObject</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$absolute</span><span class="initializer"> = <strong><span>false</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span></div>  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>DateTimeImmutable::diff</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$targetObject</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$absolute</span><span class="initializer"> = <strong><span>false</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span></div>  <div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>DateTime::diff</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$targetObject</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$absolute</span><span class="initializer"> = <strong><span>false</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span></div>  <p class="para rdfs-comment">过程化风格</p>  <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832">{@link date_diff}</span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$baseObject</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="type DateTimeInterface" style="color:#EAB766">DateTimeInterface</a></span> <span class="parameter" style="color:#3A95FF">$targetObject</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$absolute</span><span class="initializer"> = <strong><span>false</span></strong></span></span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="type DateInterval" style="color:#EAB766">DateInterval</a></span></div>  <p class="para rdfs-comment">   返回两个 <span class="classname"><a href="https://www.php.net/manual/zh/class.datetimeinterface.php" class="classname">DateTimeInterface</a></span> 对象的差值。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-datetime.diff-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">datetime</span></dt>    <dd>     <span>      要比较的日期。     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">absolute</span></dt>    <dd>     <p class="para">      间隔是否强制为正的？     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-datetime.diff-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   <span class="classname"><a href="https://www.php.net/manual/zh/class.dateinterval.php" class="classname">DateInterval</a></span> 对象表示两个日期之间的差值。  </p>  <p class="para">   返回更具体的表示应用于原始对象（<span class="parameter" style="color:#3A95FF">$this</span> 或   <span class="parameter" style="color:#3A95FF">$originObject</span>）到达 <span class="parameter" style="color:#3A95FF">$targetObject</span>   的时钟时间间隔的值。该过程始终不可逆。  </p>  <p class="para">   该方法知道 DST 转换，因此可以根据示例返回 <span>24 小时 30   分钟</span>的时间间隔。如果想使用绝对时间计算，则需要先将   <span class="parameter" style="color:#3A95FF">$this</span>/<span class="parameter" style="color:#3A95FF">$baseObject</span> 和   <span class="parameter" style="color:#3A95FF">$targetObject</span> 都转换为 UTC。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-datetime.diff-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">DateTimeImmutable::diff()</strong></span> 示例</strong></p>   <div class="example-contents"><p>面向对象风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$origin </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-11'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$target </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-13'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$interval </span><span style="color: #007700">= </span><span style="color: #9876AA">$origin</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">diff</span><span style="color: #007700">(</span><span style="color: #9876AA">$target</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%R%a days'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>过程化风格</p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$origin </span><span style="color: #007700">= </span><span style="color: #9876AA">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-11'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$target </span><span style="color: #007700">= </span><span style="color: #9876AA">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2009-10-13'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$interval </span><span style="color: #007700">= </span><span style="color: #9876AA">date_diff</span><span style="color: #007700">(</span><span style="color: #9876AA">$origin</span><span style="color: #007700">, </span><span style="color: #9876AA">$target</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'%R%a days'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>+2 days<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #2 DST 转换期间的 <span class="methodname" style="color:#CC7832"><strong>DateTimeInterface::diff()</strong></span></strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$originalTime </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">"2021-10-30 09:00:00 Europe/London"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$targedTime </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">"2021-10-31 08:30:00 Europe/London"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$interval </span><span style="color: #007700">= </span><span style="color: #9876AA">$originalTime</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">diff</span><span style="color: #007700">(</span><span style="color: #9876AA">$targedTime</span><span style="color: #007700">);<br />echo </span><span style="color: #9876AA">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">"%H:%I:%S (Full days: %a)"</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>24:30:00 (Full days: 0)<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #3 <span class="methodname" style="color:#CC7832"><strong>DateTimeInterface::diff()</strong></span> range</strong></p>   <div class="example-contents"><p>    该方法返回的值是从 <span class="parameter" style="color:#3A95FF">$this</span> 到达 <span class="parameter" style="color:#3A95FF">$targetObject</span>     所需要的精确时间。因此，将 1 月 1 日与 12 月 31 日进行比较，返回的结果是 364，而不是    365 天（对于非闰年）。   </p></div>   <div class="example-contents">    <div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$originalTime </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">"2023-01-01 UTC"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$targedTime </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTimeImmutable</span><span style="color: #007700">(</span><span style="color: #DD0000">"2023-12-31 UTC"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$interval </span><span style="color: #007700">= </span><span style="color: #9876AA">$originalTime</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">diff</span><span style="color: #007700">(</span><span style="color: #9876AA">$targedTime</span><span style="color: #007700">);<br />echo </span><span style="color: #DD0000">"Full days: "</span><span style="color: #007700">, </span><span style="color: #9876AA">$interval</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">format</span><span style="color: #007700">(</span><span style="color: #DD0000">"%a"</span><span style="color: #007700">), </span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;">    <div class="cdata"><span>Full days: 364<br></span></div>   </div>  </div>  <div class="example" id="">   <p><strong>示例 #4 <span class="classname"><a href="https://www.php.net/manual/zh/class.datetime.php" class="classname">DateTime</a></span> 对象比较</strong></p>   <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:     <span>     <span class="classname"><a href="https://www.php.net/manual/zh/class.datetimeimmutable.php" class="classname">DateTimeImmutable</a></span> 和 <span class="classname"><a href="https://www.php.net/manual/zh/class.datetime.php" class="classname">DateTime</a></span>     对象可以使用<a href="https://www.php.net/manual/zh/language.operators.comparison.php" class="link">比较运算符</a>进行比较。    </span>   </p></blockquote>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$date1 </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">"now"</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$date2 </span><span style="color: #007700">= new </span><span style="color: #9876AA">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">"tomorrow"</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$date1 </span><span style="color: #007700">== </span><span style="color: #9876AA">$date2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$date1 </span><span style="color: #007700">&lt; </span><span style="color: #9876AA">$date2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">$date1 </span><span style="color: #007700">&gt; </span><span style="color: #9876AA">$date2</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>  </div>  <div class="example-contents"><p>以上示例会输出：</p></div>  <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>bool(false)<br>bool(true)<br>bool(false)<br></span></div>  </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-datetime.diff-seealso">  <h3 class="title">参见</h3>  <ul class="simplelist">   <li class="member"><span class="function">{@link DateInterval::format()} - Formats the interval</span></li>   <li class="member"><span class="function">{@link DateTime::add()} - 修改 DateTime 对象，增加天、月、年、小时、分钟以及秒的数量。</span></li>   <li class="member"><span class="function">{@link DateTime::sub()} - 对 DateTime 对象减去一定量的日、月、年、小时、分钟和秒。</span></li>  </ul> </div></div>