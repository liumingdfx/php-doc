<div id="function.ssh2-publickey-add" class="refentry"> <div class="refnamediv">  <h1 class="refname">ssh2_publickey_add</h1>  <p class="verinfo">(PECL ssh2 &gt;= 0.10)</p><p class="refpurpose"><span class="refname">ssh2_publickey_add</span> &mdash; <span class="dc-title">   Add an authorized publickey  </span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.ssh2-publickey-add-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>ssh2_publickey_add</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$pkey</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$algoname</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$blob</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">bool</span> <span class="parameter" style="color:#3A95FF">$overwrite</span><span class="initializer"> = <strong><span>false</span></strong></span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$attributes</span><span class="initializer"> = ?</span></span><br>): <span class="type" style="color:#EAB766">bool</span></div>  <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>: <span class="simpara">公钥子系统用于管理服务器到<em>已</em>被认证的客户端的公钥。要用公钥认证方法来认证远程系统，应使用<span class="function">{@link ssh2_auth_pubkey_file()}</span> 函数。</span></p></blockquote> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.ssh2-publickey-add-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">pkey</span></dt>     <dd>      <p class="para">       Publickey Subsystem resource created by <span class="function">{@link ssh2_publickey_init()}</span>.      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">algoname</span></dt>     <dd>      <p class="para">       Publickey algorithm (e.g.): ssh-dss, ssh-rsa      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">blob</span></dt>     <dd>      <p class="para">       Publickey blob as raw binary data      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">overwrite</span></dt>     <dd>      <p class="para">       If the specified key already exists, should it be overwritten?      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">attributes</span></dt>     <dd>      <p class="para">       Associative array of attributes to assign to this public key.       Refer to ietf-secsh-publickey-subsystem for a list of supported attributes.       To mark an attribute as mandatory, precede its name with an asterisk.       If the server is unable to support an attribute marked mandatory,       it will abort the add process.      </p>     </dd>       </dl>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.ssh2-publickey-add-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>， 或者在失败时返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.ssh2-publickey-add-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 Adding a publickey with <span class="function"><strong style="color:#CC7832">ssh2_publickey_add()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$ssh2 </span><span style="color: #007700">= </span><span style="color: #9876AA">ssh2_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">'shell.example.com'</span><span style="color: #007700">, </span><span style="color: #9876AA">22</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">ssh2_auth_password</span><span style="color: #007700">(</span><span style="color: #9876AA">$ssh2</span><span style="color: #007700">, </span><span style="color: #DD0000">'jdoe'</span><span style="color: #007700">, </span><span style="color: #DD0000">'password'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$pkey </span><span style="color: #007700">= </span><span style="color: #9876AA">ssh2_publickey_init</span><span style="color: #007700">(</span><span style="color: #9876AA">$ssh2</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$keyblob </span><span style="color: #007700">= </span><span style="color: #9876AA">base64_decode</span><span style="color: #007700">(</span><span style="color: #DD0000">'<br />AAAAB3NzaC1yc2EAAAABIwAAAIEA5HVt6VqSGd5PTrLRdjNONxXH1tVFGn0<br />Bd26BF0aCP9qyJRlvdJ3j4WBeX4ZmrveGrjMgkseSYc4xZ26sDHwfL351xj<br />zaLpipu\BGRrw17mWVBhuCExo476ri5tQFzbTc54VEHYckxQ16CjSTibI5X<br />69GmnYC9PNqEYq/1TP+HF10='</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">ssh2_publickey_add</span><span style="color: #007700">(</span><span style="color: #9876AA">$pkey</span><span style="color: #007700">, </span><span style="color: #DD0000">'ssh-rsa'</span><span style="color: #007700">, </span><span style="color: #9876AA">$keyblob</span><span style="color: #007700">, </span><span style="color: #9876AA">false</span><span style="color: #007700">, array(</span><span style="color: #DD0000">'comment'</span><span style="color: #007700">=&gt;</span><span style="color: #DD0000">"John's Key"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.ssh2-publickey-add-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link ssh2_publickey_init()} - Initialize Publickey subsystem</span></li>    <li class="member"><span class="function">{@link ssh2_publickey_remove()} - Remove an authorized publickey</span></li>    <li class="member"><span class="function">{@link ssh2_publickey_list()} - List currently authorized publickeys</span></li>   </ul>  </span> </div></div>