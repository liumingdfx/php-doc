<div id="mysqli-result.fetch-fields" class="refentry"> <div class="refnamediv">  <h1 class="refname">mysqli_result::fetch_fields</h1>  <h1 class="refname">mysqli_fetch_fields</h1>  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mysqli_result::fetch_fields</span> -- <span class="refname">mysqli_fetch_fields</span> &mdash; <span class="dc-title">Returns an array of objects representing the fields in a result set</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-mysqli-result.fetch-fields-description">  <h3 class="title">说明</h3>  <p class="para">面向对象风格</p>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><strong>mysqli_result::fetch_fields</strong></span>(): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">过程化风格</p>  <div class="methodsynopsis dc-description"><span class="methodname" style="color:#CC7832"><strong>mysqli_fetch_fields</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.mysqli-result.php" class="type mysqli_result" style="color:#EAB766">mysqli_result</a></span> <span class="parameter" style="color:#3A95FF">$result</span></span>): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">   This function serves an identical purpose to the    <span class="function"><a href="https://www.php.net/manual/zh/mysqli-result.fetch-field.php" class="function">mysqli_fetch_field()</a></span> function with the single   difference that, instead of returning one object at a time for each field,   the columns are returned as an array of objects.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-mysqli-result.fetch-fields-parameters">  <h3 class="title">参数</h3>  <span>   <dl>    <dt><span class="parameter" style="color:#3A95FF">result</span></dt><dd><p class="para">仅以过程化样式：由<span class="function"><a href="https://www.php.net/manual/zh/mysqli.query.php" class="function">mysqli_query()</a></span>、<span class="function"><a href="https://www.php.net/manual/zh/mysqli.store-result.php" class="function">mysqli_store_result()</a></span>、<span class="function"><a href="https://www.php.net/manual/zh/mysqli.use-result.php" class="function">mysqli_use_result()</a></span>、<span class="function"><a href="https://www.php.net/manual/zh/mysqli-stmt.get-result.php" class="function">mysqli_stmt_get_result()</a></span> 返回的 <span class="classname"><a href="https://www.php.net/manual/zh/class.mysqli-result.php" class="classname">mysqli_result</a></span> 对象。</p></dd>   </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-mysqli-result.fetch-fields-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   Returns an array of objects containing field definition information.  </p>  <p class="para">  <table id="mysqli-result.fetch-fields.returnvalues" class="doctable table">   <caption><strong>Object properties</strong></caption>       <thead>     <tr>      <th>Property</th>      <th>Description</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>name</td>      <td>The name of the column</td>     </tr>     <tr>      <td>orgname</td>      <td>Original column name if an alias was specified</td>     </tr>     <tr>      <td>table</td>      <td>The name of the table this field belongs to (if not calculated)</td>     </tr>     <tr>      <td>orgtable</td>      <td>Original table name if an alias was specified</td>     </tr>     <tr>      <td>max_length</td>      <td>The maximum width of the field for the result set. As of PHP 8.1, this value is always <span>0</span>.</td>     </tr>     <tr>      <td>length</td>      <td>       The width of the field, in bytes, as specified in the table definition. Note that        this number (bytes) might differ from your table definition value (characters), depending on       the character set you use. For example, the character set utf8 has 3 bytes per character,        so varchar(10) will return a length of 30 for utf8 (10*3), but return 10 for latin1 (10*1).      </td>     </tr>     <tr>      <td>charsetnr</td>      <td>The character set number (id) for the field.</td>     </tr>     <tr>      <td>flags</td>      <td>An integer representing the bit-flags for the field.</td>     </tr>     <tr>      <td>type</td>      <td>The data type used for this field</td>     </tr>     <tr>      <td>decimals</td>      <td>The number of decimals used (for integer fields)</td>     </tr>    </tbody>     </table>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-mysqli-result.fetch-fields-examples">  <h3 class="title">示例</h3>  <div class="example" id="example-4610">   <p><strong>示例 #1 面向对象风格</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$mysqli </span><span style="color: #007700">= new </span><span style="color: #9876AA">mysqli</span><span style="color: #007700">(</span><span style="color: #DD0000">"127.0.0.1"</span><span style="color: #007700">, </span><span style="color: #DD0000">"root"</span><span style="color: #007700">, </span><span style="color: #DD0000">"foofoo"</span><span style="color: #007700">, </span><span style="color: #DD0000">"sakila"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// check connection <br /></span><span style="color: #007700">if (</span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect_errno</span><span style="color: #007700">) {<br />    </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect failed: %s\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">connect_error</span><span style="color: #007700">);<br />    exit();<br />}<br /><br />foreach (array(</span><span style="color: #DD0000">'latin1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8'</span><span style="color: #007700">) as </span><span style="color: #9876AA">$charset</span><span style="color: #007700">) {<br /><br />    </span><span style="color: #FF8000">// Set character set, to show its impact on some values (e.g., length in bytes)<br />    </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">set_charset</span><span style="color: #007700">(</span><span style="color: #9876AA">$charset</span><span style="color: #007700">);<br /><br />    </span><span style="color: #9876AA">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"SELECT actor_id, last_name from actor ORDER BY actor_id"</span><span style="color: #007700">;<br /><br />    echo </span><span style="color: #DD0000">"======================\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"Character Set: </span><span style="color: #9876AA">$charset</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"======================\n"</span><span style="color: #007700">;<br />    <br />    if (</span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">query</span><span style="color: #007700">(</span><span style="color: #9876AA">$query</span><span style="color: #007700">)) {<br /><br />        </span><span style="color: #FF8000">// Get field information for all columns <br />        </span><span style="color: #9876AA">$finfo </span><span style="color: #007700">= </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">fetch_fields</span><span style="color: #007700">();<br /><br />        foreach (</span><span style="color: #9876AA">$finfo </span><span style="color: #007700">as </span><span style="color: #9876AA">$val</span><span style="color: #007700">) {<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Name:      %s\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">name</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Table:     %s\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">table</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Max. Len:  %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">max_length</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Length:    %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">length</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"charsetnr: %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">charsetnr</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Flags:     %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">flags</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Type:      %d\n\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">type</span><span style="color: #007700">);<br />        }<br />        </span><span style="color: #9876AA">$result</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">free</span><span style="color: #007700">();<br />    }<br />}<br /></span><span style="color: #9876AA">$mysqli</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">close</span><span style="color: #007700">();<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>  </div>  <div class="example" id="example-4613">   <p><strong>示例 #2 过程化风格</strong></p>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$link </span><span style="color: #007700">= </span><span style="color: #9876AA">mysqli_connect</span><span style="color: #007700">(</span><span style="color: #DD0000">"127.0.0.1"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_user"</span><span style="color: #007700">, </span><span style="color: #DD0000">"my_password"</span><span style="color: #007700">, </span><span style="color: #DD0000">"sakila"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// check connection <br /></span><span style="color: #007700">if (</span><span style="color: #9876AA">mysqli_connect_errno</span><span style="color: #007700">()) {<br />    </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Connect failed: %s\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">mysqli_connect_error</span><span style="color: #007700">());<br />    exit();<br />}<br /><br />foreach (array(</span><span style="color: #DD0000">'latin1'</span><span style="color: #007700">, </span><span style="color: #DD0000">'utf8'</span><span style="color: #007700">) as </span><span style="color: #9876AA">$charset</span><span style="color: #007700">) {<br /><br />    </span><span style="color: #FF8000">// Set character set, to show its impact on some values (e.g., length in bytes)<br />    </span><span style="color: #9876AA">mysqli_set_charset</span><span style="color: #007700">(</span><span style="color: #9876AA">$link</span><span style="color: #007700">, </span><span style="color: #9876AA">$charset</span><span style="color: #007700">);<br /><br />    </span><span style="color: #9876AA">$query </span><span style="color: #007700">= </span><span style="color: #DD0000">"SELECT actor_id, last_name from actor ORDER BY actor_id"</span><span style="color: #007700">;<br /><br />    echo </span><span style="color: #DD0000">"======================\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"Character Set: </span><span style="color: #9876AA">$charset</span><span style="color: #DD0000">\n"</span><span style="color: #007700">;<br />    echo </span><span style="color: #DD0000">"======================\n"</span><span style="color: #007700">;<br /><br />    if (</span><span style="color: #9876AA">$result </span><span style="color: #007700">= </span><span style="color: #9876AA">mysqli_query</span><span style="color: #007700">(</span><span style="color: #9876AA">$link</span><span style="color: #007700">, </span><span style="color: #9876AA">$query</span><span style="color: #007700">)) {<br /><br />        </span><span style="color: #FF8000">// Get field information for all columns <br />        </span><span style="color: #9876AA">$finfo </span><span style="color: #007700">= </span><span style="color: #9876AA">mysqli_fetch_fields</span><span style="color: #007700">(</span><span style="color: #9876AA">$result</span><span style="color: #007700">);<br /><br />        foreach (</span><span style="color: #9876AA">$finfo </span><span style="color: #007700">as </span><span style="color: #9876AA">$val</span><span style="color: #007700">) {<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Name:      %s\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">name</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Table:     %s\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">table</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Max. Len:  %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">max_length</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Length:    %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">length</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"charsetnr: %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">charsetnr</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Flags:     %d\n"</span><span style="color: #007700">,   </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">flags</span><span style="color: #007700">);<br />            </span><span style="color: #9876AA">printf</span><span style="color: #007700">(</span><span style="color: #DD0000">"Type:      %d\n\n"</span><span style="color: #007700">, </span><span style="color: #9876AA">$val</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">type</span><span style="color: #007700">);<br />        }<br />        </span><span style="color: #9876AA">mysqli_free_result</span><span style="color: #007700">(</span><span style="color: #9876AA">$result</span><span style="color: #007700">);<br />    }<br />}<br /><br /></span><span style="color: #9876AA">mysqli_close</span><span style="color: #007700">(</span><span style="color: #9876AA">$link</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>======================<br>Character Set: latin1<br>======================<br>Name:      actor_id<br>Table:     actor<br>Max. Len:  3<br>Length:    5<br>charsetnr: 63<br>Flags:     49699<br>Type:      2<br><br>Name:      last_name<br>Table:     actor<br>Max. Len:  12<br>Length:    45<br>charsetnr: 8<br>Flags:     20489<br>Type:      253<br><br>======================<br>Character Set: utf8<br>======================<br>Name:      actor_id<br>Table:     actor<br>Max. Len:  3<br>Length:    5<br>charsetnr: 63<br>Flags:     49699<br>Type:      2<br><br>Name:      last_name<br>Table:     actor<br>Max. Len:  12<br>Length:    135<br>charsetnr: 33<br>Flags:     20489<br></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-mysqli-result.fetch-fields-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli-result.field-count.php" class="function" rel="rdfs-seeAlso">mysqli_num_fields()</a> - Gets the number of fields in the result set</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli-result.fetch-field-direct.php" class="function" rel="rdfs-seeAlso">mysqli_fetch_field_direct()</a> - Fetch meta-data for a single field</span></li>    <li class="member"><span class="function"><a href="https://www.php.net/manual/zh/mysqli-result.fetch-field.php" class="function" rel="rdfs-seeAlso">mysqli_fetch_field()</a> - Returns the next field in the result set</span></li>   </ul>  </span> </div></div>