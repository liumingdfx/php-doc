<div id="zookeeper.addauth" class="refentry"> <div class="refnamediv">  <h1 class="refname">Zookeeper::addAuth</h1>  <p class="verinfo">(PECL zookeeper &gt;= 0.1.0)</p><p class="refpurpose"><span class="refname">Zookeeper::addAuth</span> &mdash; <span class="dc-title">Specify application credentials</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-zookeeper.addauth-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><strong>Zookeeper::addAuth</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$scheme</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$cert</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$completion_cb</span><span class="initializer"> = <strong><span>null</span></strong></span></span>): <span class="type" style="color:#EAB766">bool</span></div>  <p class="para rdfs-comment">   The application calls this function to specify its credentials for purposes of authentication. The server will use the security provider specified by the scheme parameter to authenticate the client connection. If the authentication request has failed:    - the server connection is dropped.    - the watcher is called with the ZOO_AUTH_FAILED_STATE value as the state parameter.  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-zookeeper.addauth-parameters">  <h3 class="title">参数</h3>  <dl>       <dt><span class="parameter" style="color:#3A95FF">scheme</span></dt>    <dd>     <span>      The id of authentication scheme. Natively supported: &quot;digest&quot; password-based authentication     </span>    </dd>          <dt><span class="parameter" style="color:#3A95FF">cert</span></dt>    <dd>     <p class="para">      Application credentials. The actual value depends on the scheme.     </p>    </dd>          <dt><span class="parameter" style="color:#3A95FF">completion_cb</span></dt>    <dd>     <p class="para">      The routine to invoke when the request completes. One of the following result codes may be passed into the completion callback:      - ZOK operation completed successfully      - ZAUTHFAILED authentication failed     </p>    </dd>     </dl> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-zookeeper.addauth-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   成功时返回 <strong><span>true</span></strong>， 或者在失败时返回 <strong><span>false</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-zookeeper.addauth-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   This method emits PHP error/warning when parameters count or types are wrong or operation fails.  </p>  <div class="caution"><strong class="caution">警告</strong>    <p class="para">      Since version 0.3.0, this method emits <span class="classname"><a href="https://www.php.net/manual/zh/class.zookeeperexception.php" class="classname">ZookeeperException</a></span> and it&#039;s derivatives.    </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-zookeeper.addauth-examples">  <h3 class="title">示例</h3>  <div class="example" id="">   <p><strong>示例 #1 <span class="methodname" style="color:#CC7832"><strong>Zookeeper::addAuth()</strong></span> example</strong></p>   <div class="example-contents"><p>     Add auth before requesting node value.   </p></div>   <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$zookeeper </span><span style="color: #007700">= new </span><span style="color: #9876AA">Zookeeper</span><span style="color: #007700">(</span><span style="color: #DD0000">'locahost:2181'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$path </span><span style="color: #007700">= </span><span style="color: #DD0000">'/path/to/node'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$value </span><span style="color: #007700">= </span><span style="color: #DD0000">'nodevalue'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">set</span><span style="color: #007700">(</span><span style="color: #9876AA">$path</span><span style="color: #007700">, </span><span style="color: #9876AA">$value</span><span style="color: #007700">);<br /><br /></span><span style="color: #9876AA">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">addAuth</span><span style="color: #007700">(</span><span style="color: #DD0000">'digest'</span><span style="color: #007700">, </span><span style="color: #DD0000">'user0:passwd0'</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">$r </span><span style="color: #007700">= </span><span style="color: #9876AA">$zookeeper</span><span style="color: #007700">-&gt;</span><span style="color: #9876AA">get</span><span style="color: #007700">(</span><span style="color: #9876AA">$path</span><span style="color: #007700">);<br />if (</span><span style="color: #9876AA">$r</span><span style="color: #007700">)<br />  echo </span><span style="color: #9876AA">$r</span><span style="color: #007700">;<br />else<br />  echo </span><span style="color: #DD0000">'ERR'</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>   </div>   <div class="example-contents"><p>以上示例会输出：</p></div>   <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>nodevalue<br></span></div>   </div>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-zookeeper.addauth-seealso">  <h3 class="title">参见</h3>  <ul class="simplelist">   <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::create()} - Create a node synchronously</span></li>   <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::setAcl()} - Sets the acl associated with a node synchronously</span></li>   <li class="member"><span class="methodname" style="color:#CC7832">{@link Zookeeper::getAcl()} - Gets the acl associated with a node synchronously</span></li>   <li class="member"><a href="https://www.php.net/manual/zh/class.zookeeper.php#zookeeper.class.constants.states" class="link">ZooKeeper States</a></li>   <li class="member"><span class="classname"><a href="https://www.php.net/manual/zh/class.zookeeperexception.php" class="classname">ZookeeperException</a></span></li>  </ul> </div></div>