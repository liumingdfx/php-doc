<div id="class.luasandbox" class="reference"> <h1 class="title">The LuaSandbox class</h1>  <div class="partintro"><p class="verinfo">(PECL luasandbox &gt;= 1.0.0)</p>  <div class="section" id="luasandbox.intro">   <h2 class="title">简介</h2>   <p class="para">    The LuaSandbox class creates a Lua environment and allows for execution of    Lua code.   </p>  </div>  <div class="section" id="luasandbox.synopsis">   <h2 class="title">类摘要</h2>   <div class="classsynopsis">    <span class="ooclass"><strong class="classname"></strong></span>    <div class="classsynopsisinfo">     <span class="ooclass">      <span class="modifier">class</span> <strong class="classname">LuaSandbox</strong>     </span>     {</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 常量 </div>    <div class="fieldsynopsis">     <span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.luasandbox.php#luasandbox.constants.samples"><var class="varname">SAMPLES</var></a></var><span class="initializer"> = 0</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.luasandbox.php#luasandbox.constants.seconds"><var class="varname">SECONDS</var></a></var><span class="initializer"> = 1</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.luasandbox.php#luasandbox.constants.percent"><var class="varname">PERCENT</var></a></var><span class="initializer"> = 2</span>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 方法 </div>    <div class="methodsynopsis dc-description">   <span class="modifier">public</span> <span class="methodname" style="color:#CC7832">{@link callFunction}</span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$name</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$args</span></span>): <span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">array</span>|<span class="type" style="color:#EAB766">bool</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.disableprofiler.php" class="methodname" style="color:#CC7832">disableProfiler</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.enableprofiler.php" class="methodname" style="color:#CC7832">enableProfiler</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">float</span> <span class="parameter" style="color:#3A95FF">$period</span><span class="initializer"> = 0.02</span></span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.getcpuusage.php" class="methodname" style="color:#CC7832">getCPUUsage</a></span>(): <span class="type" style="color:#EAB766">float</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.getmemoryusage.php" class="methodname" style="color:#CC7832">getMemoryUsage</a></span>(): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.getpeakmemoryusage.php" class="methodname" style="color:#CC7832">getPeakMemoryUsage</a></span>(): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.getprofilerfunctionreport.php" class="methodname" style="color:#CC7832">getProfilerFunctionReport</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$units</span><span class="initializer"> = LuaSandbox::SECONDS</span></span>): <span class="type" style="color:#EAB766">array</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="modifier">static</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.getversioninfo.php" class="methodname" style="color:#CC7832">getVersionInfo</a></span>(): <span class="type" style="color:#EAB766">array</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.loadbinary.php" class="methodname" style="color:#CC7832">loadBinary</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$code</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$chunkName</span><span class="initializer"> = &#039;&#039;</span></span>): <span class="type" style="color:#EAB766">{@link LuaSandboxFunction}</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.loadstring.php" class="methodname" style="color:#CC7832">loadString</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$code</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$chunkName</span><span class="initializer"> = &#039;&#039;</span></span>): <span class="type" style="color:#EAB766">{@link LuaSandboxFunction}</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.pauseusagetimer.php" class="methodname" style="color:#CC7832">pauseUsageTimer</a></span>(): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.registerlibrary.php" class="methodname" style="color:#CC7832">registerLibrary</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$libname</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$functions</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.setcpulimit.php" class="methodname" style="color:#CC7832">setCPULimit</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766">float</span>|<span class="type" style="color:#EAB766">bool</span></span> <span class="parameter" style="color:#3A95FF">$limit</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.setmemorylimit.php" class="methodname" style="color:#CC7832">setMemoryLimit</a></span>(<span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$limit</span></span>): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/luasandbox.unpauseusagetimer.php" class="methodname" style="color:#CC7832">unpauseUsageTimer</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span> <span class="methodname" style="color:#CC7832">{@link wrapPhpFunction}</span>(<span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span> <span class="parameter" style="color:#3A95FF">$function</span></span>): <span class="type" style="color:#EAB766">{@link LuaSandboxFunction}</span></div>   }</div>  </div>  <div class="section" id="luasandbox.constants">   <h2 class="title">预定义常量</h2>   <dl>         <dt id="luasandbox.constants.samples"><strong><span>LuaSandbox::SAMPLES</span></strong></dt>     <dd>      <p class="para">       Used with <span class="methodname" style="color:#CC7832">{@link LuaSandbox::getProfilerFunctionReport()}</span> to return timings in samples.      </p>     </dd>             <dt id="luasandbox.constants.seconds"><strong><span>LuaSandbox::SECONDS</span></strong></dt>     <dd>      <p class="para">       Used with <span class="methodname" style="color:#CC7832">{@link LuaSandbox::getProfilerFunctionReport()}</span> to return timings in seconds.      </p>     </dd>             <dt id="luasandbox.constants.percent"><strong><span>LuaSandbox::PERCENT</span></strong></dt>     <dd>      <p class="para">       Used with <span class="methodname" style="color:#CC7832">{@link LuaSandbox::getProfilerFunctionReport()}</span> to return timings in percentages of the total.      </p>     </dd>       </dl>  </div> </div> <h2>目录</h2><ul class="chunklist chunklist_reference"><li>{@link LuaSandbox::callFunction} — Call a function in a Lua global variable</li><li>{@link LuaSandbox::disableProfiler} — Disable the profiler</li><li>{@link LuaSandbox::enableProfiler} — Enable the profiler.</li><li>{@link LuaSandbox::getCPUUsage} — Fetch the current CPU time usage of the Lua environment</li><li>{@link LuaSandbox::getMemoryUsage} — Fetch the current memory usage of the Lua environment</li><li>{@link LuaSandbox::getPeakMemoryUsage} — Fetch the peak memory usage of the Lua environment</li><li>{@link LuaSandbox::getProfilerFunctionReport} — Fetch profiler data</li><li>{@link LuaSandbox::getVersionInfo} — Return the versions of LuaSandbox and Lua</li><li>{@link LuaSandbox::loadBinary} — Load a precompiled binary chunk into the Lua environment</li><li>{@link LuaSandbox::loadString} — Load Lua code into the Lua environment</li><li>{@link LuaSandbox::pauseUsageTimer} — Pause the CPU usage timer</li><li>{@link LuaSandbox::registerLibrary} — Register a set of PHP functions as a Lua library</li><li>{@link LuaSandbox::setCPULimit} — Set the CPU time limit for the Lua environment</li><li>{@link LuaSandbox::setMemoryLimit} — Set the memory limit for the Lua environment</li><li>{@link LuaSandbox::unpauseUsageTimer} — Unpause the timer paused by LuaSandbox::pauseUsageTimer</li><li>{@link LuaSandbox::wrapPhpFunction} — Wrap a PHP callable in a LuaSandboxFunction</li></ul></div>