<div id="class.eventbuffer" class="reference"> <h1 class="title">The EventBuffer class</h1>  <div class="partintro"><p class="verinfo">(PECL event &gt;= 1.5.0)</p>  <div class="section" id="eventbuffer.intro">   <h2 class="title">简介</h2>   <p class="para">    <span class="classname"><strong class="classname">EventBuffer</strong></span>    represents Libevent&#039;s &quot;evbuffer&quot;, an utility functionality for buffered    I/O.   </p>   <p class="para">    Event buffers are meant to be generally useful for doing the &quot;buffer&quot; part    of buffered network I/O.   </p>  </div>  <div class="section" id="eventbuffer.synopsis">   <h2 class="title">类摘要</h2>   <div class="classsynopsis">    <span class="ooclass">     <strong class="classname"></strong>    </span>    <div class="classsynopsisinfo">     <span class="ooclass">      <span class="modifier">class</span> <strong class="classname">EventBuffer</strong>     </span>     {</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 常量 </div>    <div class="fieldsynopsis">     <span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.eol-any"><var class="varname">EOL_ANY</var></a></var><span class="initializer"> = 0</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.eol-crlf"><var class="varname">EOL_CRLF</var></a></var><span class="initializer"> = 1</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.eol-crlf-strict"><var class="varname">EOL_CRLF_STRICT</var></a></var><span class="initializer"> = 2</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.eol-lf"><var class="varname">EOL_LF</var></a></var><span class="initializer"> = 3</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.ptr-set"><var class="varname">PTR_SET</var></a></var><span class="initializer"> = 0</span>;</div>    <div class="fieldsynopsis"><span class="modifier">const</span>     <span class="type" style="color:#EAB766">int</span>      <var class="fieldsynopsis_varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.constants.ptr-add"><var class="varname">PTR_ADD</var></a></var><span class="initializer"> = 1</span>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 属性 </div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">int</span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.props.length">$<var class="varname">length</var></a></var>;</div>    <div class="fieldsynopsis"><span class="modifier">public</span>     <span class="modifier">readonly</span>     <span class="type" style="color:#EAB766">int</span>      <var class="varname"><a href="https://www.php.net/manual/zh/class.eventbuffer.php#eventbuffer.props.contiguous-space">$<var class="varname">contiguous_space</var></a></var>;</div>    <div class="classsynopsisinfo classsynopsisinfo_comment">// 方法 </div>    <div class="methodsynopsis dc-description">   <span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.add.php" class="methodname" style="color:#CC7832">add</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">string</span>     <span class="parameter" style="color:#3A95FF">$data</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.addbuffer.php" class="methodname" style="color:#CC7832">addBuffer</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.eventbuffer.php" class="type EventBuffer" style="color:#EAB766">EventBuffer</a></span>     <span class="parameter" style="color:#3A95FF">$buf</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.appendfrom.php" class="methodname" style="color:#CC7832">appendFrom</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.eventbuffer.php" class="type EventBuffer" style="color:#EAB766">EventBuffer</a></span>     <span class="parameter" style="color:#3A95FF">$buf</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$len</span>   </span>): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.construct.php" class="methodname" style="color:#CC7832">__construct</a></span>()</div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.copyout.php" class="methodname" style="color:#CC7832">copyout</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">string</span>     <span class="parameter" style="color:#3A95FF">&$data</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$max_bytes</span>   </span>): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.drain.php" class="methodname" style="color:#CC7832">drain</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$len</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.enablelocking.php" class="methodname" style="color:#CC7832">enableLocking</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.expand.php" class="methodname" style="color:#CC7832">expand</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$len</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.freeze.php" class="methodname" style="color:#CC7832">freeze</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">bool</span>     <span class="parameter" style="color:#3A95FF">$at_front</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.lock.php" class="methodname" style="color:#CC7832">lock</a></span>(): <span class="type" style="color:#EAB766"><span class="type void" style="color:#EAB766">void</span></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.prepend.php" class="methodname" style="color:#CC7832">prepend</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">string</span>     <span class="parameter" style="color:#3A95FF">$data</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.prependbuffer.php" class="methodname" style="color:#CC7832">prependBuffer</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/class.eventbuffer.php" class="type EventBuffer" style="color:#EAB766">EventBuffer</a></span>     <span class="parameter" style="color:#3A95FF">$buf</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.pullup.php" class="methodname" style="color:#CC7832">pullup</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$size</span>   </span>): <span class="type" style="color:#EAB766">string</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.read.php" class="methodname" style="color:#CC7832">read</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$max_bytes</span>   </span>): <span class="type" style="color:#EAB766">string</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.read.php" class="methodname" style="color:#CC7832">read</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span>     <span class="parameter" style="color:#3A95FF">$fd</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$howmuch</span>   </span>): <span class="type" style="color:#EAB766">int</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.readline.php" class="methodname" style="color:#CC7832">readLine</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$eol_style</span>   </span>): <span class="type" style="color:#EAB766">string</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.search.php" class="methodname" style="color:#CC7832">search</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">string</span>     <span class="parameter" style="color:#3A95FF">$what</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$start</span>    <span class="initializer"> = -1</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$end</span>    <span class="initializer"> = -1</span>   </span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.searcheol.php" class="methodname" style="color:#CC7832">searchEol</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$start</span>    <span class="initializer"> = -1</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$eol_style</span>    <span class="initializer"> =      <strong><span>EventBuffer::EOL_ANY</span></strong>    </span>   </span>): <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.substr.php" class="methodname" style="color:#CC7832">substr</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$start</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$length</span>   <span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766">string</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.unfreeze.php" class="methodname" style="color:#CC7832">unfreeze</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766">bool</span>     <span class="parameter" style="color:#3A95FF">$at_front</span>   </span>): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.unlock.php" class="methodname" style="color:#CC7832">unlock</a></span>(): <span class="type" style="color:#EAB766">bool</span></div><div class="methodsynopsis dc-description"><span class="modifier">public</span>   <span class="methodname" style="color:#CC7832"><a href="https://www.php.net/manual/zh/eventbuffer.write.php" class="methodname" style="color:#CC7832">write</a></span>(<span class="methodparam">    <span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span>     <span class="parameter" style="color:#3A95FF">$fd</span>   </span>, <span class="methodparam">    <span class="type" style="color:#EAB766">int</span>     <span class="parameter" style="color:#3A95FF">$howmuch</span>   <span class="initializer"> = ?</span></span>): <span class="type" style="color:#EAB766">int</span></div>   }</div>  </div>  <div class="section" id="eventbuffer.props">   <h2 class="title">属性</h2>   <dl>         <dt id="eventbuffer.props.length">      <var class="varname">length</var>     </dt>     <dd>      <p class="para">       The number of bytes stored in an event buffer.      </p>     </dd>             <dt id="eventbuffer.props.contiguous-space">      <var class="varname">contiguous_space</var>     </dt>     <dd>      <p class="para">       The number of bytes stored contiguously at the front of the buffer. The       bytes in a buffer may be stored in multiple separate chunks of memory;       the property returns the number of bytes currently stored in the first       chunk.      </p>     </dd>       </dl>  </div>  <div class="section" id="eventbuffer.constants">   <h2 class="title">预定义常量</h2>   <dl>         <dt id="eventbuffer.constants.eol-any">      <strong><span>EventBuffer::EOL_ANY</span></strong>     </dt>     <dd>      <p class="para">       The end of line is any sequence of any number of carriage return and       linefeed characters. This format is not very useful; it exists mainly       for backward compatibility.      </p>     </dd>             <dt id="eventbuffer.constants.eol-crlf">      <strong><span>EventBuffer::EOL_CRLF</span></strong>     </dt>     <dd>      <p class="para">       The end of the line is an optional carriage return, followed by a       linefeed. (In other words, it is either a       <span>&quot;\r\n&quot;</span>       or a       <span>&quot;\n&quot;</span>       .) This format is useful in parsing text-based Internet protocols,       since the standards generally prescribe a       <span>&quot;\r\n&quot;</span>       line-terminator, but nonconformant clients sometimes say just       <span>&quot;\n&quot;</span>       .      </p>     </dd>             <dt id="eventbuffer.constants.eol-crlf-strict">      <strong><span>EventBuffer::EOL_CRLF_STRICT</span></strong>     </dt>     <dd>      <p class="para">       The end of a line is a single carriage return, followed by a single       linefeed. (This is also known as       <span>&quot;\r\n&quot;</span>       . The ASCII values are       <strong><span>0x0D</span></strong>       <strong><span>0x0A</span></strong>       ).      </p>     </dd>             <dt id="eventbuffer.constants.eol-lf">      <strong><span>EventBuffer::EOL_LF</span></strong>     </dt>     <dd>      <p class="para">       The end of a line is a single linefeed character. (This is also known       as       <span>&quot;\n&quot;</span>       . It is ASCII value is       <strong><span>0x0A</span></strong>       .)      </p>     </dd>             <dt id="eventbuffer.constants.ptr-set">      <strong><span>EventBuffer::PTR_SET</span></strong>     </dt>     <dd>      <p class="para">       Flag used as argument of       <span class="methodname" style="color:#CC7832"><strong>EventBuffer::setPosition()</strong></span>       method. If this flag specified, the position pointer is moved to an       absolute position within the buffer.      </p>     </dd>             <dt id="eventbuffer.constants.ptr-add">      <strong><span>EventBuffer::PTR_ADD</span></strong>     </dt>     <dd>      <p class="para">       The same as       <strong><span>EventBuffer::PTR_SET</span></strong>       , except this flag causes       <span class="methodname" style="color:#CC7832"><strong>EventBuffer::setPosition()</strong></span>       method to move position forward up to the specified number of       bytes(instead of setting absolute position).      </p>     </dd>       </dl>  </div> </div> <h2>目录</h2><ul class="chunklist chunklist_reference"><li>{@link EventBuffer::add} — Append data to the end of an event buffer</li><li>{@link EventBuffer::addBuffer} — Move all data from a buffer provided to the current instance of EventBuffer</li><li>{@link EventBuffer::appendFrom} — Moves the specified number of bytes from a source buffer to the  end of the current buffer</li><li>{@link EventBuffer::__construct} — Constructs EventBuffer object</li><li>{@link EventBuffer::copyout} — Copies out specified number of bytes from the front of the buffer</li><li>{@link EventBuffer::drain} — Removes specified number of bytes from the front of the buffer  without copying it anywhere</li><li>{@link EventBuffer::enableLocking} — 说明</li><li>{@link EventBuffer::expand} — Reserves space in buffer</li><li>{@link EventBuffer::freeze} — Prevent calls that modify an event buffer from succeeding</li><li>{@link EventBuffer::lock} — Acquires a lock on buffer</li><li>{@link EventBuffer::prepend} — Prepend data to the front of the buffer</li><li>{@link EventBuffer::prependBuffer} — Moves all data from source buffer to the front of current buffer</li><li>{@link EventBuffer::pullup} — Linearizes data within buffer  and returns it's contents as a string</li><li>{@link EventBuffer::read} — Read data from an evbuffer and drain the bytes read</li><li>{@link EventBuffer::readFrom} — Read data from a file onto the end of the buffer</li><li>{@link EventBuffer::readLine} — Extracts a line from the front of the buffer</li><li>{@link EventBuffer::search} — Scans the buffer for an occurrence of a string</li><li>{@link EventBuffer::searchEol} — Scans the buffer for an occurrence of an end of line</li><li>{@link EventBuffer::substr} — Substracts a portion of the buffer data</li><li>{@link EventBuffer::unfreeze} — Re-enable calls that modify an event buffer</li><li>{@link EventBuffer::unlock} — Releases lock acquired by EventBuffer::lock</li><li>{@link EventBuffer::write} — Write contents of the buffer to a file or socket</li></ul></div>