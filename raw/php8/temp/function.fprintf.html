<div id="function.fprintf" class="refentry"> <div class="refnamediv">  <h1 class="refname">fprintf</h1>  <p class="verinfo">(PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">fprintf</span> &mdash; <span class="dc-title">将格式化后的字符串写入到流</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.fprintf-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>fprintf</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">resource</span> <span class="parameter" style="color:#3A95FF">$stream</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$format</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.declarations.php#language.types.declarations.mixed" class="type mixed" style="color:#EAB766">mixed</a></span> <span class="parameter" style="color:#3A95FF">...$values</span></span>): <span class="type" style="color:#EAB766">int</span></div>  <p class="para rdfs-comment">   写入根据 <span class="parameter" style="color:#3A95FF">format</span> 格式化后的字符串到由   <span class="parameter" style="color:#3A95FF">stream</span> 句柄打开的流中。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.fprintf-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">stream</span></dt>     <dd>      <p class="para">文件系统指针，是典型地由<span class="function">{@link fopen()}</span> 创建的 <span class="type" style="color:#EAB766">resource</span>(资源)。</p>     </dd>         <dt><span class="parameter" style="color:#3A95FF">format</span></dt> <dd>  <p class="para">   format 字符串通常由零或多个指令组成：普通字符（不包含   <span>%</span>）——直接复制到结果，<em>转换规范</em>——获取每个参数的结果。  </p>  <p class="para">   转换规范遵循此原型：   <span>%[argnum$][flags][width][.precision]specifier</span>.  </p>  <p class="formalpara">   <h5 class="title">Argnum</h5>   <p class="para">    整数后跟美元符号 <span>$</span>，用于指定转换中要处理的参数数量。   </p>  </p>  <p class="para">   <table class="doctable table">    <caption><strong>标志</strong></caption>         <thead>      <tr>       <th>标志</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td><span>-</span></td>       <td>        在指定字段宽度时左对齐，默认右对齐       </td>      </tr>      <tr>       <td><span>+</span></td>       <td>        正数的加号 <span>+</span>前缀，默认负数的前缀是负号。       </td>      </tr>      <tr>       <td><span> </span>(space)</td>       <td>        空格填充结果。这是默认设置。       </td>      </tr>      <tr>       <td><span>0</span></td>       <td>        仅用 0 进行左侧数字填充。使用 <span>s</span> 标志符可以右侧填充。       </td>      </tr>      <tr>       <td><span>&#039;</span>(char)</td>       <td>        用字符（char）填充结果。       </td>      </tr>     </tbody>       </table>  </p>  <p class="formalpara">   <h5 class="title">Width</h5>   <p class="para">    要么是整数，表示转换结果应该有多少个字符（最少），要么是 <span>*</span>。如果使用    <span>*</span>，那么宽度将作为额外的整数值提供，位于格式化符号之前。   </p>  </p>  <p class="formalpara">   <h5 class="title">Precision</h5>   <p class="para">    小数点 <span>.</span>，可选的后跟整数或者 <span>*</span>，其含义取决于格式化符号：    <ul class="itemizedlist">     <li class="listitem">      <span class="simpara">       <span>e</span>、<span>E</span>、<span>f</span>、<span>F</span>       标志符：小数点后需要打印的位数（默认是 6）。      </span>     </li>     <li class="listitem">      <span class="simpara">       <span>g</span>、<span>G</span>、<span>h</span>、<span>H</span>       标志符：这是要打印的最大有效位数。      </span>     </li>     <li class="listitem">      <span class="simpara">       <span>s</span> 标志符：充当分界点，为字符串设置最大字符限制。      </span>     </li>    </ul>    <blockquote class="note" style="border:1px gray solid"><p><strong class="note" style="border:1px gray solid">注意</strong>:      <span class="simpara">      如果小数点没有明确的精度值，则假设是 0。如果使用 <span>*</span>，则精度将作为额外的整数值提供，位于格式化符号之前。     </span>    </p></blockquote>   </p>  </p>  <p class="para">   <table class="doctable table">    <caption><strong>标志符</strong></caption>         <thead>      <tr>       <th>标志符</th>       <th>说明</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td><span>%</span></td>       <td>        字面意思的百分号字符。不需要参数。       </td>      </tr>      <tr>       <td><span>b</span></td>       <td>        参数视为整数并以二进制数字呈现。       </td>      </tr>      <tr>       <td><span>c</span></td>       <td>        参数视为整数并以 ASCII 字符呈现。       </td>      </tr>      <tr>       <td><span>d</span></td>       <td>        参数视为整数并以（有符号）十进制数字呈现。       </td>      </tr>      <tr>       <td><span>e</span></td>       <td>        参数当做科学符号处理（例如 1.2e+2）。       </td>      </tr>      <tr>       <td><span>E</span></td>       <td>        与 <span>e</span> 标志符相同，但使用大写字母（例如 1.2E+2）。       </td>      </tr>      <tr>       <td><span>f</span></td>       <td>        参数当做浮点数处理且作为浮点数呈现（locale aware）。       </td>      </tr>      <tr>       <td><span>F</span></td>       <td>        参数当做浮点数处理且作为浮点数呈现（non-locale aware）。       </td>      </tr>      <tr>       <td><span>g</span></td>       <td>        <p class="para">         通用格式。        </p>        <p class="para">         Let P equal the precision if nonzero, 6 if the precision is omitted,         or 1 if the precision is zero.         Then, if a conversion with style E would have an exponent of X:        </p>        <p class="para">         If P &gt; X ≥ −4, the conversion is with style f and precision P − (X + 1).         Otherwise, the conversion is with style e and precision P − 1.        </p>       </td>      </tr>      <tr>       <td><span>G</span></td>       <td>        Like the <span>g</span> specifier but uses        <span>E</span> and <span>f</span>.       </td>      </tr>      <tr>        <td><span>h</span></td>        <td>         Like the <span>g</span> specifier but uses <span>F</span>.         Available as of PHP 8.0.0.        </td>       </tr>       <tr>        <td><span>H</span></td>        <td>         Like the <span>g</span> specifier but uses         <span>E</span> and <span>F</span>. Available as of PHP 8.0.0.        </td>      </tr>      <tr>       <td><span>o</span></td>       <td>        参数视为整数并以八进制数字来呈现。       </td>      </tr>      <tr>       <td><span>s</span></td>       <td>        参数视为字符串来呈现。       </td>      </tr>      <tr>       <td><span>u</span></td>       <td>        参数视为整数并以无符号十进制数字呈现。       </td>      </tr>      <tr>       <td><span>x</span></td>       <td>        参数视为整数并作为十六进制数字呈现（带小写字母）。       </td>      </tr>      <tr>       <td><span>X</span></td>       <td>        参数视为整数并作为十六进制数字呈现（带大写字母）。       </td>      </tr>     </tbody>       </table>  </p>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    <span>c</span> 类型标志符忽略填充和宽度   </p>  </div>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    Attempting to use a combination of the string and width specifiers with character sets that require more than one byte per character may result in unexpected results   </p>  </div>  <p class="para">   变量将会强制转换为适合标志符的类型：   <table class="doctable table">    <caption><strong>类型处理</strong></caption>         <thead>      <tr>       <th>类型</th>       <th>标志符</th>      </tr>     </thead>     <tbody class="tbody">      <tr>       <td><span class="type" style="color:#EAB766">string</span></td>       <td><span>s</span></td>      </tr>      <tr>       <td><span class="type" style="color:#EAB766">int</span></td>       <td>        <span>d</span>,        <span>u</span>,        <span>c</span>,        <span>o</span>,        <span>x</span>,        <span>X</span>,        <span>b</span>       </td>      </tr>      <tr>       <td><span class="type" style="color:#EAB766">float</span></td>       <td>        <span>e</span>,        <span>E</span>,        <span>f</span>,        <span>F</span>,        <span>g</span>,        <span>G</span>,        <span>h</span>,        <span>H</span>       </td>      </tr>     </tbody>       </table>  </p> </dd>         <dt><span class="parameter" style="color:#3A95FF">values</span></dt>     <dd>      <p class="para">      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.fprintf-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回写入的字符串长度。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.fprintf-errors">  <h3 class="title">错误／异常</h3>    <p class="para">   从 PHP 8.0.0 开始，如果参数个数为零，将抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>。在 PHP 8.0.0 之前，会发出 <strong><span>E_WARNING</span></strong>。  </p>  <p class="para">   从 PHP 8.0.0 开始，如果 <span>[width]</span> 小于零或大于 <strong><span>PHP_INT_MAX</span></strong>，则会抛出   <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>。在 PHP 8.0.0 之前，会发出 <strong><span>E_WARNING</span></strong>。  </p>  <p class="para">   从 PHP 8.0.0 开始，如果 <span>[precision]</span> 小于零或大于 <strong><span>PHP_INT_MAX</span></strong>，则会抛出   <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>。在 PHP 8.0.0 之前，会发出 <strong><span>E_WARNING</span></strong>。  </p>  <p class="para">   从 PHP 8.0.0 开始，当传递的参数少于所需的参数时会抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.argumentcounterror.php" class="classname">ArgumentCountError</a></span>。在 PHP 8.0.0 之前，返回 <strong><span>false</span></strong> 并发出 <strong><span>E_WARNING</span></strong>。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.fprintf-changelog">  <h3 class="title">更新日志</h3>    <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       此函数失败时不再返回 <strong><span>false</span></strong>。      </td>     </tr>     <tr>      <td>8.0.0</td>      <td>       如果参数个数为零则抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>；以前该函数则会发出 <strong><span>E_WARNING</span></strong>。      </td>     </tr>     <tr>      <td>8.0.0</td>      <td>       如果 <span>[width]</span> 小于零或大于 <strong><span>PHP_INT_MAX</span></strong>，则抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>；以前该函数则会发出 <strong><span>E_WARNING</span></strong>。      </td>     </tr>     <tr>      <td>8.0.0</td>      <td>       如果 <span>[precision]</span> 小于零或大于 <strong><span>PHP_INT_MAX</span></strong>，则抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.valueerror.php" class="classname">ValueError</a></span>；以前该函数则会发出 <strong><span>E_WARNING</span></strong>。      </td>     </tr>     <tr>      <td>8.0.0</td>      <td>       当传递的参数少于所需的参数时抛出 <span class="classname"><a href="https://www.php.net/manual/zh/class.argumentcounterror.php" class="classname">ArgumentCountError</a></span>；以前该函数则会发出 <strong><span>E_WARNING</span></strong>。      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.fprintf-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">fprintf()</strong></span>：零填充整数</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">if (!(</span><span style="color: #9876AA">$fp </span><span style="color: #007700">= </span><span style="color: #9876AA">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">'date.txt'</span><span style="color: #007700">, </span><span style="color: #DD0000">'w'</span><span style="color: #007700">))) {<br />    return;<br />}<br /><br /></span><span style="color: #9876AA">fprintf</span><span style="color: #007700">(</span><span style="color: #9876AA">$fp</span><span style="color: #007700">, </span><span style="color: #DD0000">"%04d-%02d-%02d"</span><span style="color: #007700">, </span><span style="color: #9876AA">$year</span><span style="color: #007700">, </span><span style="color: #9876AA">$month</span><span style="color: #007700">, </span><span style="color: #9876AA">$day</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">// 将格式化的 ISO 日期写入 date.txt<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">fprintf()</strong></span>：格式化货币</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">if (!(</span><span style="color: #9876AA">$fp </span><span style="color: #007700">= </span><span style="color: #9876AA">fopen</span><span style="color: #007700">(</span><span style="color: #DD0000">'currency.txt'</span><span style="color: #007700">, </span><span style="color: #DD0000">'w'</span><span style="color: #007700">))) {<br />    return;<br />}<br /><br /></span><span style="color: #9876AA">$money1 </span><span style="color: #007700">= </span><span style="color: #9876AA">68.75</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$money2 </span><span style="color: #007700">= </span><span style="color: #9876AA">54.35</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">$money </span><span style="color: #007700">= </span><span style="color: #9876AA">$money1 </span><span style="color: #007700">+ </span><span style="color: #9876AA">$money2</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">// $money 将输出“123.1”<br /></span><span style="color: #9876AA">$len </span><span style="color: #007700">= </span><span style="color: #9876AA">fprintf</span><span style="color: #007700">(</span><span style="color: #9876AA">$fp</span><span style="color: #007700">, </span><span style="color: #DD0000">'%01.2f'</span><span style="color: #007700">, </span><span style="color: #9876AA">$money</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">// 将“123.10”写入到 currency.txt<br /><br /></span><span style="color: #007700">echo </span><span style="color: #DD0000">"wrote </span><span style="color: #9876AA">$len</span><span style="color: #DD0000"> bytes to currency.txt"</span><span style="color: #007700">;<br /></span><span style="color: #FF8000">// 使用 fprintf 的返回值来确定写入了多少字节<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>   </div>  </span> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.fprintf-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link printf()} - 输出格式化字符串</span></li>    <li class="member"><span class="function">{@link sprintf()} - 返回格式化字符串</span></li>    <li class="member"><span class="function">{@link vprintf()} - 输出格式化字符串</span></li>    <li class="member"><span class="function">{@link vsprintf()} - 返回格式化字符串</span></li>    <li class="member"><span class="function">{@link vfprintf()} - 将格式化字符串写入流</span></li>    <li class="member"><span class="function">{@link sscanf()} - 根据指定格式解析输入的字符</span></li>    <li class="member"><span class="function">{@link fscanf()} - 从文件中格式化输入</span></li>    <li class="member"><span class="function">{@link number_format()} - 以千位分隔符方式格式化一个数字</span></li>    <li class="member"><span class="function">{@link date()} - 格式化 Unix 时间戳</span></li>   </ul>  </span> </div></div>