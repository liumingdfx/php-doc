<div id="ev.watchers" class="chapter"> <h1>Watchers</h1> <p class="para">  A watcher is an object that gets created to record interest in some event.  For instance, the following code waits for  <strong><span>STDIN</span></strong>  to become readable:  <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #FF8000">// Wait until STDIN is readable<br /></span><span style="color: #9876AA">$w </span><span style="color: #007700">= new </span><span style="color: #9876AA">EvIo</span><span style="color: #007700">(</span><span style="color: #9876AA">STDIN</span><span style="color: #007700">, </span><span style="color: #9876AA">Ev</span><span style="color: #007700">::</span><span style="color: #9876AA">READ</span><span style="color: #007700">, function (</span><span style="color: #9876AA">$watcher</span><span style="color: #007700">, </span><span style="color: #9876AA">$revents</span><span style="color: #007700">) {<br /> echo </span><span style="color: #DD0000">"STDIN is readable\n"</span><span style="color: #007700">;<br />});<br /></span><span style="color: #9876AA">Ev</span><span style="color: #007700">::</span><span style="color: #9876AA">run</span><span style="color: #007700">(</span><span style="color: #9876AA">Ev</span><span style="color: #007700">::</span><span style="color: #9876AA">RUN_ONCE</span><span style="color: #007700">);<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>  </div> </p> <p class="para">  All the watcher constructors automatically start the watchers.  <span>createStopped</span>  methods create stopped watchers(e.g.  <span class="methodname" style="color:#CC7832">{@link EvIo::createStopped()}</span>  ) </p> <p class="para">  Note that a watcher will automatically be stopped when the watcher object is  destroyed. Therefore, the watcher objects returned by the constructors or  factory methods should be kept. </p> <p class="para">  Note also that all methods changing some watcher property(  <em>set</em>  ,  <var class="varname">priority</var>  etc.) automatically stop and start it again if it is active, which means  pending events get lost. </p> <p class="para">  See also:  <a href="https://www.php.net/manual/zh/ev.watcher-callbacks.php" class="link">Watcher callbacks</a>  . </p></div>