<div id="function.date-parse" class="refentry"> <div class="refnamediv">  <h1 class="refname">date_parse</h1>  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">date_parse</span> &mdash; <span class="dc-title">返回指定日期/时间的详细信息的关联数组</span></p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.date-parse-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>date_parse</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">string</span> <span class="parameter" style="color:#3A95FF">$datetime</span></span>): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">   <span class="function"><strong style="color:#CC7832">date_parse()</strong></span> 根据与 <span class="function">{@link strtotime()}</span>   和 <span class="function">{@link DateTimeImmutable::__construct()}</span> 相同的规则解析指定   <span class="parameter" style="color:#3A95FF">datetime</span> 字符串。它不返回 Unix 时间戳（使用   <span class="function">{@link strtotime()}</span>）或者 <span class="classname"><a href="https://www.php.net/manual/zh/class.datetimeimmutable.php" class="classname">DateTimeImmutable</a></span>   对象（使用 <span class="function">{@link DateTimeImmutable::__construct()}</span>），而是返回包含在指定   <span class="parameter" style="color:#3A95FF">datetime</span> 字符串中检测到相关信息的关联数组。  </p>  <p class="para">   如果找不到某组元素的信息，那么这些数组元素将会设置为 <strong><span>false</span></strong> 或缺失。如果需要从相同的   <span class="parameter" style="color:#3A95FF">datetime</span> 字符串构建时间戳或者 <span class="classname"><a href="https://www.php.net/manual/zh/class.datetimeimmutable.php" class="classname">DateTimeImmutable</a></span>   对象，需要将更多字段设置为非 <strong><span>false</span></strong> 值。查看以下示例以了解情况。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.date-parse-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">datetime</span></dt>     <dd>      <p class="para">       <span class="function">{@link DateTimeImmutable::__construct()}</span> 接受的日期/时间格式。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.date-parse-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回 <span class="type" style="color:#EAB766">array</span>，包含解析日期/时间的信息。  </p>  <p class="para">   返回的数组存在以下键    <span>year</span>、<span>month</span>、<span>day</span>、<span>hour</span>、<span>minute</span>、<span>second</span>、<span>fraction</span>   和 <span>is_localtime</span>。  </p>  <p class="para">   如果存在 <span>is_localtime</span>，则 <span>zone_type</span> 表示时区类型。类型   <span>1</span>（UTC 时差），添加 <span>zone</span>、<span>is_dst</span>；类型   <span>2</span>（时区缩写），添加 <span>tz_abbr</span>、<span>is_dst</span>；类型   <span>3</span>（时区标识符），添加 <span>tz_abbr</span>、<span>tz_id</span>。  </p>  <p class="para">   如果 <span class="parameter" style="color:#3A95FF">datetime</span> 字符串存在类似 <span>+3 days</span>   这样的相对时间元素，则返回的数组则包含键为 <span>relative</span> 的嵌套数组。然后此数组将包含如下键   <span>year</span>、<span>month</span>、<span>day</span>、<span>hour</span>、<span>minute</span>、<span>second</span>，如果必要还会包含   <span>weekday</span> 和 <span>weekdays</span>，具体取决于传入的字符串。  </p>  <p class="para">   数组包含 <span>warning_count</span> 和 <span>warnings</span>   字段。第一个表示发现了多少警告。元素 <span>warnings</span> 的键表示指定   <span class="parameter" style="color:#3A95FF">datetime</span> 发生警告的位置，值为字符串，描述警告本身。  </p>  <p class="para">   数组也包含 <span>error_count</span> 和 <span>errors</span>   字段。第一个表示发现了多少错误。元素 <span>errors</span> 的键表示指定   <span class="parameter" style="color:#3A95FF">datetime</span> 发生错误的位置，值为字符串，描述错误本身。  </p>  <div class="warning"><strong class="warning">警告</strong>   <p class="para">    如果同一个位置存在多个警告/错误，那么 <span>warnings</span> 和 <span>errors</span>    数组中元素的数量可能会少于 <span>warning_count</span> 或者 <span>error_count</span>。   </p>  </div> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 errors" id="refsect1-function.date-parse-errors">  <h3 class="title">错误／异常</h3>  <p class="para">   date/time 的格式有错误时，返回数组的 &#039;errors&#039; 键将包含错误信息。  </p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.date-parse-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>7.2.0</td>      <td>       返回数组的 <span>zone</span>        键现在代表秒，而不是分钟。并且正负符号已反转，例如：之前是       <span>-120</span> 现在是 <span>7200</span>。      </td>     </tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.date-parse-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 具有全面的 <span class="parameter" style="color:#3A95FF">datetime</span> 字符串的 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span> 示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"2006-12-12 10:00:00.5"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(12) {<br>  [&quot;year&quot;]=&gt;<br>  int(2006)<br>  [&quot;month&quot;]=&gt;<br>  int(12)<br>  [&quot;day&quot;]=&gt;<br>  int(12)<br>  [&quot;hour&quot;]=&gt;<br>  int(10)<br>  [&quot;minute&quot;]=&gt;<br>  int(0)<br>  [&quot;second&quot;]=&gt;<br>  int(0)<br>  [&quot;fraction&quot;]=&gt;<br>  float(0.5)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(false)<br>}<br></span></div>    </div>   </div>  </span>  <p class="para">   如果在指定 <span class="parameter" style="color:#3A95FF">datetime</span>   字符串中出现时区元素，那才会展示。在这种情况下，总会存在   <span>zone_type</span> 和更多元素，具体取决于其值。   <div class="example" id="">    <p><strong>示例 #2 带时区缩写信息的 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"June 2nd, 2022, 10:28:17 BST"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(16) {<br>  [&quot;year&quot;]=&gt;<br>  int(2022)<br>  [&quot;month&quot;]=&gt;<br>  int(6)<br>  [&quot;day&quot;]=&gt;<br>  int(2)<br>  [&quot;hour&quot;]=&gt;<br>  int(10)<br>  [&quot;minute&quot;]=&gt;<br>  int(28)<br>  [&quot;second&quot;]=&gt;<br>  int(17)<br>  [&quot;fraction&quot;]=&gt;<br>  float(0)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(true)<br>  [&quot;zone_type&quot;]=&gt;<br>  int(2)<br>  [&quot;zone&quot;]=&gt;<br>  int(0)<br>  [&quot;is_dst&quot;]=&gt;<br>  bool(true)<br>  [&quot;tz_abbr&quot;]=&gt;<br>  string(3) &quot;BST&quot;<br>}<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #3 带时区标识符信息的 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"June 2nd, 2022, 10:28:17 Europe/London"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(14) {<br>  [&quot;year&quot;]=&gt;<br>  int(2022)<br>  [&quot;month&quot;]=&gt;<br>  int(6)<br>  [&quot;day&quot;]=&gt;<br>  int(2)<br>  [&quot;hour&quot;]=&gt;<br>  int(10)<br>  [&quot;minute&quot;]=&gt;<br>  int(28)<br>  [&quot;second&quot;]=&gt;<br>  int(17)<br>  [&quot;fraction&quot;]=&gt;<br>  float(0)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(true)<br>  [&quot;zone_type&quot;]=&gt;<br>  int(3)<br>  [&quot;tz_id&quot;]=&gt;<br>  string(13) &quot;Europe/London&quot;<br>}<br></span></div>    </div>   </div>  </p>  <p class="para">   如果解析的 <span class="parameter" style="color:#3A95FF">datetime</span> 字符串越小，那么可用的信息就越少。再本示例中，所有时间部分都返回为 <strong><span>false</span></strong>。   <div class="example" id="">    <p><strong>示例 #4 带最小字符串的 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"June 2nd, 2022"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(12) {<br>  [&quot;year&quot;]=&gt;<br>  int(2022)<br>  [&quot;month&quot;]=&gt;<br>  int(6)<br>  [&quot;day&quot;]=&gt;<br>  int(2)<br>  [&quot;hour&quot;]=&gt;<br>  bool(false)<br>  [&quot;minute&quot;]=&gt;<br>  bool(false)<br>  [&quot;second&quot;]=&gt;<br>  bool(false)<br>  [&quot;fraction&quot;]=&gt;<br>  bool(false)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(false)<br>}<br></span></div>    </div>   </div>  </p>  <p class="para">   <a href="https://www.php.net/manual/zh/" class="link">相对格式</a>不会影响从绝对格式格式化的值，但会被解析为“relative”元素。   <div class="example" id="">    <p><strong>示例 #5 带相对格式的 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span></strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"2006-12-12 10:00:00.5 +1 week +1 hour"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(13) {<br>  [&quot;year&quot;]=&gt;<br>  int(2006)<br>  [&quot;month&quot;]=&gt;<br>  int(12)<br>  [&quot;day&quot;]=&gt;<br>  int(12)<br>  [&quot;hour&quot;]=&gt;<br>  int(10)<br>  [&quot;minute&quot;]=&gt;<br>  int(0)<br>  [&quot;second&quot;]=&gt;<br>  int(0)<br>  [&quot;fraction&quot;]=&gt;<br>  float(0.5)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(false)<br>  [&quot;relative&quot;]=&gt;<br>  array(6) {<br>    [&quot;year&quot;]=&gt;<br>    int(0)<br>    [&quot;month&quot;]=&gt;<br>    int(0)<br>    [&quot;day&quot;]=&gt;<br>    int(7)<br>    [&quot;hour&quot;]=&gt;<br>    int(1)<br>    [&quot;minute&quot;]=&gt;<br>    int(0)<br>    [&quot;second&quot;]=&gt;<br>    int(0)<br>  }<br>}<br></span></div>    </div>   </div>  </p>  <p class="para">   在某些时候，比如 <span>Thursday</span> 将会设置字符串的时间部分设置为   <span>0</span>。如果 <span>Thursday</span> 传递给   <span class="function">{@link DateTimeImmutable::__construct()}</span> 也会导致小时，分钟，秒和小数部分设置为   <span>0</span>。下面的示例中，year 元素将设置为 <strong><span>false</span></strong>。   <div class="example" id="">    <p><strong>示例 #6 <span class="function"><strong style="color:#CC7832">date_parse()</strong></span> with side-effects</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">date_parse</span><span style="color: #007700">(</span><span style="color: #DD0000">"Thursday, June 2nd"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(13) {<br>  [&quot;year&quot;]=&gt;<br>  bool(false)<br>  [&quot;month&quot;]=&gt;<br>  int(6)<br>  [&quot;day&quot;]=&gt;<br>  int(2)<br>  [&quot;hour&quot;]=&gt;<br>  int(0)<br>  [&quot;minute&quot;]=&gt;<br>  int(0)<br>  [&quot;second&quot;]=&gt;<br>  int(0)<br>  [&quot;fraction&quot;]=&gt;<br>  float(0)<br>  [&quot;warning_count&quot;]=&gt;<br>  int(0)<br>  [&quot;warnings&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;error_count&quot;]=&gt;<br>  int(0)<br>  [&quot;errors&quot;]=&gt;<br>  array(0) {<br>  }<br>  [&quot;is_localtime&quot;]=&gt;<br>  bool(false)<br>  [&quot;relative&quot;]=&gt;<br>  array(7) {<br>    [&quot;year&quot;]=&gt;<br>    int(0)<br>    [&quot;month&quot;]=&gt;<br>    int(0)<br>    [&quot;day&quot;]=&gt;<br>    int(0)<br>    [&quot;hour&quot;]=&gt;<br>    int(0)<br>    [&quot;minute&quot;]=&gt;<br>    int(0)<br>    [&quot;second&quot;]=&gt;<br>    int(0)<br>    [&quot;weekday&quot;]=&gt;<br>    int(4)<br>  }<br>}<br></span></div>    </div>   </div>  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.date-parse-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link date_parse_from_format()} - Get info about given date formatted according to the specified format</span>，以解析具有特定格式的<span class="parameter" style="color:#3A95FF">datetime</span></li>    <li class="member"><span class="function">{@link checkdate()} - 验证一个格里高里日期</span>，以便于公历日期验证</li>    <li class="member"><span class="function">{@link getdate()} - 获取日期/时间信息</span></li>   </ul>  </span> </div></div>