<div id="function.array-filter" class="refentry"> <div class="refnamediv">  <h1 class="refname">array_filter</h1>  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">array_filter</span> &mdash; <span class="dc-title">使用回调函数过滤数组的元素</span></p> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 description" id="refsect1-function.array-filter-description">  <h3 class="title">说明</h3>  <div class="methodsynopsis dc-description">   <span class="methodname" style="color:#CC7832"><strong>array_filter</strong></span>(<span class="methodparam"><span class="type" style="color:#EAB766">array</span> <span class="parameter" style="color:#3A95FF">$array</span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">?</span><span class="type" style="color:#EAB766"><span class="type" style="color:#EAB766"><a href="https://www.php.net/manual/zh/language.types.callable.php" class="type callable" style="color:#EAB766">callable</a></span><span class="type" style="color:#EAB766"></span></span> <span class="parameter" style="color:#3A95FF">$callback</span><span class="initializer"> = <strong><span>null</span></strong></span></span>, <span class="methodparam"><span class="type" style="color:#EAB766">int</span> <span class="parameter" style="color:#3A95FF">$mode</span><span class="initializer"> = 0</span></span>): <span class="type" style="color:#EAB766">array</span></div>  <p class="para rdfs-comment">   遍历 <span class="parameter" style="color:#3A95FF">array</span> 数组中的每个值，并将每个值传递给 <span class="parameter" style="color:#3A95FF">callback</span> 回调函数。   如果 <span class="parameter" style="color:#3A95FF">callback</span> 回调函数返回 <strong><span>true</span></strong>，则将 <span class="parameter" style="color:#3A95FF">array</span> 数组中的当前值返回到结果 <span class="type" style="color:#EAB766">array</span> 数组中。  </p>  <p class="para">   返回结果 <span class="type" style="color:#EAB766">array</span> 数组的键名（下标）会维持不变，如果 <span class="parameter" style="color:#3A95FF">array</span> 参数是索引数组，返回的结果 <span class="type" style="color:#EAB766">array</span> 数组键名（下标）可能会不连续。   可以使用 <span class="function">{@link array_values()}</span> 函数对数组重新索引。  </p></div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 parameters" id="refsect1-function.array-filter-parameters">  <h3 class="title">参数</h3>  <span>   <dl>         <dt><span class="parameter" style="color:#3A95FF">array</span></dt>     <dd>      <p class="para">       要遍历的数组      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">callback</span></dt>     <dd>      <p class="para">       使用的回调函数      </p>      <p class="para">       如果没有提供 <span class="parameter" style="color:#3A95FF">callback</span> 回调函数，将删除数组中 <span class="parameter" style="color:#3A95FF">array</span> 的所有“空”元素。       有关 PHP 如何判定“空”元素，请参阅 <span class="function">{@link empty()}</span> 。      </p>     </dd>             <dt><span class="parameter" style="color:#3A95FF">mode</span></dt>     <dd>      <p class="para">       决定哪些参数发送到 <span class="parameter" style="color:#3A95FF">callback</span> 回调的标志：       <ul class="itemizedlist">        <li class="listitem">         <span class="simpara"><strong><span>ARRAY_FILTER_USE_KEY</span></strong> - 将键名作为 <span class="parameter" style="color:#3A95FF">callback</span> 回调的唯一参数，而不是值</span>        </li>        <li class="listitem">         <span class="simpara"><strong><span>ARRAY_FILTER_USE_BOTH</span></strong> - 将值和键都作为参数传递给 <span class="parameter" style="color:#3A95FF">callback</span> 回调，而不是仅传递值</span>        </li>       </ul>       默认值为 <span>0</span> ，只传递值作为 <span class="parameter" style="color:#3A95FF">callback</span> 回调的唯一参数。      </p>     </dd>       </dl>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 returnvalues" id="refsect1-function.array-filter-returnvalues">  <h3 class="title">返回值</h3>  <p class="para">   返回过滤后的数组。  </p> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 changelog" id="refsect1-function.array-filter-changelog">  <h3 class="title">更新日志</h3>  <table class="doctable informaltable">       <thead>     <tr>      <th>版本</th>      <th>说明</th>     </tr>    </thead>    <tbody class="tbody">     <tr>      <td>8.0.0</td>      <td>       <span class="parameter" style="color:#3A95FF">callback</span> 现在可为空（nullable）。      </td>     </tr>     <tr> <td>8.0.0</td> <td>  如果 <span class="parameter" style="color:#3A95FF">callback</span> 接受引用传递参数，该方法将会抛出  <strong><span>E_WARNING</span></strong>。 </td></tr>    </tbody>     </table> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 examples" id="refsect1-function.array-filter-examples">  <h3 class="title">示例</h3>  <span>   <div class="example" id="">    <p><strong>示例 #1 <span class="function"><strong style="color:#CC7832">array_filter()</strong></span> 示例</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br /></span><span style="color: #007700">function </span><span style="color: #9876AA">odd</span><span style="color: #007700">(</span><span style="color: #9876AA">$var</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #FF8000">// 返回输入整数是否为奇数（单数）<br />    </span><span style="color: #007700">return </span><span style="color: #9876AA">$var </span><span style="color: #007700">&amp; </span><span style="color: #9876AA">1</span><span style="color: #007700">;<br />}<br />function </span><span style="color: #9876AA">even</span><span style="color: #007700">(</span><span style="color: #9876AA">$var</span><span style="color: #007700">)<br />{<br />    </span><span style="color: #FF8000">// 返回输入整数是否为偶数<br />    </span><span style="color: #007700">return !(</span><span style="color: #9876AA">$var </span><span style="color: #007700">&amp; </span><span style="color: #9876AA">1</span><span style="color: #007700">);<br />}<br /></span><span style="color: #9876AA">$array1 </span><span style="color: #007700">= [</span><span style="color: #DD0000">'a' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #DD0000">'b' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">2</span><span style="color: #007700">, </span><span style="color: #DD0000">'c' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">3</span><span style="color: #007700">, </span><span style="color: #DD0000">'d' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">4</span><span style="color: #007700">, </span><span style="color: #DD0000">'e' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">5</span><span style="color: #007700">];<br /></span><span style="color: #9876AA">$array2 </span><span style="color: #007700">= [</span><span style="color: #9876AA">6</span><span style="color: #007700">, </span><span style="color: #9876AA">7</span><span style="color: #007700">, </span><span style="color: #9876AA">8</span><span style="color: #007700">, </span><span style="color: #9876AA">9</span><span style="color: #007700">, </span><span style="color: #9876AA">10</span><span style="color: #007700">, </span><span style="color: #9876AA">11</span><span style="color: #007700">, </span><span style="color: #9876AA">12</span><span style="color: #007700">];<br />echo </span><span style="color: #DD0000">"Odd :\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">array_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$array1</span><span style="color: #007700">, </span><span style="color: #DD0000">"odd"</span><span style="color: #007700">));<br />echo </span><span style="color: #DD0000">"Even:\n"</span><span style="color: #007700">;<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">array_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$array2</span><span style="color: #007700">, </span><span style="color: #DD0000">"even"</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Odd :<br>Array<br>(<br>    [a] =&gt; 1<br>    [c] =&gt; 3<br>    [e] =&gt; 5<br>)<br>Even:<br>Array<br>(<br>    [0] =&gt; 6<br>    [2] =&gt; 8<br>    [4] =&gt; 10<br>    [6] =&gt; 12<br>)<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #2 <span class="function"><strong style="color:#CC7832">array_filter()</strong></span> 不使用 <span class="parameter" style="color:#3A95FF">callback</span> 参数时</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$entry </span><span style="color: #007700">= [<br />    </span><span style="color: #9876AA">0 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'foo'</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">1 </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">false</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">2 </span><span style="color: #007700">=&gt; -</span><span style="color: #9876AA">1</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">3 </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">null</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">4 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">''</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">5 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'0'</span><span style="color: #007700">,<br />    </span><span style="color: #9876AA">6 </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">0</span><span style="color: #007700">,<br />];<br /></span><span style="color: #9876AA">print_r</span><span style="color: #007700">(</span><span style="color: #9876AA">array_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$entry</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>Array<br>(<br>    [0] =&gt; foo<br>    [2] =&gt; -1<br>)<br></span></div>    </div>   </div>   <div class="example" id="">    <p><strong>示例 #3 <span class="function"><strong style="color:#CC7832">array_filter()</strong></span> 不使用 <span class="parameter" style="color:#3A95FF">mode</span> 参数时</strong></p>    <div class="example-contents"><div class="phpcode" style="border-color:gray;background:#232525"><span><span style="color: #000000"><span style="color: #9876AA">&lt;?php<br />$arr </span><span style="color: #007700">= [</span><span style="color: #DD0000">'a' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">1</span><span style="color: #007700">, </span><span style="color: #DD0000">'b' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">2</span><span style="color: #007700">, </span><span style="color: #DD0000">'c' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">3</span><span style="color: #007700">, </span><span style="color: #DD0000">'d' </span><span style="color: #007700">=&gt; </span><span style="color: #9876AA">4</span><span style="color: #007700">];<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">array_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$arr</span><span style="color: #007700">, function(</span><span style="color: #9876AA">$k</span><span style="color: #007700">) {<br />    return </span><span style="color: #9876AA">$k </span><span style="color: #007700">== </span><span style="color: #DD0000">'b'</span><span style="color: #007700">;<br />}, </span><span style="color: #9876AA">ARRAY_FILTER_USE_KEY</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">var_dump</span><span style="color: #007700">(</span><span style="color: #9876AA">array_filter</span><span style="color: #007700">(</span><span style="color: #9876AA">$arr</span><span style="color: #007700">, function(</span><span style="color: #9876AA">$v</span><span style="color: #007700">, </span><span style="color: #9876AA">$k</span><span style="color: #007700">) {<br />    return </span><span style="color: #9876AA">$k </span><span style="color: #007700">== </span><span style="color: #DD0000">'b' </span><span style="color: #007700">|| </span><span style="color: #9876AA">$v </span><span style="color: #007700">== </span><span style="color: #9876AA">4</span><span style="color: #007700">;<br />}, </span><span style="color: #9876AA">ARRAY_FILTER_USE_BOTH</span><span style="color: #007700">));<br /></span><span style="color: #9876AA">?&gt;</span></span></span></div>    </div>    <div class="example-contents"><p>以上示例会输出：</p></div>    <div class="example-contents screen" style="color:AFB1B3;background:black;padding-left:5px;"><div class="cdata"><span>array(1) {<br>  [&quot;b&quot;]=&gt;<br>  int(2)<br>}<br>array(2) {<br>  [&quot;b&quot;]=&gt;<br>  int(2)<br>  [&quot;d&quot;]=&gt;<br>  int(4)<br>}<br></span></div>    </div>   </div>  </span> </div> <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 notes" id="refsect1-function.array-filter-notes">  <h3 class="title">注释</h3>  <div class="caution"><strong class="caution">警告</strong>   <p class="para">    不应该在回调函数中改变数组（如：添加、删除或销毁“unset”当前数组和里面的元素），否则此函数的行为将不可预测。   </p>  </div> </div>  <br></br><div style="BORDER-TOP: gray 1px dashed; OVERFLOW: hidden; HEIGHT: 1px"></div><div class="refsect1 seealso" id="refsect1-function.array-filter-seealso">  <h3 class="title">参见</h3>  <span>   <ul class="simplelist">    <li class="member"><span class="function">{@link array_intersect()} - 计算数组的交集</span></li>    <li class="member"><span class="function">{@link array_map()} - 为数组的每个元素应用回调函数</span></li>    <li class="member"><span class="function">{@link array_reduce()} - 用回调函数迭代地将数组简化为单一的值</span></li>    <li class="member"><span class="function">{@link array_walk()} - 使用用户自定义函数对数组中的每个元素做回调处理</span></li>   </ul>  </span> </div></div>